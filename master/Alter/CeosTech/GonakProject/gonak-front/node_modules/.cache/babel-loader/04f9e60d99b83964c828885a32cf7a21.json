{"ast":null,"code":"import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import{useEffect,useState}from\"react\";import FactureList from\"./FactureList\";import\"./HistoriqueFacture.css\";import{URL}from\"../../../middlewares/request\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var HistoriqueFacture=function HistoriqueFacture(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),factures=_useState2[0],setFactures=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),facturesFilter=_useState4[0],setFacturesFilter=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isFilter=_useState6[0],setIsFilter=_useState6[1];var fetchFactures=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(URL+\"comptabilite/facture/\");case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);setFactures(data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchFactures(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchFactures();console.log(facturesFilter);return function(){return setFactures([]);};},[]);var history=useHistory();var faireRedirection=function faireRedirection(){var url=\"/admin/Comptabilite/\";history.push(url);};var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),aujourdhui_ca=_useState8[0],setAujourdhuiCa=_useState8[1];var _useState9=useState(new Date().toLocaleDateString()),_useState10=_slicedToArray(_useState9,2),calendar=_useState10[0],setCalendar=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),calendar_ca=_useState12[0],setCalendarCa=_useState12[1];var aujourdhui=new Date().getTime();//// 11/03/2021\nvar dateFormat=FactureList.date_achat;//const dateFormat= \"jj/mm/aaaa\"\nvar get_suivi_jour=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(val){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(val);_context2.next=3;return axios.get(URL+\"comptabilite/facture/?date_achat=\"+val);case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setFacturesFilter(data);setIsFilter(true);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function get_suivi_jour(_x){return _ref2.apply(this,arguments);};}();var get_ca_by_calendar=function get_ca_by_calendar(e){// console.log(e.target.valueAsNumber);\n// console.log(e.target.valueAsDate);\n// console.log(new Date(e.target.valueAsNumber).toDateString()); //// Tue Mar 09 2021\nsetCalendar(new Date(e.target.valueAsNumber).getTime());var tmp=new Date(e.target.valueAsNumber).getTime();//const { debut, fin } = get_time_debut_fin(new Date(e.target.valueAsNumber));\nget_suivi_jour(tmp);};//  useEffect(() => {\n//const { debut, fin } = get_time_debut_fin(new Date().getTime());\n// get_suivi_jour(new Date().getTime());\n//}, []);\nvar reset=function reset(){//let url= \"admin/Comptabilite/facture-achats/HistoriqueFactures/\"\n//window.location.href=url;\nvar currentPath=window.location.pathname;history.replace(\"\".concat(currentPath,\"/replace\"));setTimeout(function(){history.replace(currentPath);},0);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dirigeant-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\",onClick:faireRedirection}),/*#__PURE__*/_jsx(\"h1\",{children:\"Historique des factures\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"suivi_activite__jour_exacte-calendrier\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Calendrier: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",onChange:get_ca_by_calendar})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"historiqueCommande admin__container\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\",marginBottom:\"2rem\",color:\"#04295d\"},children:factures.length?\"Vos factures\":\"Pas de factures\"}),isFilter?/*#__PURE__*/_jsx(FactureList,{factures:facturesFilter}):/*#__PURE__*/_jsx(FactureList,{factures:factures})]}),/*#__PURE__*/_jsx(\"div\",{className:\"res_button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"reset_button\",onClick:reset,children:\"reinitialiser\"})})]})});};export default HistoriqueFacture;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/HistoriqueFacture/historiquefacture.js"],"names":["React","useHistory","axios","useEffect","useState","FactureList","URL","HistoriqueFacture","factures","setFactures","facturesFilter","setFacturesFilter","isFilter","setIsFilter","fetchFactures","get","data","console","log","history","faireRedirection","url","push","aujourdhui_ca","setAujourdhuiCa","Date","toLocaleDateString","calendar","setCalendar","calendar_ca","setCalendarCa","aujourdhui","getTime","dateFormat","date_achat","get_suivi_jour","val","get_ca_by_calendar","e","target","valueAsNumber","tmp","reset","currentPath","window","location","pathname","replace","setTimeout","textAlign","marginBottom","color","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport FactureList from \"./FactureList\";\nimport \"./HistoriqueFacture.css\";\nimport { URL } from \"../../../middlewares/request\";\n\nconst HistoriqueFacture = () => {\n  const [factures, setFactures] = useState([]);\n  const [facturesFilter, setFacturesFilter] = useState([]);\n  const [isFilter, setIsFilter] = useState(false);\n\n  const fetchFactures = async () => {\n    const { data } = await axios.get(URL + \"comptabilite/facture/\");\n    console.log(data);\n    setFactures(data);\n  };\n\n  useEffect(() => {\n    fetchFactures();\n\n    console.log(facturesFilter);\n\n    return () => setFactures([]);\n  }, []);\n\n  const history = useHistory();\n  const faireRedirection = () => {\n    let url = \"/admin/Comptabilite/\";\n    history.push(url);\n  };\n\n  const [aujourdhui_ca, setAujourdhuiCa] = useState(null);\n  const [calendar, setCalendar] = useState(new Date().toLocaleDateString());\n  const [calendar_ca, setCalendarCa] = useState(null);\n\n  const aujourdhui = new Date().getTime(); //// 11/03/2021\n\n  const dateFormat = FactureList.date_achat;\n\n  //const dateFormat= \"jj/mm/aaaa\"\n\n  const get_suivi_jour = async (val) => {\n    console.log(val);\n    const { data } = await axios.get(\n      URL + \"comptabilite/facture/?date_achat=\" + val\n    );\n    setFacturesFilter(data);\n    setIsFilter(true);\n  };\n\n  const get_ca_by_calendar = (e) => {\n    // console.log(e.target.valueAsNumber);\n    // console.log(e.target.valueAsDate);\n    // console.log(new Date(e.target.valueAsNumber).toDateString()); //// Tue Mar 09 2021\n\n    setCalendar(new Date(e.target.valueAsNumber).getTime());\n    let tmp = new Date(e.target.valueAsNumber).getTime();\n    //const { debut, fin } = get_time_debut_fin(new Date(e.target.valueAsNumber));\n    get_suivi_jour(tmp);\n  };\n\n  //  useEffect(() => {\n  //const { debut, fin } = get_time_debut_fin(new Date().getTime());\n\n  // get_suivi_jour(new Date().getTime());\n  //}, []);\n  const reset = () => {\n    //let url= \"admin/Comptabilite/facture-achats/HistoriqueFactures/\"\n    //window.location.href=url;\n    let currentPath = window.location.pathname;\n    history.replace(`${currentPath}/replace`);\n    setTimeout(() => {\n      history.replace(currentPath);\n    }, 0);\n  };\n\n  return (\n    <>\n      <div className=\"main\">\n        <div className=\"dirigeant-header\">\n          <i className=\"fas fa-arrow-left\" onClick={faireRedirection}></i>\n          <h1>Historique des factures</h1>\n        </div>\n        <div className=\"suivi_activite__jour_exacte-calendrier\">\n          <label>Calendrier: </label>\n          <input type=\"date\" onChange={get_ca_by_calendar} />\n        </div>\n        <div className=\"historiqueCommande admin__container\">\n          <h1\n            style={{\n              textAlign: \"center\",\n              marginBottom: \"2rem\",\n              color: \"#04295d\",\n            }}\n          >\n            {factures.length ? \"Vos factures\" : \"Pas de factures\"}\n          </h1>\n          {isFilter ? (\n            <FactureList factures={facturesFilter} />\n          ) : (\n            <FactureList factures={factures} />\n          )}\n        </div>\n        <div className=\"res_button\">\n          <button className=\"reset_button\" onClick={reset}>\n            reinitialiser\n          </button>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default HistoriqueFacture;\n"]},"metadata":{},"sourceType":"module"}