{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/site/Panier/Paiement.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Button, FormControl, IconButton, Input, InputLabel, makeStyles, Select, MenuItem // Modal,\n} from \"@material-ui/core\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport useForm from \"../../../hooks/useForm\";\nimport \"./paiement.css\";\nimport { sendrequest } from \"../../../middlewares/request\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectBaskets, emptyBasket } from \"../../../app/Redux-slices/basketsSlice\"; //import spinner from \"../images/spinner.gif\";\n\nimport { calculPrixProduitAvecQuantite, calculTotal } from \"../../../utilities\";\nimport { useHistory } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Modal from \"../../../components/MyModal/Modal\";\nimport { URL } from \"../../../middlewares/request\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\"\n  },\n  margin: {\n    margin: theme.spacing(1, 0)\n  },\n  marginLeftRight: {\n    marginRight: theme.spacing(1),\n    marginLeft: theme.spacing(1)\n  },\n  withoutLabel: {\n    marginTop: theme.spacing(3)\n  },\n  textField: {\n    width: \"25ch\"\n  },\n  buttonIcon: {\n    paddingLeft: 1\n  },\n  border: {\n    \"& label.Mui-focused\": {\n      color: \"#ccc\"\n    },\n    \"& .MuiInput-underline:after\": {\n      borderBottomColor: \"#ccc\"\n    },\n    \"& .MuiOutlinedInput-root\": {\n      \"&:hover fieldset\": {\n        borderColor: \"#ccc\"\n      },\n      \"&.Mui-focused fieldset\": {\n        borderColor: \"#ccc\"\n      }\n    }\n  }\n})); // variable arbitraire pour effectuer des tests\n\nconst initial = {\n  nom: \"\",\n  prenom: \"\",\n  email: \"\",\n  num_tel: \"\",\n  adresse: \"\",\n  ville: \"\",\n  code_postale: \"\",\n  montant: 0\n};\n\nconst Paiement = props => {\n  _s();\n\n  // With location we can retrieve the kind of delivery chosen (was passed in props of history)\n  const location = useLocation();\n  const [paiment_process, setPaiement_process] = useState(\"livraison\");\n  const [showModal, setShowModal] = useState(false);\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true);\n  const [processing, setProcessing] = useState(false);\n  const [succeeded, setSucceeded] = useState(false); // const [supplements, setSupplements] = useState([]);\n\n  const stripe = useStripe();\n  const elements = useElements();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const baskets = useSelector(selectBaskets);\n  console.log(`baskets`, baskets);\n  const classes = useStyles();\n  const typeOfDelivery = location.delivery !== undefined ? location.delivery.value : \"veuillez choisir un mode de livraison dans le panier\";\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n    if (\"nom\" in fieldValues) validator.nom = state.nom ? null : \"le champ nom est obligatore\";\n    if (\"prenom\" in fieldValues) validator.prenom = state.prenom ? null : \"le champ prenom est obligatore\";\n    if (\"email\" in fieldValues) validator.email = /([a-zA-Z0-9-_.+]{4,})@.+\\..+/.test(email) ? null : \"Email n'est pas valide\";\n    if (\"num_tel\" in fieldValues) validator.num_tel = /(?:(\\+(\\d{1,2})?)[ -]?)?\\(?(?<first>\\d{3})\\)?[-\\s]?(\\d{3})[- ]?(\\d{4})/.test(num_tel) ? null : \"Numéro de téléphone n'est pas valide\";\n    if (\"adresse\" in fieldValues) validator.adresse = state.adresse ? null : \"le champ adresse est obligatore\";\n    if (\"ville\" in fieldValues) validator.ville = state.ville ? null : \"le champ ville est obligatore\";\n    if (\"code_postale\" in fieldValues) validator.code_postale = /\\d+/.test(code_postale) ? null : \"Code postale n'est pas valide\";\n    if (location.delivery === undefined) validator.delivery = \"Veuillez choisir un mode de livraison dans le panier\";\n    setErrors({ ...validator\n    }); // retourne boolean si et seulement si on passe un parametre pour la fonction\n\n    if (fieldValues === state) {\n      return Object.values(validator).every(el => !el);\n    }\n  };\n\n  const {\n    state,\n    handleInputChange,\n    errors,\n    setErrors,\n    reinitialiserState\n  } = useForm(initial, estValide);\n  const {\n    nom,\n    prenom,\n    email,\n    num_tel,\n    adresse,\n    ville,\n    code_postale\n  } = state;\n  const prixTotale = calculTotal(baskets);\n  const montant = parseInt(prixTotale.toFixed(2), 10);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (estValide()) {\n      setPaiement_process(\"paiement\");\n    }\n  };\n\n  const handleChange = event => {\n    // Listen for changes in CardElement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : \"\");\n  }; // Fonction liée au paiement ainsi qu'à l'enregistrement des infos du clients\n\n\n  const Payer = async e => {\n    e.preventDefault();\n    setProcessing(true);\n    const {\n      data\n    } = await axios.post(URL + \"paiement/create-client-secret\", {\n      amount: parseInt((prixTotale * 100).toFixed(2), 10),\n      email\n    }); // *100 : stripe prend l'unité en centimes\n    // 3€ -> 300 centimes\n\n    const billing_details = {\n      name: nom + \" \" + prenom,\n      address: {\n        city: ville,\n        country: \"fr\",\n        state: null,\n        line1: adresse,\n        line2: null,\n        postal_code: code_postale\n      },\n      email,\n      phone: num_tel\n    };\n\n    try {\n      const payload = await stripe.confirmCardPayment(data.clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details\n        }\n      });\n\n      if (payload.error) {\n        setError(`Paiement échoué: ${payload.error.message}`);\n        setProcessing(false);\n      } else {\n        setError(null);\n        setProcessing(false);\n        setDisabled(false);\n        setSucceeded(true);\n        const menus = [];\n        const produits = [];\n        baskets.forEach(item => {\n          const supp = JSON.stringify({\n            sauce: item.sauceSelected,\n            supplements: item.supplementSelected,\n            garniture: item.garnitureSelected,\n            boisson: item.boissonSelected,\n            painSelected: item.painSelected,\n            prixPizzaSelected: item.prix,\n            viande_1_selected: item.viande_1_selected,\n            viande_2_selected: item.viande_2_selected,\n            viande_3_selected: item.viande_3_selected\n          });\n          produits.push({\n            produit_id: item.id,\n            quantite: item.quantite,\n            information: item.information,\n            supplements: supp\n          });\n        });\n        const data = {\n          client: {\n            nom,\n            prenom,\n            email,\n            telephone: num_tel,\n            adresse,\n            ville,\n            code_postale,\n            montant: prixTotale\n          },\n          panier: {\n            menus: menus,\n            infos_menus: JSON.stringify(menus),\n            produits\n          },\n          methode_vente: typeOfDelivery,\n          commentaire: location.delivery.comment,\n          // à voir\n          prix_totale: prixTotale\n        };\n        const config = {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        };\n        sendrequest(\"post\", \"paiement/create-commande\", null, null, data) //commande partie resto\n        .then(response => {\n          if (response !== false) {\n            reinitialiserState();\n            dispatch(emptyBasket());\n            history.replace(\"/felicitation\", {\n              payer: true\n            });\n          } else {\n            setError(\"Un problème s'est produit lors du paiement, veuillez réessayer\");\n          }\n        });\n      }\n    } catch (err) {// setError(err.message);\n    }\n  };\n\n  const handleClose = e => {\n    if (e.target.classList.contains(\"myModal__backdrop\") || e.target.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.parentNode.classList.contains(\"myModal__modal__close-btn\")) {\n      setShowModal(false);\n    }\n  };\n\n  const handleOpen = () => {\n    setShowModal(true);\n  };\n\n  useEffect(() => {\n    console.log(`baskets de paiement à linterieru`, baskets);\n  }, [baskets]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"paiment\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"paiement__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Paiement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paiement__process\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paiement__process--option1 paiement__process--options active\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Adresse de facturation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paiement__process--option2 paiement__process--options \" + (paiment_process === \"paiement\" ? \"active\" : \"\"),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"D\\xE9tails de paiement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), paiment_process === \"livraison\" ? /*#__PURE__*/_jsxDEV(\"form\", {\n        noValidate: true,\n        autoComplete: \"off\",\n        onSubmit: handleSubmit,\n        style: {\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          className: `${classes.margin} ${classes.border} `,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: nom,\n            name: \"nom\",\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.nom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          className: `${classes.margin} ${classes.border} `,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Prenom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: prenom,\n            name: \"prenom\",\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.prenom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          className: `${classes.margin} ${classes.border} `,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Adresse Mail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"email\",\n            name: \"email\",\n            onChange: handleInputChange,\n            value: email,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          className: `${classes.margin} ${classes.border} `,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Num\\xE9ro de T\\xE9l\\xE9phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: num_tel,\n            name: \"num_tel\",\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.num_tel\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          className: `${classes.margin} ${classes.border} `,\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Adresse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: adresse,\n            name: \"adresse\",\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errors.adresse\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            className: `${classes.margin} ${classes.border} ${classes.marginLeftRight}`,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Ville\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              value: ville,\n              name: \"ville\",\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error\",\n              children: errors.ville\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 429,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            className: `${classes.margin} ${classes.border} ${classes.marginLeftRight}`,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Code Postal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              value: code_postale,\n              name: \"code_postale\",\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"error\",\n              children: errors.code_postale\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"delivery-infos__container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"paiement__delivery-informations\",\n            children: [\"Choix de livraison : \", typeOfDelivery]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error\",\n            children: errors.delivery\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          className: \"paiement--btn\",\n          endIcon: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 24\n          }, this),\n          children: \"Suivant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paiement__details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paiement__details__recapitualitfs\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"R\\xE9capitulatif de commande\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 15\n          }, this), baskets.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"paiement__details__product__details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paiement__details__product__details-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"paiement__details__product__details-info-quantite\",\n                children: [\"Quantit\\xE9: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\" \", product.quantite, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 33\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paiement__details__product__details-prix\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [calculPrixProduitAvecQuantite(product), \"\\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this)]\n          }, product.nom, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"paiement__details__recapitualitfs-total\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"TOTAL (TTC)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"paiement__details__recapitualitfs-total-prix\",\n              children: [prixTotale, \"\\u20AC\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"paiement__details__modePaiement\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Paiement s\\xE9curis\\xE9 par carte bancaire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"CB et VISA accept\\xE9es\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"paiement__form\",\n            children: [/*#__PURE__*/_jsxDEV(CardElement, {\n              id: \"card-element\",\n              onChange: handleChange,\n              options: cardStyle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paiement__details__error\",\n              children: [\"* \", error]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 19\n            }, this), baskets.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"paiement__details__error\",\n              children: \"* Vous n'avez rien dans le panier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: Payer,\n              disabled: prixTotale <= 1 || processing || disabled || succeeded,\n              type: \"submit\",\n              variant: \"contained\",\n              color: \"primary\",\n              className: \"paiement--btn-payer\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"paiement--btn-payer-text\",\n                children: processing ? {\n                  /*<img src={spinner} alt=\"spinner\" />*/\n                } : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\"Payer \", prixTotale, \"\\u20AC\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"paiement__details__securise\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-lock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this), \" Paiement 100% s\\xE9curis\\xE9\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paiement__close\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleOpen,\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-times\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"paiement__back \" + (paiment_process === \"paiement\" ? \"active\" : \"\"),\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => setPaiement_process(\"livraison\"),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-arrow-left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        closeButton: false,\n        showModal: showModal,\n        setShowModal: setShowModal,\n        handleClose: handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Etes-vous s\\xFBr de vouloir quitter cette page et retourner \\xE0 l'\\xE9cran de commande ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"secondary\",\n            onClick: handleClose,\n            className: \"myModal__modal__close-btn\",\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            style: {\n              marginLeft: \"20px\"\n            },\n            className: \"myModal__modal__close-btn\",\n            onClick: e => {\n              handleClose(e);\n              history.replace(\"/commander\");\n            },\n            children: \"Oui\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Paiement, \"Oneq6uDUTm6zzjFtE89lAFF77hM=\", false, function () {\n  return [useLocation, useStripe, useElements, useHistory, useDispatch, useSelector, useStyles, useForm];\n});\n\n_c = Paiement;\nconst cardStyle = {\n  style: {\n    base: {\n      color: \"#32325d\",\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n      fontSmoothing: \"antialiased\",\n      fontSize: \"16px\",\n      \"::placeholder\": {\n        color: \"#aaa\",\n        backgroundColor: \"#fff\"\n      },\n      \":-webkit-autofill\": {\n        color: \"#fff\"\n      },\n      \":focus\": {\n        color: \"#aaa\"\n      }\n    },\n    invalid: {\n      color: \"#fa755a\",\n      iconColor: \"#fa755a\"\n    }\n  },\n  hidePostalCode: true\n};\nexport default Paiement;\n\nvar _c;\n\n$RefreshReg$(_c, \"Paiement\");","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/site/Panier/Paiement.js"],"names":["useState","useEffect","Button","FormControl","IconButton","Input","InputLabel","makeStyles","Select","MenuItem","NavigateNextIcon","useForm","sendrequest","CardElement","useStripe","useElements","useSelector","useDispatch","selectBaskets","emptyBasket","calculPrixProduitAvecQuantite","calculTotal","useHistory","useLocation","axios","Modal","URL","useStyles","theme","root","display","flexWrap","justifyContent","margin","spacing","marginLeftRight","marginRight","marginLeft","withoutLabel","marginTop","textField","width","buttonIcon","paddingLeft","border","color","borderBottomColor","borderColor","initial","nom","prenom","email","num_tel","adresse","ville","code_postale","montant","Paiement","props","location","paiment_process","setPaiement_process","showModal","setShowModal","error","setError","disabled","setDisabled","processing","setProcessing","succeeded","setSucceeded","stripe","elements","history","dispatch","baskets","console","log","classes","typeOfDelivery","delivery","undefined","value","estValide","fieldValues","state","validator","test","setErrors","Object","values","every","el","handleInputChange","errors","reinitialiserState","prixTotale","parseInt","toFixed","handleSubmit","e","preventDefault","handleChange","event","empty","message","Payer","data","post","amount","billing_details","name","address","city","country","line1","line2","postal_code","phone","payload","confirmCardPayment","clientSecret","payment_method","card","getElement","menus","produits","forEach","item","supp","JSON","stringify","sauce","sauceSelected","supplements","supplementSelected","garniture","garnitureSelected","boisson","boissonSelected","painSelected","prixPizzaSelected","prix","viande_1_selected","viande_2_selected","viande_3_selected","push","produit_id","id","quantite","information","client","telephone","panier","infos_menus","methode_vente","commentaire","comment","prix_totale","config","headers","then","response","replace","payer","err","handleClose","target","classList","contains","parentNode","handleOpen","flexDirection","map","product","cardStyle","length","style","base","fontFamily","fontSmoothing","fontSize","backgroundColor","invalid","iconColor","hidePostalCode"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\n\nimport {\n  Button,\n  FormControl,\n  IconButton,\n  Input,\n  InputLabel,\n  makeStyles,\n  Select,\n  MenuItem,\n  // Modal,\n} from \"@material-ui/core\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport useForm from \"../../../hooks/useForm\";\n\nimport \"./paiement.css\";\n\nimport { sendrequest } from \"../../../middlewares/request\";\n\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectBaskets, emptyBasket } from \"../../../app/Redux-slices/basketsSlice\";\n//import spinner from \"../images/spinner.gif\";\nimport { calculPrixProduitAvecQuantite, calculTotal } from \"../../../utilities\";\nimport { useHistory } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Modal from \"../../../components/MyModal/Modal\";\nimport { URL } from \"../../../middlewares/request\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"center\",\n  },\n  margin: {\n    margin: theme.spacing(1, 0),\n  },\n  marginLeftRight: {\n    marginRight: theme.spacing(1),\n    marginLeft: theme.spacing(1),\n  },\n  withoutLabel: {\n    marginTop: theme.spacing(3),\n  },\n  textField: {\n    width: \"25ch\",\n  },\n\n  buttonIcon: {\n    paddingLeft: 1,\n  },\n\n  border: {\n    \"& label.Mui-focused\": {\n      color: \"#ccc\",\n    },\n    \"& .MuiInput-underline:after\": {\n      borderBottomColor: \"#ccc\",\n    },\n\n    \"& .MuiOutlinedInput-root\": {\n      \"&:hover fieldset\": {\n        borderColor: \"#ccc\",\n      },\n      \"&.Mui-focused fieldset\": {\n        borderColor: \"#ccc\",\n      },\n    },\n  },\n}));\n\n// variable arbitraire pour effectuer des tests\nconst initial = {\n  nom: \"\",\n  prenom: \"\",\n  email: \"\",\n  num_tel: \"\",\n  adresse: \"\",\n  ville: \"\",\n  code_postale: \"\",\n  montant: 0,\n};\n\nconst Paiement = (props) => {\n  // With location we can retrieve the kind of delivery chosen (was passed in props of history)\n  const location = useLocation();\n\n  const [paiment_process, setPaiement_process] = useState(\"livraison\");\n  const [showModal, setShowModal] = useState(false);\n\n  const [error, setError] = useState(null);\n  const [disabled, setDisabled] = useState(true);\n  const [processing, setProcessing] = useState(false);\n  const [succeeded, setSucceeded] = useState(false);\n  // const [supplements, setSupplements] = useState([]);\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const history = useHistory();\n\n  const dispatch = useDispatch();\n  const baskets = useSelector(selectBaskets);\n  console.log(`baskets`, baskets);\n\n  const classes = useStyles();\n\n  const typeOfDelivery =\n    location.delivery !== undefined\n      ? location.delivery.value\n      : \"veuillez choisir un mode de livraison dans le panier\";\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n    if (\"nom\" in fieldValues)\n      validator.nom = state.nom ? null : \"le champ nom est obligatore\";\n    if (\"prenom\" in fieldValues)\n      validator.prenom = state.prenom ? null : \"le champ prenom est obligatore\";\n\n    if (\"email\" in fieldValues)\n      validator.email = /([a-zA-Z0-9-_.+]{4,})@.+\\..+/.test(email)\n        ? null\n        : \"Email n'est pas valide\";\n\n    if (\"num_tel\" in fieldValues)\n      validator.num_tel =\n        /(?:(\\+(\\d{1,2})?)[ -]?)?\\(?(?<first>\\d{3})\\)?[-\\s]?(\\d{3})[- ]?(\\d{4})/.test(\n          num_tel\n        )\n          ? null\n          : \"Numéro de téléphone n'est pas valide\";\n\n    if (\"adresse\" in fieldValues)\n      validator.adresse = state.adresse\n        ? null\n        : \"le champ adresse est obligatore\";\n    if (\"ville\" in fieldValues)\n      validator.ville = state.ville ? null : \"le champ ville est obligatore\";\n\n    if (\"code_postale\" in fieldValues)\n      validator.code_postale = /\\d+/.test(code_postale)\n        ? null\n        : \"Code postale n'est pas valide\";\n\n    if (location.delivery === undefined)\n      validator.delivery =\n        \"Veuillez choisir un mode de livraison dans le panier\";\n\n    setErrors({ ...validator });\n\n    // retourne boolean si et seulement si on passe un parametre pour la fonction\n    if (fieldValues === state) {\n      return Object.values(validator).every((el) => !el);\n    }\n  };\n\n  const { state, handleInputChange, errors, setErrors, reinitialiserState } =\n    useForm(initial, estValide);\n\n  const { nom, prenom, email, num_tel, adresse, ville, code_postale } = state;\n\n  const prixTotale = calculTotal(baskets);\n\n  const montant = parseInt(prixTotale.toFixed(2), 10);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (estValide()) {\n      setPaiement_process(\"paiement\");\n    }\n  };\n\n  const handleChange = (event) => {\n    // Listen for changes in CardElement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : \"\");\n  };\n\n  // Fonction liée au paiement ainsi qu'à l'enregistrement des infos du clients\n  const Payer = async (e) => {\n    e.preventDefault();\n\n    setProcessing(true);\n\n    const { data } = await axios.post(URL + \"paiement/create-client-secret\", {\n      amount: parseInt((prixTotale * 100).toFixed(2), 10),\n      email,\n    });\n    // *100 : stripe prend l'unité en centimes\n    // 3€ -> 300 centimes\n\n    const billing_details = {\n      name: nom + \" \" + prenom,\n      address: {\n        city: ville,\n        country: \"fr\",\n        state: null,\n        line1: adresse,\n        line2: null,\n        postal_code: code_postale,\n      },\n      email,\n      phone: num_tel,\n    };\n\n    try {\n      const payload = await stripe.confirmCardPayment(data.clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement),\n          billing_details,\n        },\n      });\n      if (payload.error) {\n        setError(`Paiement échoué: ${payload.error.message}`);\n        setProcessing(false);\n      } else {\n        setError(null);\n        setProcessing(false);\n        setDisabled(false);\n        setSucceeded(true);\n\n        const menus = [];\n        const produits = [];\n\n        baskets.forEach((item) => {\n          const supp = JSON.stringify({\n            sauce: item.sauceSelected,\n            supplements: item.supplementSelected,\n            garniture: item.garnitureSelected,\n            boisson: item.boissonSelected,\n            painSelected: item.painSelected,\n            prixPizzaSelected: item.prix,\n            viande_1_selected: item.viande_1_selected,\n            viande_2_selected: item.viande_2_selected,\n            viande_3_selected: item.viande_3_selected,\n          });\n          produits.push({\n            produit_id: item.id,\n            quantite: item.quantite,\n            information: item.information,\n            supplements: supp,\n          });\n        });\n\n        const data = {\n          client: {\n            nom,\n            prenom,\n            email,\n            telephone: num_tel,\n            adresse,\n            ville,\n            code_postale,\n            montant: prixTotale,\n          },\n          panier: {\n            menus: menus,\n            infos_menus: JSON.stringify(menus),\n            produits,\n          },\n          methode_vente: typeOfDelivery,\n          commentaire: location.delivery.comment, // à voir\n          prix_totale: prixTotale,\n        };\n\n        const config = {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        };\n\n        sendrequest(\"post\", \"paiement/create-commande\", null, null, data) //commande partie resto\n          .then((response) => {\n            if (response !== false) {\n              reinitialiserState();\n              dispatch(emptyBasket());\n              history.replace(\"/felicitation\", { payer: true });\n            } else {\n              setError(\n                \"Un problème s'est produit lors du paiement, veuillez réessayer\"\n              );\n            }\n          });\n      }\n    } catch (err) {\n      // setError(err.message);\n    }\n  };\n\n  const handleClose = (e) => {\n    if (\n      e.target.classList.contains(\"myModal__backdrop\") ||\n      e.target.classList.contains(\"myModal__modal__close-btn\") ||\n      e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") ||\n      e.target.parentNode.parentNode.classList.contains(\n        \"myModal__modal__close-btn\"\n      )\n    ) {\n      setShowModal(false);\n    }\n  };\n\n  const handleOpen = () => {\n    setShowModal(true);\n  };\n\n  useEffect(() => {\n    console.log(`baskets de paiement à linterieru`, baskets);\n  }, [baskets]);\n\n  return (\n    <div className=\"paiment\">\n      <div className=\"paiement__container\">\n        <h1>Paiement</h1>\n        <div className=\"paiement__process\">\n          <div\n            className={\n              \"paiement__process--option1 paiement__process--options active\"\n            }\n          >\n            <span>1</span>\n            <p>Adresse de facturation</p>\n          </div>\n          <hr />\n          <div\n            className={\n              \"paiement__process--option2 paiement__process--options \" +\n              (paiment_process === \"paiement\" ? \"active\" : \"\")\n            }\n          >\n            <span>2</span>\n            <p>Détails de paiement</p>\n          </div>\n        </div>\n\n        {paiment_process === \"livraison\" ? (\n          <form\n            noValidate\n            autoComplete=\"off\"\n            onSubmit={handleSubmit}\n            style={{ flexDirection: \"column\" }}\n          >\n            <FormControl\n              fullWidth\n              className={`${classes.margin} ${classes.border} `}\n            >\n              <InputLabel>Nom</InputLabel>\n              <Input\n                value={nom}\n                name=\"nom\"\n                onChange={handleInputChange}\n                required\n              />\n            </FormControl>\n            <div className=\"error\">{errors.nom}</div>\n            <FormControl\n              fullWidth\n              className={`${classes.margin} ${classes.border} `}\n            >\n              <InputLabel>Prenom</InputLabel>\n              <Input\n                value={prenom}\n                name=\"prenom\"\n                onChange={handleInputChange}\n                required\n              />\n            </FormControl>\n            <div className=\"error\">{errors.prenom}</div>\n\n            <FormControl\n              fullWidth\n              className={`${classes.margin} ${classes.border} `}\n            >\n              <InputLabel>Adresse Mail</InputLabel>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                onChange={handleInputChange}\n                value={email}\n                required\n              />\n            </FormControl>\n            <div className=\"error\">{errors.email}</div>\n\n            <FormControl\n              fullWidth\n              className={`${classes.margin} ${classes.border} `}\n            >\n              <InputLabel>Numéro de Téléphone</InputLabel>\n              <Input\n                value={num_tel}\n                name=\"num_tel\"\n                onChange={handleInputChange}\n                required\n              />\n            </FormControl>\n            <div className=\"error\">{errors.num_tel}</div>\n\n            <FormControl\n              fullWidth\n              className={`${classes.margin} ${classes.border} `}\n            >\n              <InputLabel>Adresse</InputLabel>\n              <Input\n                value={adresse}\n                name=\"adresse\"\n                onChange={handleInputChange}\n                required\n              />\n            </FormControl>\n            <div className=\"error\">{errors.adresse}</div>\n\n            <div style={{ display: \"flex\" }}>\n              <FormControl\n                fullWidth\n                className={`${classes.margin} ${classes.border} ${classes.marginLeftRight}`}\n              >\n                <InputLabel>Ville</InputLabel>\n                <Input\n                  value={ville}\n                  name=\"ville\"\n                  onChange={handleInputChange}\n                  required\n                />\n                <div className=\"error\">{errors.ville}</div>\n              </FormControl>\n              <FormControl\n                fullWidth\n                className={`${classes.margin} ${classes.border} ${classes.marginLeftRight}`}\n              >\n                <InputLabel>Code Postal</InputLabel>\n                <Input\n                  value={code_postale}\n                  name=\"code_postale\"\n                  onChange={handleInputChange}\n                  required\n                />\n                <div className=\"error\">{errors.code_postale}</div>\n              </FormControl>\n            </div>\n\n            {/* The type of delivery chosen */}\n            <div className=\"delivery-infos__container\">\n              <p className=\"paiement__delivery-informations\">\n                Choix de livraison : {typeOfDelivery}\n              </p>\n              <div className=\"error\">{errors.delivery}</div>\n            </div>\n\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"paiement--btn\"\n              endIcon={<NavigateNextIcon />}\n            >\n              Suivant\n            </Button>\n          </form>\n        ) : (\n          <div className=\"paiement__details\">\n            <div className=\"paiement__details__recapitualitfs\">\n              <h2>Récapitulatif de commande</h2>\n              {baskets.map((product) => (\n                <div\n                  className=\"paiement__details__product__details\"\n                  key={product.nom}\n                >\n                  <div className=\"paiement__details__product__details-info\">\n                    <p>{product.nom}</p>\n                    <p className=\"paiement__details__product__details-info-quantite\">\n                      Quantité: <span> {product.quantite} </span>{\" \"}\n                    </p>\n                  </div>\n                  <div className=\"paiement__details__product__details-prix\">\n                    <p>{calculPrixProduitAvecQuantite(product)}€</p>\n                  </div>\n                </div>\n              ))}\n              <div className=\"paiement__details__recapitualitfs-total\">\n                <p>TOTAL (TTC)</p>\n                <p className=\"paiement__details__recapitualitfs-total-prix\">\n                  {prixTotale}€\n                </p>\n              </div>\n            </div>\n\n            <div className=\"paiement__details__modePaiement\">\n              <h2>Paiement sécurisé par carte bancaire</h2>\n              <p>CB et VISA acceptées</p>\n              <form className=\"paiement__form\">\n                <CardElement\n                  id=\"card-element\"\n                  onChange={handleChange}\n                  options={cardStyle}\n                />\n                {error && (\n                  <div className=\"paiement__details__error\">* {error}</div>\n                )}\n\n                {baskets.length === 0 && (\n                  <div className=\"paiement__details__error\">\n                    * Vous n'avez rien dans le panier\n                  </div>\n                )}\n\n                <Button\n                  onClick={Payer}\n                  disabled={\n                    prixTotale <= 1 || processing || disabled || succeeded\n                  }\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  className=\"paiement--btn-payer\"\n                >\n                  <span className=\"paiement--btn-payer-text\">\n                    {processing ? (\n                      {/*<img src={spinner} alt=\"spinner\" />*/}\n                    ) : (\n                      <>Payer {prixTotale}€</>\n                    )}\n                  </span>\n                </Button>\n              </form>\n              <p className=\"paiement__details__securise\">\n                <i className=\"fas fa-lock\"></i> Paiement 100% sécurisé\n              </p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"paiement__close\">\n          <IconButton onClick={handleOpen}>\n            <i className=\"fas fa-times\"></i>\n          </IconButton>\n        </div>\n        <div\n          className={\n            \"paiement__back \" + (paiment_process === \"paiement\" ? \"active\" : \"\")\n          }\n        >\n          <IconButton onClick={() => setPaiement_process(\"livraison\")}>\n            <i className=\"fas fa-arrow-left\"></i>\n          </IconButton>\n        </div>\n\n        <Modal\n          closeButton={false}\n          showModal={showModal}\n          setShowModal={setShowModal}\n          handleClose={handleClose}\n        >\n          <Modal.Header>\n            <h2>\n              Etes-vous sûr de vouloir quitter cette page et retourner à l'écran\n              de commande ?\n            </h2>\n          </Modal.Header>\n          <Modal.Footer>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              onClick={handleClose}\n              className=\"myModal__modal__close-btn\"\n            >\n              Annuler\n            </Button>\n            <Button\n              variant=\"contained\"\n              style={{ marginLeft: \"20px\" }}\n              className=\"myModal__modal__close-btn\"\n              onClick={(e) => {\n                handleClose(e);\n                history.replace(\"/commander\");\n              }}\n            >\n              Oui\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </div>\n    </div>\n  );\n};\n\nconst cardStyle = {\n  style: {\n    base: {\n      color: \"#32325d\",\n      fontFamily: \"Roboto, Open Sans, Segoe UI, sans-serif\",\n      fontSmoothing: \"antialiased\",\n      fontSize: \"16px\",\n      \"::placeholder\": {\n        color: \"#aaa\",\n        backgroundColor: \"#fff\",\n      },\n      \":-webkit-autofill\": {\n        color: \"#fff\",\n      },\n      \":focus\": {\n        color: \"#aaa\",\n      },\n    },\n\n    invalid: {\n      color: \"#fa755a\",\n      iconColor: \"#fa755a\",\n    },\n  },\n  hidePostalCode: true,\n};\n\nexport default Paiement;"]},"metadata":{},"sourceType":"module"}