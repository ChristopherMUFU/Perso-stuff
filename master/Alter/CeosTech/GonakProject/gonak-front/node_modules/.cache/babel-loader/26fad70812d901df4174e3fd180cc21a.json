{"ast":null,"code":"import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import Radio from\"@material-ui/core/Radio\";import RadioGroup from\"@material-ui/core/RadioGroup\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import TextField from\"@material-ui/core/TextField\";import{Button}from\"@material-ui/core\";import{useHistory}from\"react-router-dom\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{sendrequest,URL}from\"../../../../middlewares/request\";import{useSelector}from\"react-redux\";import{calculTotal,getNombresArticles}from\"../../../../utilities\";import{selectBaskets}from\"../../../../app/Redux-slices/basketsSlice\";import\"./styles.css\";import CGV from\"../../../../Documents/CGV.pdf\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RadioButtonsGroup=function RadioButtonsGroup(){var history=useHistory();var baskets=useSelector(selectBaskets);var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),value=_React$useState2[0],setValue=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),zoneValue=_React$useState4[0],setZoneValue=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),livraison=_React$useState6[0],setLivraison=_React$useState6[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),error=_React$useState8[0],setError=_React$useState8[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),isOpened=_useState4[0],setOpening=_useState4[1];// undefined\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),errorCGV=_useState6[0],setErrorCGV=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),checked=_useState8[0],setChecked=_useState8[1];var handleChange=function handleChange(event){if(event.target.value===\"livraison\"){setLivraison(true);}else{setLivraison(false);}setValue(event.target.value);setError(false);};var handleChangeZone=function handleChangeZone(event){setZoneValue(event.target.value);setError(false);};var handleCommentChange=function handleCommentChange(event){setComment(event.target.value);};var get_restaurant=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get(URL+\"restaurant/info_restaurant/\").then(function(res){return setOpening(res.data);});;case 2:case\"end\":return _context.stop();}}},_callee);}));return function get_restaurant(){return _ref.apply(this,arguments);};}();var affichageZone1=function affichageZone1(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{className:\"radio__text-zone\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Zone 1 (20\\u20AC minimum de commande) : \"}),\"Le Blanc-Mesnil, Aulnay-sous-Bois, Le Bourget\"]})});};var valZone1=20;var affichageZone2=function affichageZone2(){return/*#__PURE__*/_jsxs(\"p\",{className:\"radio__text-zone\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Zone 2 (25\\u20AC minimum de commande) : \"}),\"Bondy, Bobigny, Dugny, Drancy\"]});};var valZone2=25;var affichageZone3=function affichageZone3(){return/*#__PURE__*/_jsxs(\"p\",{className:\"radio__text-zone\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Zone 3 (30\\u20AC minimum de commande) : \"}),\"Stains, Pierrefitte-sur-Seine, Saint-Denis, Villetaneuse, Sarcelles\"]});};var valZone3=30;useState(function(){return get_restaurant();});// Will redirect to the payment and add in the props the kind of delivery chosen\nvar handleSubmit=function handleSubmit(){var _isOpened;var d=new Date();var hour=d.getHours();var day=d.getDay();//const isMenu = baskets.filter((menu) => \"type\" in menu);\nconsole.log(\"go\");//If the restaurant is closed\nif(!((_isOpened=isOpened[isOpened.length-1])===null||_isOpened===void 0?void 0:_isOpened.disponibilite_restaurant)){alert(\"Nous sommes désolés, le restaurant est actuellement fermé, revenez bientôt !\");}else if(day>5){//If the user is trying to order a menu at the wrong time : order possible monday to friday\nalert(\"Nous sommes désolés, il n'est pas possible de commander un menu le week-end.\");}else if(hour<10||hour>18){//If the user is trying to order a menu at the wrong time : order possible 11h to 14h\nalert(\"Nous sommes désolés, il n'est possible de commander un menu qu'entre 11h et 14h.\");}else{//Validate the cart\nif(value!==\"\"&&checked){history.push({pathname:\"/home/paiement\",delivery:{value:value,comment:comment}});setError(false);setErrorCGV(false);}else{if(value==\"\"){setError(true);}if(!checked){setErrorCGV(true);}}}};var total=calculTotal(baskets);var zoneVerify=function zoneVerify(event){if(Number(zoneValue)===valZone1&&total<valZone1){alert(\"Le minimum de commande pour cette zone est de\"+valZone1+\"€. Veuillez compléter votre panier, merci :)\");setZoneValue(-1);}else if(Number(zoneValue)===valZone2&&total<valZone2){alert(\"Le minimum de commande pour cette zone est de \"+valZone2+\"€. Veuillez compléter votre panier, merci :)\");setZoneValue(-1);}else if(Number(zoneValue)===valZone3&&total<valZone3){alert(\"Le minimum de commande pour cette zone est de \"+valZone3+\"€. Veuillez compléter votre panier, merci :)\");setZoneValue(-1);}else{handleSubmit();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"panier__fieldset\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-full-width\",style:{marginBottom:\"2rem\"},placeholder:\"Commentaire\",helperText:\"Indiquez ici toute information compl\\xE9mentaire sur votre commande\",fullWidth:true,margin:\"normal\",rows:2,variant:\"outlined\",onChange:handleCommentChange}),/*#__PURE__*/_jsxs(RadioGroup,{\"aria-label\":\"panier__choice-delivery\",name:\"panier__choice-delivery\",value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(FormControlLabel,{className:\"radio__panier-choice\",value:\"\\xE0 emporter\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"\\xC0 emporter\"}),isOpened[0]!==undefined&&isOpened[0].disponibilite_livraison?/*#__PURE__*/_jsx(FormControlLabel,{value:\"livraison\",className:\"radio__panier-choice\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Livraison\"}):null]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error error_cart\",children:\"Veuillez choisir un mode de livraison\"}),livraison?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"livraison__container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Minimum de commande selon la zone\",/*#__PURE__*/_jsx(\"br\",{}),\"D\\xE9lai livraison : 45min/1heure\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Veuillez choisir votre zone de livraison\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"zones__container\",children:/*#__PURE__*/_jsxs(RadioGroup,{\"aria-label\":\"panier__choice-delivery\",name:\"panier__choice-delivery\",value:zoneValue,onChange:handleChangeZone,children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"20\",className:\"radio__panier-zone\",control:/*#__PURE__*/_jsx(Radio,{}),label:affichageZone1()}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"25\",className:\"radio__panier-zone\",control:/*#__PURE__*/_jsx(Radio,{}),label:affichageZone2()}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"30\",className:\"radio__panier-zone\",control:/*#__PURE__*/_jsx(Radio,{}),label:affichageZone3()})]})})]}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"CGV__container\",children:[/*#__PURE__*/_jsx(Checkbox,{checked:checked,onClick:function onClick(){setChecked(!checked);setErrorCGV(false);},color:\"primary\",inputProps:{\"aria-label\":\"secondary checkbox\"}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"J'ai lu et j'accepte les\",\" \",/*#__PURE__*/_jsx(\"a\",{href:CGV,target:\"_blank\",children:\"Conditions G\\xE9n\\xE9rales de Vente\"})]})]}),errorCGV&&/*#__PURE__*/_jsx(\"p\",{className:\"error error_cart\",children:\"Veuillez accepter les conditions g\\xE9n\\xE9rales de vente\"}),/*#__PURE__*/_jsx(Button,{onClick:zoneVerify,type:\"submit\",variant:\"contained\",color:\"secondary\",className:\"panier__container--btn-valider\",children:\"Commander\"})]});};export default RadioButtonsGroup;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/site/Panier/RadioPanier/index.js"],"names":["React","Radio","RadioGroup","FormControlLabel","Checkbox","TextField","Button","useHistory","useState","useEffect","axios","sendrequest","URL","useSelector","calculTotal","getNombresArticles","selectBaskets","CGV","RadioButtonsGroup","history","baskets","value","setValue","zoneValue","setZoneValue","livraison","setLivraison","comment","setComment","error","setError","isOpened","setOpening","errorCGV","setErrorCGV","checked","setChecked","handleChange","event","target","handleChangeZone","handleCommentChange","get_restaurant","get","then","res","data","affichageZone1","valZone1","affichageZone2","valZone2","affichageZone3","valZone3","handleSubmit","d","Date","hour","getHours","day","getDay","console","log","length","disponibilite_restaurant","alert","push","pathname","delivery","total","zoneVerify","Number","marginBottom","undefined","disponibilite_livraison"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Button } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { sendrequest, URL } from \"../../../../middlewares/request\";\nimport { useSelector } from \"react-redux\";\nimport { calculTotal, getNombresArticles } from \"../../../../utilities\";\nimport { selectBaskets } from \"../../../../app/Redux-slices/basketsSlice\";\n\n\nimport \"./styles.css\";\n\nimport CGV from \"../../../../Documents/CGV.pdf\";\n\nconst RadioButtonsGroup = () => {\n  const history = useHistory();\n  const baskets = useSelector(selectBaskets);\n\n  const [value, setValue] = React.useState(\"\");\n  const [zoneValue, setZoneValue] = React.useState(\"\");\n  const [livraison, setLivraison] = React.useState(false);\n  const [comment, setComment] = useState(\"\");\n\n  const [error, setError] = React.useState(false);\n  const [isOpened, setOpening] = useState([]); // undefined\n  const [errorCGV, setErrorCGV] = useState(false);\n\n  const [checked, setChecked] = useState(false);\n\n  const handleChange = (event) => {\n    if (event.target.value === \"livraison\") {\n      setLivraison(true);\n    } else {\n      setLivraison(false);\n    }\n    setValue(event.target.value);\n    setError(false);\n  };\n\n  const handleChangeZone = (event) => {\n    setZoneValue(event.target.value);\n    setError(false);\n  };\n\n  const handleCommentChange = (event) => {\n    setComment(event.target.value);\n  };\n\n  const get_restaurant = async () => {\n    axios.get(URL + \"restaurant/info_restaurant/\").then((res) => setOpening(res.data));;\n  };\n\n  const affichageZone1 = () => {\n    return (\n      <>\n        <p className=\"radio__text-zone\">\n          <strong>Zone 1 (20€ minimum de commande) : </strong>\n            Le Blanc-Mesnil, Aulnay-sous-Bois, Le Bourget\n        </p>\n      </>\n    );\n  };\n\n  const valZone1 = 20;\n\n  const affichageZone2 = () => {\n    return (\n      <p className=\"radio__text-zone\">\n        <strong>Zone 2 (25€ minimum de commande) : </strong>\n        Bondy, Bobigny, Dugny, Drancy\n      </p>\n    );\n  };\n\n  const valZone2 = 25;\n\n  const affichageZone3 = () => {\n    return (\n      <p className=\"radio__text-zone\">\n        <strong>Zone 3 (30€ minimum de commande) : </strong>\n        Stains, Pierrefitte-sur-Seine, Saint-Denis, Villetaneuse, Sarcelles\n      </p>\n    );\n  };\n\n  const valZone3 = 30;\n\n  useState(() => get_restaurant());\n\n  // Will redirect to the payment and add in the props the kind of delivery chosen\n  const handleSubmit = () => {\n    const d = new Date();\n    const hour = d.getHours();\n    const day = d.getDay();\n    //const isMenu = baskets.filter((menu) => \"type\" in menu);\n    console.log(\"go\");\n    //If the restaurant is closed\n    if (!isOpened[isOpened.length - 1]?.disponibilite_restaurant) {\n      alert(\n        \"Nous sommes désolés, le restaurant est actuellement fermé, revenez bientôt !\"\n      );\n    } else if (day > 5) {\n      //If the user is trying to order a menu at the wrong time : order possible monday to friday\n      alert(\n        \"Nous sommes désolés, il n'est pas possible de commander un menu le week-end.\"\n      );\n    } else if (hour < 10 || hour > 18) {\n      //If the user is trying to order a menu at the wrong time : order possible 11h to 14h\n      alert(\n        \"Nous sommes désolés, il n'est possible de commander un menu qu'entre 11h et 14h.\"\n      );\n    } else {\n      //Validate the cart\n      if (value !== \"\" && checked) {\n        history.push({\n          pathname: \"/home/paiement\",\n          delivery: { value, comment },\n        });\n        setError(false);\n        setErrorCGV(false);\n      } else {\n        if (value == \"\") {\n          setError(true);\n        }\n        if (!checked) {\n          setErrorCGV(true);\n        }\n      }\n    }\n  };\n\n  const total = calculTotal(baskets);\n\n  const zoneVerify = (event) => {\n    if (Number(zoneValue) === valZone1 && total < valZone1) {\n      alert(\n        \"Le minimum de commande pour cette zone est de\" +\n          valZone1 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone2 && total < valZone2) {\n      alert(\n        \"Le minimum de commande pour cette zone est de \" +\n          valZone2 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone3 && total < valZone3) {\n      alert(\n        \"Le minimum de commande pour cette zone est de \" +\n          valZone3 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else {\n        handleSubmit();\n    }\n  };\n\n  return (\n    <div className=\"panier__fieldset\">\n      <TextField\n        id=\"outlined-full-width\"\n        style={{ marginBottom: \"2rem\" }}\n        placeholder=\"Commentaire\"\n        helperText=\"Indiquez ici toute information complémentaire sur votre commande\"\n        fullWidth\n        margin=\"normal\"\n        rows={2}\n        variant=\"outlined\"\n        onChange={handleCommentChange}\n      />\n\n      <RadioGroup\n        aria-label=\"panier__choice-delivery\"\n        name=\"panier__choice-delivery\"\n        value={value}\n        onChange={handleChange}\n      >\n        <FormControlLabel\n          className=\"radio__panier-choice\"\n          value=\"à emporter\"\n          control={<Radio />}\n          label=\"À emporter\"\n        />\n        {isOpened[0] !== undefined && isOpened[0].disponibilite_livraison ? (\n          <FormControlLabel\n            value=\"livraison\"\n            className=\"radio__panier-choice\"\n            control={<Radio />}\n            label=\"Livraison\"\n          />\n        ) : null}\n      </RadioGroup>\n\n      {error && (\n        <p className=\"error error_cart\">\n          Veuillez choisir un mode de livraison\n        </p>\n      )}\n\n      {livraison ? (\n        <>\n          <div className=\"livraison__container\">\n            <h1>\n              Minimum de commande selon la zone\n              <br />\n              Délai livraison : 45min/1heure\n            </h1>\n            <p>Veuillez choisir votre zone de livraison</p>\n          </div>\n\n          <div className=\"zones__container\">\n            <RadioGroup\n              aria-label=\"panier__choice-delivery\"\n              name=\"panier__choice-delivery\"\n              value={zoneValue}\n              onChange={handleChangeZone}\n            >\n              <FormControlLabel\n                value=\"20\"\n                className=\"radio__panier-zone\"\n                control={<Radio />}\n                label={affichageZone1()}\n              />\n              <FormControlLabel\n                value=\"25\"\n                className=\"radio__panier-zone\"\n                control={<Radio />}\n                label={affichageZone2()}\n              />\n              <FormControlLabel\n                value=\"30\"\n                className=\"radio__panier-zone\"\n                control={<Radio />}\n                label={affichageZone3()}\n              />\n            </RadioGroup>\n          </div>\n        </>\n      ) : (\n        \"\"\n      )}\n\n      <div className=\"CGV__container\">\n        <Checkbox\n          checked={checked}\n          onClick={() => {\n            setChecked(!checked);\n            setErrorCGV(false);\n          }}\n          color=\"primary\"\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n        />\n        <p>\n          J'ai lu et j'accepte les{\" \"}\n          <a href={CGV} target=\"_blank\">\n            Conditions Générales de Vente\n          </a>\n        </p>\n      </div>\n\n      {errorCGV && (\n        <p className=\"error error_cart\">\n          Veuillez accepter les conditions générales de vente\n        </p>\n      )}\n\n      <Button\n        onClick={zoneVerify}\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"secondary\"\n        className=\"panier__container--btn-valider\"\n      >\n        Commander\n      </Button>\n    </div>\n  );\n};\n\nexport default RadioButtonsGroup;\n"]},"metadata":{},"sourceType":"module"}