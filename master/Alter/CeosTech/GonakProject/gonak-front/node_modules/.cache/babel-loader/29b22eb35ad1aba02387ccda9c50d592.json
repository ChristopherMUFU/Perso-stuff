{"ast":null,"code":"import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useHistory}from\"react-router-dom\";import{useState,useEffect}from\"react\";import useForm from\"../../../hooks/useForm\";import{sendrequest}from\"../../../middlewares/request\";import ModalBootsrap from\"../modal/Modal\";import{TextField}from\"@material-ui/core\";import axios from\"axios\";import{URL}from\"../../../middlewares/request\";import UpdateFormCaisse from\"./UpdateFormCaisse.js\";import EditFormCaisse from\"./EditFormCaisse.js\";import\"./caisse.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Caisse=function Caisse(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),restaurantOwner=_useState6[0],setRestaurantOwner=_useState6[1];var token=window.$token_access;var email=window.$email_dirigeant;var fetchRestaurantOwner=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"test-get\");console.log(token);_context.next=4;return axios.get(\"https://markus-app.herokuapp.com/accounts/restaurantowner/?email=\"+email,//avoir username = email\n{headers:{Authorization:\"Bearer \".concat(token)}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(\"DEB\");console.log(data);setRestaurantOwner(data[0]);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchRestaurantOwner(){return _ref.apply(this,arguments);};}();var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};useEffect(function(){fetchRestaurantOwner();console.log(restaurantOwner);},[]);var RedirectionInfo=function RedirectionInfo(){var url=\"/admin/mon-compte/infos-personnelles\";history.push(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"caisse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"caisse-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\",onClick:RedirectionInfo}),/*#__PURE__*/_jsx(\"h1\",{children:\"La caisse de retraite\"})]}),restaurantOwner!==undefined?/*#__PURE__*/_jsx(EditFormCaisse,{}):/*#__PURE__*/_jsx(UpdateFormCaisse,{restaurantOwner:restaurantOwner})]});};export default Caisse;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/caisse/Caisse.js"],"names":["React","useHistory","useState","useEffect","useForm","sendrequest","ModalBootsrap","TextField","axios","URL","UpdateFormCaisse","EditFormCaisse","Caisse","history","show","setShow","success","setSuccess","restaurantOwner","setRestaurantOwner","token","window","$token_access","email","$email_dirigeant","fetchRestaurantOwner","console","log","get","headers","Authorization","data","handleClose","handleShow","RedirectionInfo","url","push","undefined"],"mappings":"ghBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,KAAkC,kBAAlC,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,OAASC,WAAT,KAA4B,8BAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,CACA,OAASC,SAAT,KAA0B,mBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,KAAoB,8BAApB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,uBAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,qBAA3B,CACA,MAAO,cAAP,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAEA,cAAwBC,QAAQ,CAAC,KAAD,CAAhC,wCAAOY,IAAP,eAAaC,OAAb,eACA,eAA8Bb,QAAQ,CAAC,KAAD,CAAtC,yCAAOc,OAAP,eAAgBC,UAAhB,eACA,eAA8Cf,QAAQ,CAAC,EAAD,CAAtD,yCAAOgB,eAAP,eAAwBC,kBAAxB,eAEA,GAAMC,CAAAA,KAAK,CAAGC,MAAM,CAACC,aAArB,CACA,GAAMC,CAAAA,KAAK,CAAGF,MAAM,CAACG,gBAArB,CAEA,GAAMC,CAAAA,oBAAoB,0FAAG,6JAC3BC,OAAO,CAACC,GAAR,CAAY,UAAZ,EACAD,OAAO,CAACC,GAAR,CAAYP,KAAZ,EAF2B,sBAGJZ,CAAAA,KAAK,CAACoB,GAAN,CACrB,oEACEL,KAFmB,CAEZ;AACT,CACEM,OAAO,CAAE,CACPC,aAAa,kBAAYV,KAAZ,CADN,CADX,CAHqB,CAHI,uCAGnBW,IAHmB,kBAGnBA,IAHmB,CAY3BL,OAAO,CAACC,GAAR,CAAY,KAAZ,EACAD,OAAO,CAACC,GAAR,CAAYI,IAAZ,EACAZ,kBAAkB,CAACY,IAAI,CAAC,CAAD,CAAL,CAAlB,CAd2B,sDAAH,kBAApBN,CAAAA,oBAAoB,0CAA1B,CAiBA,GAAMO,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMjB,CAAAA,OAAO,CAAC,KAAD,CAAb,EAApB,CACA,GAAMkB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAMlB,CAAAA,OAAO,CAAC,IAAD,CAAb,EAAnB,CAEAZ,SAAS,CAAC,UAAM,CACdsB,oBAAoB,GACpBC,OAAO,CAACC,GAAR,CAAYT,eAAZ,EACD,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMgB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAIC,CAAAA,GAAG,CAAG,sCAAV,CACAtB,OAAO,CAACuB,IAAR,CAAaD,GAAb,EACD,CAHD,CAIA,mBACE,aAAK,SAAS,CAAC,QAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,UAAG,SAAS,CAAC,mBAAb,CAAiC,OAAO,CAAED,eAA1C,EADF,cAEE,6CAFF,GADF,CAKGhB,eAAe,GAAKmB,SAApB,cACC,KAAC,cAAD,IADD,cAGC,KAAC,gBAAD,EAAkB,eAAe,CAAEnB,eAAnC,EARJ,GADF,CAaD,CApDD,CAqDA,cAAeN,CAAAA,MAAf","sourcesContent":["import React, { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { URL } from \"../../../middlewares/request\";\nimport UpdateFormCaisse from \"./UpdateFormCaisse.js\";\nimport EditFormCaisse from \"./EditFormCaisse.js\";\nimport \"./caisse.css\";\n\nconst Caisse = () => {\n  const history = useHistory();\n\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [restaurantOwner, setRestaurantOwner] = useState([]);\n\n  const token = window.$token_access;\n  const email = window.$email_dirigeant;\n\n  const fetchRestaurantOwner = async () => {\n    console.log(\"test-get\");\n    console.log(token);\n    const { data } = await axios.get(\n      \"https://markus-app.herokuapp.com/accounts/restaurantowner/?email=\" +\n        email, //avoir username = email\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    console.log(\"DEB\");\n    console.log(data);\n    setRestaurantOwner(data[0]);\n  };\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  useEffect(() => {\n    fetchRestaurantOwner();\n    console.log(restaurantOwner);\n  }, []);\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n  return (\n    <div className=\"caisse\">\n      <div className=\"caisse-header\">\n        <i className=\"fas fa-arrow-left\" onClick={RedirectionInfo}></i>\n        <h1>La caisse de retraite</h1>\n      </div>\n      {restaurantOwner !== undefined ? (\n        <EditFormCaisse />\n      ) : (\n        <UpdateFormCaisse restaurantOwner={restaurantOwner} />\n      )}\n    </div>\n  );\n};\nexport default Caisse;\n"]},"metadata":{},"sourceType":"module"}