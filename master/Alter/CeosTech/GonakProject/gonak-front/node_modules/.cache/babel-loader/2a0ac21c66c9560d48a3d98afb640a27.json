{"ast":null,"code":"import _objectSpread from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useHistory}from\"react-router-dom\";import{useState,useEffect}from\"react\";import useForm from\"../../../hooks/useForm\";import{sendrequest}from\"../../../middlewares/request\";import ModalBootsrap from\"../modal/Modal\";import{TextField}from\"@material-ui/core\";import\"./societe.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initial={nom:\"\",prenom:\"\",adresse_mail:\"\",num_tel:\"\",code_postal:\"\",ville:\"\",adresse:\"\",poste_occupe:\"\"};var EditFormSociete=function EditFormSociete(_ref){var restaurantOwner=_ref.restaurantOwner;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),initState=_useState6[0],setInitState=_useState6[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var estValide=function estValide(){var fieldValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state;var validator={};if(\"denomination\"in fieldValues)validator.denomination=state.denomination?null:\"Le champ nom est obligatore\";if(\"adresse_siege\"in fieldValues)validator.adresse_siege=state.adresse_siege?null:\"Le champ prénom est obligatore\";if(\"code_postal_siege\"in fieldValues)validator.code_postal_siege=/^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_siege)?null:\"Le code postal n'est pas valide\";if(\"ville_siege\"in fieldValues)validator.ville_siege=state.ville_siege?null:\"Le champ ville est obligatore\";if(\"SIRET_number\"in fieldValues)validator.SIRET_number=/^[0-9]{14}$/.test(SIRET_number)?null:\"Le numéro de SIRET n'est pas valide\";if(\"etablissement\"in fieldValues)validator.etablissement=state.etablissement?null:\"Le champ etablissement est obligatore\";if(\"adresse_etablissement\"in fieldValues)validator.adresse_etablissement=state.adresse_etablissement?null:\"Le champ adresse etablissement est obligatore\";if(\"code_postal_etablissement\"in fieldValues)validator.code_postal_etablissement=/^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_etablissement)?null:\"Le code postal n'est pas valide\";if(\"ville_etablissement\"in fieldValues)validator.ville_etablissement=state.ville_etablissement?null:\"Le champ ville etablissement est obligatore\";setErrors(_objectSpread({},validator));// retourne boolean si et seulement si on passe un parametre pour la fonction\nif(fieldValues===state){return Object.values(validator).every(function(el){return!el;});}};var _useForm=useForm(initial,estValide),state=_useForm.state,handleInputChange=_useForm.handleInputChange,errors=_useForm.errors,setErrors=_useForm.setErrors,reinitialiserState=_useForm.reinitialiserState;var denomination=state.denomination,adresse_siege=state.adresse_siege,code_postal_siege=state.code_postal_siege,ville_siege=state.ville_siege,SIRET_number=state.SIRET_number,etablissement=state.etablissement,adresse_etablissement=state.adresse_etablissement,ville_etablissement=state.ville_etablissement,code_postal_etablissement=state.code_postal_etablissement;var handleSubmit=function handleSubmit(e){e.preventDefault();sendrequest(\"post\",\"main/societe/\",null,null,state).then(function(response){if(response!==false&&estValide()){setSuccess(true);handleShow();}else{setSuccess(false);handleShow();}});reinitialiserState();if(estValide()){}};var RedirectionInfo=function RedirectionInfo(){var url=\"/admin/mon-compte/infos-personnelles\";history.push(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"societe_container\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"D\\xE9nomination social\",id:\"outlined-basic\",variant:\"outlined\",className:\"societe_input\",name:\"denomination\",value:denomination,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.denomination})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Adresse du si\\xE8ge social\",id:\"outlined-basic\",variant:\"outlined\",className:\"societe_input\",name:\"adresse_siege\",value:adresse_siege,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.adresse_siege})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_adresse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Code postal\",id:\"outlined-basic\",variant:\"outlined\",className:\"code_input\",name:\"code_postal_siege\",value:code_postal_siege,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.code_postal_siege})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ville\",id:\"outlined-basic\",variant:\"outlined\",className:\"ville_input\",name:\"ville_siege\",value:ville_siege,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.ville_siege})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"SIRET\",id:\"outlined-basic\",variant:\"outlined\",type:\"number\",className:\"societe_input\",name:\"SIRET_number\",value:SIRET_number,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.SIRET_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Etablissement (lieu de travail des salari\\xE9s)\",id:\"outlined-basic\",variant:\"outlined\",className:\"societe_input\",name:\"etablissement\",value:etablissement,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.etablissement})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Adresse de l\\xE9tablissement\",id:\"outlined-basic\",variant:\"outlined\",className:\"societe_input\",name:\"adresse_etablissement\",value:adresse_etablissement,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.adresse_etablissement})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_adresse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Code postal\",id:\"outlined-basic\",variant:\"outlined\",className:\"code_input\",name:\"code_postal_etablissement\",value:code_postal_etablissement,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.code_postal_etablissement})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"societe_label\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ville\",id:\"outlined-basic\",variant:\"outlined\",className:\"ville_input\",name:\"ville_etablissement\",value:ville_etablissement,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.code_postal_etablissement})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"societe_button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"registre_button\",type:\"submit\",children:\"Enregistrer\"})}),/*#__PURE__*/_jsx(ModalBootsrap,{handleClose:handleClose,show:show,title:/*#__PURE__*/_jsxs(_Fragment,{children:[success?\"Envoyé\":\"Oups\",/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(success?\" fas fa-thumbs-up\":\" fas fa-thumbs-down\"),style:{color:\"#4caf50\",marginLeft:\"1rem\"}})]}),children:success?\"Enregistrement avec succès.\":\"Une erreur s'est produite, veuillez réessayer.\"})]});};export default EditFormSociete;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/societe/EditFormSociete.js"],"names":["React","useHistory","useState","useEffect","useForm","sendrequest","ModalBootsrap","TextField","initial","nom","prenom","adresse_mail","num_tel","code_postal","ville","adresse","poste_occupe","EditFormSociete","restaurantOwner","history","show","setShow","success","setSuccess","initState","setInitState","handleClose","handleShow","estValide","fieldValues","state","validator","denomination","adresse_siege","code_postal_siege","test","ville_siege","SIRET_number","etablissement","adresse_etablissement","code_postal_etablissement","ville_etablissement","setErrors","Object","values","every","el","handleInputChange","errors","reinitialiserState","handleSubmit","e","preventDefault","then","response","RedirectionInfo","url","push","color","marginLeft"],"mappings":"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","sourcesContent":["import React, { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\n\nimport \"./societe.css\";\n\nconst initial = {\n  nom: \"\",\n  prenom: \"\",\n  adresse_mail: \"\",\n  num_tel: \"\",\n  code_postal: \"\",\n  ville: \"\",\n  adresse: \"\",\n  poste_occupe: \"\",\n};\n\nconst EditFormSociete = ({ restaurantOwner }) => {\n  const history = useHistory();\n\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [initState, setInitState] = useState([]);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n\n    if (\"denomination\" in fieldValues)\n      validator.denomination = state.denomination\n        ? null\n        : \"Le champ nom est obligatore\";\n\n    if (\"adresse_siege\" in fieldValues)\n      validator.adresse_siege = state.adresse_siege\n        ? null\n        : \"Le champ prénom est obligatore\";\n\n    if (\"code_postal_siege\" in fieldValues)\n      validator.code_postal_siege = /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(\n        code_postal_siege\n      )\n        ? null\n        : \"Le code postal n'est pas valide\";\n\n    if (\"ville_siege\" in fieldValues)\n      validator.ville_siege = state.ville_siege\n        ? null\n        : \"Le champ ville est obligatore\";\n\n    if (\"SIRET_number\" in fieldValues)\n      validator.SIRET_number = /^[0-9]{14}$/.test(SIRET_number)\n        ? null\n        : \"Le numéro de SIRET n'est pas valide\";\n\n    if (\"etablissement\" in fieldValues)\n      validator.etablissement = state.etablissement\n        ? null\n        : \"Le champ etablissement est obligatore\";\n\n    if (\"adresse_etablissement\" in fieldValues)\n      validator.adresse_etablissement = state.adresse_etablissement\n        ? null\n        : \"Le champ adresse etablissement est obligatore\";\n\n    if (\"code_postal_etablissement\" in fieldValues)\n      validator.code_postal_etablissement =\n        /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_etablissement)\n          ? null\n          : \"Le code postal n'est pas valide\";\n\n    if (\"ville_etablissement\" in fieldValues)\n      validator.ville_etablissement = state.ville_etablissement\n        ? null\n        : \"Le champ ville etablissement est obligatore\";\n\n    setErrors({ ...validator });\n\n    // retourne boolean si et seulement si on passe un parametre pour la fonction\n    if (fieldValues === state) {\n      return Object.values(validator).every((el) => !el);\n    }\n  };\n\n  const { state, handleInputChange, errors, setErrors, reinitialiserState } =\n    useForm(initial, estValide);\n\n  const {\n    denomination,\n    adresse_siege,\n    code_postal_siege,\n    ville_siege,\n    SIRET_number,\n    etablissement,\n    adresse_etablissement,\n    ville_etablissement,\n    code_postal_etablissement,\n  } = state;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    sendrequest(\"post\", \"main/societe/\", null, null, state).then((response) => {\n      if (response !== false && estValide()) {\n        setSuccess(true);\n        handleShow();\n      } else {\n        setSuccess(false);\n        handleShow();\n      }\n    });\n\n    reinitialiserState();\n    if (estValide()) {\n      \n    }\n  };\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n  return (\n    <div className=\"societe_container\" onSubmit={handleSubmit}>\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Dénomination social\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"denomination\"\n          value={denomination}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.denomination}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Adresse du siège social\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"adresse_siege\"\n          value={adresse_siege}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.adresse_siege}</div>\n      </div>\n\n      <div className=\"societe_adresse\">\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Code postal\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"code_input\"\n            name=\"code_postal_siege\"\n            value={code_postal_siege}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_siege}</div>\n        </div>\n\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Ville\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"ville_input\"\n            name=\"ville_siege\"\n            value={ville_siege}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.ville_siege}</div>\n        </div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"SIRET\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          type=\"number\"\n          className=\"societe_input\"\n          name=\"SIRET_number\"\n          value={SIRET_number}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.SIRET_number}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Etablissement (lieu de travail des salariés)\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"etablissement\"\n          value={etablissement}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.etablissement}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Adresse de létablissement\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"adresse_etablissement\"\n          value={adresse_etablissement}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.adresse_etablissement}</div>\n      </div>\n\n      <div className=\"societe_adresse\">\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Code postal\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"code_input\"\n            name=\"code_postal_etablissement\"\n            value={code_postal_etablissement}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_etablissement}</div>\n        </div>\n\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Ville\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"ville_input\"\n            name=\"ville_etablissement\"\n            value={ville_etablissement}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_etablissement}</div>\n        </div>\n      </div>\n\n      <div className=\"societe_button\">\n        <button className=\"registre_button\" type=\"submit\">\n          Enregistrer\n        </button>\n      </div>\n      <ModalBootsrap\n        handleClose={handleClose}\n        show={show}\n        title={\n          <>\n            {success ? \"Envoyé\" : \"Oups\"}\n            <i\n              className={`${\n                success ? \" fas fa-thumbs-up\" : \" fas fa-thumbs-down\"\n              }`}\n              style={{ color: \"#4caf50\", marginLeft: \"1rem\" }}\n            ></i>\n          </>\n        }\n      >\n        {success\n          ? \"Enregistrement avec succès.\"\n          : \"Une erreur s'est produite, veuillez réessayer.\"}\n      </ModalBootsrap>\n    </div>\n  );\n};\nexport default EditFormSociete;\n"]},"metadata":{},"sourceType":"module"}