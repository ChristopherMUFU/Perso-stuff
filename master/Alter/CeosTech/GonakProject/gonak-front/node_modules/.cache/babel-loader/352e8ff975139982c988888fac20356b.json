{"ast":null,"code":"import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useHistory}from\"react-router-dom\";import{useEffect,useState}from\"react\";import useForm from\"../../../hooks/useForm\";import{sendrequest,URL}from\"../../../middlewares/request\";import ModalBootsrap from\"../modal/Modal\";import{TextField}from\"@material-ui/core\";import\"./societe.css\";import axios from\"axios\";import UpdateFormSociete from\"./UpdateFormSociete\";import EditFormSociete from\"./EditFormSociete\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initial={denomination:\"\",adresse_siege:\"\",code_postal_siege:\"\",ville_siege:\"\",SIRET_number:\"\",etablissement:\"\",adresse_etablissement:\"\",code_postal_etablissement:\"\",ville_etablissement:\"\"};function Societe(){var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),societe=_useState6[0],setSociete=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),restaurantOwner=_useState8[0],setRestaurantOwner=_useState8[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var token=window.$token_access;var email=window.$email_dirigeant;var fetchRestaurantOwner=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"test-get\");console.log(token);_context.next=4;return axios.get(\"https://markus-app.herokuapp.com/accounts/restaurantowner/?email=\"+email,{headers:{Authorization:\"Bearer \".concat(token)}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(\"DEB\");console.log(data);setRestaurantOwner(data[0]);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchRestaurantOwner(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchRestaurantOwner();return function(){setRestaurantOwner([]);};},[]);var RedirectionInfo=function RedirectionInfo(){var url=\"/admin/mon-compte/infos-personnelles\";history.push(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"societe\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"societe-header\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\",onClick:RedirectionInfo}),/*#__PURE__*/_jsx(\"h1\",{children:\"La soci\\xE9t\\xE9\"})]}),restaurantOwner!==undefined?/*#__PURE__*/_jsx(EditFormSociete,{}):/*#__PURE__*/_jsx(UpdateFormSociete,{restaurantOwner:restaurantOwner})]});}export default Societe;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/societe/Societe.js"],"names":["React","useHistory","useEffect","useState","useForm","sendrequest","URL","ModalBootsrap","TextField","axios","UpdateFormSociete","EditFormSociete","initial","denomination","adresse_siege","code_postal_siege","ville_siege","SIRET_number","etablissement","adresse_etablissement","code_postal_etablissement","ville_etablissement","Societe","history","show","setShow","success","setSuccess","societe","setSociete","restaurantOwner","setRestaurantOwner","handleClose","handleShow","token","window","$token_access","email","$email_dirigeant","fetchRestaurantOwner","console","log","get","headers","Authorization","data","RedirectionInfo","url","push","undefined"],"mappings":"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","sourcesContent":["import React, { useHistory } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest, URL } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\n\nimport \"./societe.css\";\nimport axios from \"axios\";\n\nimport UpdateFormSociete from \"./UpdateFormSociete\";\nimport EditFormSociete from \"./EditFormSociete\";\nconst initial = {\n  denomination: \"\",\n  adresse_siege: \"\",\n  code_postal_siege: \"\",\n  ville_siege: \"\",\n  SIRET_number: \"\",\n  etablissement: \"\",\n  adresse_etablissement: \"\",\n  code_postal_etablissement: \"\",\n  ville_etablissement: \"\",\n};\nfunction Societe() {\n  const history = useHistory();\n\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [societe, setSociete] = useState([]);\n  const [restaurantOwner, setRestaurantOwner] = useState([]);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const token = window.$token_access;\n  const email = window.$email_dirigeant;\n\n  const fetchRestaurantOwner = async () => {\n    console.log(\"test-get\");\n    console.log(token);\n    const { data } = await axios.get(\n      \"https://markus-app.herokuapp.com/accounts/restaurantowner/?email=\" +\n        email,\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      }\n    );\n    console.log(\"DEB\");\n    console.log(data);\n    setRestaurantOwner(data[0]);\n  };\n\n  useEffect(() => {\n    fetchRestaurantOwner();\n    return () => {\n      setRestaurantOwner([]);\n    };\n  }, []);\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n\n  return (\n    <div className=\"societe\">\n      <div className=\"societe-header\">\n        <i className=\"fas fa-arrow-left\" onClick={RedirectionInfo}></i>\n        <h1>La société</h1>\n      </div>\n      {restaurantOwner !== undefined ? (\n        <EditFormSociete />\n      ) : (\n        <UpdateFormSociete restaurantOwner={restaurantOwner} />\n      )}\n    </div>\n  );\n}\nexport default Societe;\n"]},"metadata":{},"sourceType":"module"}