{"ast":null,"code":"import _defineProperty from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useState,useEffect}from\"react\";import{URL}from\"../../../../middlewares/request\";import{Button,IconButton,TextField}from\"@material-ui/core\";import{FormControlLabel,FormControl,RadioGroup,Radio,Checkbox,OutlinedInput}from\"@material-ui/core\";import FormGroup from\"@material-ui/core/FormGroup\";/*import \"./modal.css\";*/import Modal from\"../MyModal/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function(_ref){var categorieId=_ref.categorieId,show=_ref.show,setShow=_ref.setShow,_ref$productToUpdate=_ref.productToUpdate,productToUpdate=_ref$productToUpdate===void 0?null:_ref$productToUpdate;var initialProduct={nom:productToUpdate?productToUpdate.nom:\"\",prix:productToUpdate?productToUpdate.prix:\"\",image:productToUpdate?productToUpdate.image:null,description:productToUpdate?productToUpdate.description:\"\",categorie:categorieId,disponibilite:productToUpdate?productToUpdate.disponibilte:\"\"};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imageImported=_useState4[0],setImageImported=_useState4[1];useEffect(function(){setProduct(initialProduct);console.log(\"test\");console.log(productToUpdate);},[]);var handleClose=function handleClose(e){if(e.target.classList.contains(\"myModal__backdrop\")||e.target.classList.contains(\"myModal__modal__close-btn\")||e.target.parentNode.classList.contains(\"myModal__modal__close-btn\")||e.target.parentNode.parentNode.classList.contains(\"myModal__modal__close-btn\")){setShow(false);}};var addProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var form_data,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"form_data\",product);form_data=new FormData();form_data.append(\"nom\",product.nom);form_data.append(\"description\",product.description);if(product.image!==null)form_data.append(\"image\",product.image,product.image.name);form_data.append(\"prix\",product.prix);form_data.append(\"categorie\",product.categorie);form_data.append(\"dsponibilite\",product.disponibilite);console.log(\"from_data\",form_data);url=URL+\"gonak/produit/\";axios.post(url,form_data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){console.log(\"added susscessfully\");}).catch(function(error){console.error(error);});window.location.reload(false);case 13:case\"end\":return _context.stop();}}},_callee);}));return function addProduct(_x){return _ref2.apply(this,arguments);};}();var deleteProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(URL+\"gonak/produit/\"+productToUpdate.id+\"/\").then(function(){return console.log(\"deleted\");}).catch(function(error){return console.error(error);});case 2:window.location.reload(false);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteProduct(){return _ref3.apply(this,arguments);};}();var updateProduct=function updateProduct(e){e.preventDefault();console.log(\"form_data\",product);var form_data=new FormData();form_data.append(\"nom\",product.nom);form_data.append(\"description\",product.description);if(product.image!==null)form_data.append(\"image\",product.image,product.image.name);form_data.append(\"prix\",product.prix);form_data.append(\"categorie\",product.categorie);form_data.append(\"dsponibilite\",product.disponibilite);var url=URL+\"gonak/produit/\"+productToUpdate.id+\"/\";axios.put(url,form_data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){console.log(\"updated susscessfully\");}).catch(function(error){console.error(error);});window.location.reload(false);};var inputChange=function inputChange(e){setProduct(_objectSpread(_objectSpread({},product),{},_defineProperty({},e.target.name,e.target.value)));};var handleChange=function handleChange(e){setProduct(_objectSpread(_objectSpread({},product),{},_defineProperty({},e.target.name,e.target.checked)));};console.log(productToUpdate);return/*#__PURE__*/_jsxs(Modal,{showModal:show,setShowModal:setShow,handleClose:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{children:productToUpdate?/*#__PURE__*/_jsx(\"h1\",{children:\"Modifier un Produit\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"Ajouter un Produit\"})}),/*#__PURE__*/_jsx(Modal.Body.Heading,{style:{marginBottom:\"1.5rem\",marginTop:\"1.3rem\"},children:\"Informations du produit\"}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-nom\",label:\"nom\",variant:\"outlined\",name:\"nom\",size:\"small\",value:product.nom,onChange:inputChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-description\",label:\"description\",variant:\"outlined\",multiline:true,name:\"description\",size:\"small\",value:product.description,onChange:inputChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"image\",type:\"file\",variant:\"outlined\",size:\"small\",name:\"image\",onChange:function onChange(event){var fileUploaded=event.target.files[0];setProduct(_objectSpread(_objectSpread({},product),{},{image:fileUploaded}));setImageImported(true);}})})]}),/*#__PURE__*/_jsx(Modal.Body.Heading,{style:{marginBottom:\"1.5rem\",marginTop:\"1.3rem\"},children:\"Prix du produit\"}),/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-prix\",label:\"prix\",variant:\"outlined\",size:\"small\",name:\"prix\",value:product.prix,onChange:inputChange})})}),/*#__PURE__*/_jsx(Modal.Body.Heading,{style:{marginBottom:\"1.5rem\",marginTop:\"1.3rem\"},children:\"Disponibilit\\xE9 du produit\"}),/*#__PURE__*/_jsx(FormControl,{component:\"fieldset\",children:/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"div\",{className:\"sides-radioGroup\",children:/*#__PURE__*/_jsx(FormControlLabel,{value:product.nom,control:/*#__PURE__*/_jsx(Checkbox,{onChange:handleChange}),id:product.id,className:\"radio-choice__menu\"})},product.id)})})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:productToUpdate?/*#__PURE__*/_jsxs(\"div\",{style:{marginRight:\"15px\",width:\"100%\",display:\"flex\",justifyContent:\"space-between\",border:\"0.7px solid black\"},children:[/*#__PURE__*/_jsx(Button,{onClick:updateProduct,children:\"Modifier\"}),/*#__PURE__*/_jsx(Button,{onClick:deleteProduct,children:\"supprimer\"})]}):/*#__PURE__*/_jsx(Button,{onClick:addProduct,children:\" Ajouter \"})})]});};","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/MyModal/AddProductModal.js"],"names":["axios","useState","useEffect","URL","Button","IconButton","TextField","FormControlLabel","FormControl","RadioGroup","Radio","Checkbox","OutlinedInput","FormGroup","Modal","categorieId","show","setShow","productToUpdate","initialProduct","nom","prix","image","description","categorie","disponibilite","disponibilte","product","setProduct","imageImported","setImageImported","console","log","handleClose","e","target","classList","contains","parentNode","addProduct","preventDefault","form_data","FormData","append","name","url","post","headers","then","res","catch","error","window","location","reload","deleteProduct","delete","id","updateProduct","put","inputChange","value","handleChange","checked","marginBottom","marginTop","event","fileUploaded","files","marginRight","width","display","justifyContent","border"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { URL } from \"../../../../middlewares/request\"\nimport { Button, IconButton, TextField } from \"@material-ui/core\";\nimport {\n  FormControlLabel,\n  FormControl,\n  RadioGroup,\n  Radio,\n  Checkbox,\n  OutlinedInput,\n} from \"@material-ui/core\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\n/*import \"./modal.css\";*/\nimport Modal from \"../MyModal/Modal\";\n\nexport default function ({\n    categorieId,\n    show,\n    setShow,\n    productToUpdate = null\n}) {\n    const initialProduct = {\n        nom: productToUpdate ? productToUpdate.nom : \"\",\n        prix: productToUpdate ? productToUpdate.prix : \"\",\n        image: productToUpdate ? productToUpdate.image : null,\n        description: productToUpdate ? productToUpdate.description : \"\",\n        categorie: categorieId,\n        disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n    }\n    const [product, setProduct] = useState([])\n    const [imageImported, setImageImported] = useState(false);\n\n    useEffect(() => {\n      setProduct(initialProduct)\n      console.log(\"test\");\n      console.log(productToUpdate);\n    }, []);\n\n    const handleClose = (e) => {\n        if (\n            e.target.classList.contains(\"myModal__backdrop\") ||\n            e.target.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.parentNode.classList.contains(\n                \"myModal__modal__close-btn\"\n            )\n        ) {\n            \n            setShow(false);\n        }\n    };\n\n    const addProduct = async (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", product.categorie);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        console.log(`from_data`, form_data)\n        let url = URL + \"gonak/produit/\";\n        axios\n            .post(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`added susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        window.location.reload(false);\n    }\n\n    const deleteProduct = async () => {\n        await axios.delete(URL + \"gonak/produit/\" + productToUpdate.id + \"/\")\n          .then(() => console.log(`deleted`))\n          .catch(error => console.error(error));\n\n          window.location.reload(false);\n      }\n\n    const updateProduct = (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", product.categorie);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        let url = URL + \"gonak/produit/\" + productToUpdate.id + \"/\";\n        axios\n            .put(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`updated susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        \n        window.location.reload(false); \n    }\n    const inputChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.value })\n    }\n\n    const handleChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.checked })\n    }\n\n    console.log(productToUpdate);\n\n    return (\n        <Modal showModal={show} setShowModal={setShow} handleClose={handleClose}>\n            <Modal.Header>\n                {productToUpdate ?\n                    <h1>Modifier un Produit</h1>\n                    :\n                    <h1>Ajouter un Produit</h1>\n                }\n            </Modal.Header>\n            <Modal.Body.Heading\n                style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                Informations du produit\n            </Modal.Body.Heading>\n            <Modal.Body>\n            <FormControl >\n                <div className=\"basic-input\">\n                    <TextField\n                        id=\"input-nom\"\n                        label=\"nom\"\n                        variant=\"outlined\"\n                        name=\"nom\"\n                        size=\"small\"\n                        value={product.nom}\n                        onChange={inputChange}\n                    />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-description\"\n                    label=\"description\"\n                    variant=\"outlined\"\n                    multiline\n                    name=\"description\"\n                    size=\"small\"\n                    value={product.description}\n                    onChange={inputChange}\n\n                />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"image\"\n                    type=\"file\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"image\"\n                    onChange={(event) => {\n                        const fileUploaded = event.target.files[0]\n                        setProduct({ ...product, image: fileUploaded });\n                        setImageImported(true);\n                    }\n                    }\n                />\n                </div>\n                </FormControl >\n                <Modal.Body.Heading\n                    style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                    Prix du produit\n                </Modal.Body.Heading>\n                <FormControl >\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-prix\"\n                    label=\"prix\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"prix\"\n                    value={product.prix}\n                    onChange={inputChange}\n\n                />\n                </div>\n                </FormControl >\n                \n                <Modal.Body.Heading\n                    style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                    Disponibilit√© du produit\n                </Modal.Body.Heading>\n                <FormControl component=\"fieldset\">\n                    <FormGroup>\n           \n                        <div className=\"sides-radioGroup\" key={product.id}>\n                          <FormControlLabel\n                            value={product.nom}\n                            control={<Checkbox onChange={handleChange} />}\n                            id={product.id}\n                            className=\"radio-choice__menu\"\n                            \n                          />\n                          {/*<span>{product.nom}</span>*/}\n                        </div>\n                      \n        \n                    </FormGroup>\n                </FormControl>\n                \n\n            </Modal.Body>\n            <Modal.Footer>\n                {productToUpdate ?\n                    <div\n                      style={{\n                        marginRight: \"15px\",\n                        width: \"100%\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        border: \"0.7px solid black\",\n\n                      }}>\n                        <Button onClick={updateProduct}>Modifier</Button>\n                        <Button onClick={deleteProduct}>supprimer</Button>\n                    </div>\n                    :\n                    <Button onClick={addProduct}> Ajouter </Button>\n                }\n            </Modal.Footer>\n        </Modal>\n    );\n};\n\n\n\n"]},"metadata":{},"sourceType":"module"}