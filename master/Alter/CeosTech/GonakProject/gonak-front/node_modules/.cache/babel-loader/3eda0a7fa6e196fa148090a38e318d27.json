{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/societe/EditFormSociete.js\",\n    _s = $RefreshSig$();\n\nimport React, { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\nimport \"./societe.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initial = {\n  nom: \"\",\n  prenom: \"\",\n  adresse_mail: \"\",\n  num_tel: \"\",\n  code_postal: \"\",\n  ville: \"\",\n  adresse: \"\",\n  poste_occupe: \"\"\n};\n\nconst EditFormSociete = ({\n  restaurantOwner\n}) => {\n  _s();\n\n  const history = useHistory();\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [initState, setInitState] = useState([]);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n    if (\"denomination\" in fieldValues) validator.denomination = state.denomination ? null : \"Le champ nom est obligatore\";\n    if (\"adresse_siege\" in fieldValues) validator.adresse_siege = state.adresse_siege ? null : \"Le champ prénom est obligatore\";\n    if (\"code_postal_siege\" in fieldValues) validator.code_postal_siege = /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_siege) ? null : \"Le code postal n'est pas valide\";\n    if (\"ville_siege\" in fieldValues) validator.ville_siege = state.ville_siege ? null : \"Le champ ville est obligatore\";\n    if (\"SIRET_number\" in fieldValues) validator.SIRET_number = /^[0-9]{14}$/.test(SIRET_number) ? null : \"Le numéro de SIRET n'est pas valide\";\n    if (\"etablissement\" in fieldValues) validator.etablissement = state.etablissement ? null : \"Le champ etablissement est obligatore\";\n    if (\"adresse_etablissement\" in fieldValues) validator.adresse_etablissement = state.adresse_etablissement ? null : \"Le champ adresse etablissement est obligatore\";\n    if (\"code_postal_etablissement\" in fieldValues) validator.code_postal_etablissement = /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_etablissement) ? null : \"Le code postal n'est pas valide\";\n    if (\"ville_etablissement\" in fieldValues) validator.ville_etablissement = state.ville_etablissement ? null : \"Le champ ville etablissement est obligatore\";\n    setErrors({ ...validator\n    }); // retourne boolean si et seulement si on passe un parametre pour la fonction\n\n    if (fieldValues === state) {\n      return Object.values(validator).every(el => !el);\n    }\n  };\n\n  const {\n    state,\n    handleInputChange,\n    errors,\n    setErrors,\n    reinitialiserState\n  } = useForm(initial, estValide);\n  const {\n    denomination,\n    adresse_siege,\n    code_postal_siege,\n    ville_siege,\n    SIRET_number,\n    etablissement,\n    adresse_etablissement,\n    ville_etablissement,\n    code_postal_etablissement\n  } = state;\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    sendrequest(\"post\", \"main/societe/\", null, null, state).then(response => {\n      if (response !== false && estValide()) {\n        setSuccess(true);\n        handleShow();\n      } else {\n        setSuccess(false);\n        handleShow();\n      }\n    });\n    reinitialiserState();\n\n    if (estValide()) {}\n  };\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"societe_container\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_label\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"D\\xE9nomination social\",\n        id: \"outlined-basic\",\n        variant: \"outlined\",\n        className: \"societe_input\",\n        name: \"denomination\",\n        value: denomination,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: errors.denomination\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_label\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Adresse du si\\xE8ge social\",\n        id: \"outlined-basic\",\n        variant: \"outlined\",\n        className: \"societe_input\",\n        name: \"adresse_siege\",\n        value: adresse_siege,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: errors.adresse_siege\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_adresse\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"societe_label\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Code postal\",\n          id: \"outlined-basic\",\n          variant: \"outlined\",\n          className: \"code_input\",\n          name: \"code_postal_siege\",\n          value: code_postal_siege,\n          onChange: handleInputChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: errors.code_postal_siege\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"societe_label\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Ville\",\n          id: \"outlined-basic\",\n          variant: \"outlined\",\n          className: \"ville_input\",\n          name: \"ville_siege\",\n          value: ville_siege,\n          onChange: handleInputChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: errors.ville_siege\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_label\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"SIRET\",\n        id: \"outlined-basic\",\n        variant: \"outlined\",\n        type: \"number\",\n        className: \"societe_input\",\n        name: \"SIRET_number\",\n        value: SIRET_number,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: errors.SIRET_number\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_label\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Etablissement (lieu de travail des salari\\xE9s)\",\n        id: \"outlined-basic\",\n        variant: \"outlined\",\n        className: \"societe_input\",\n        name: \"etablissement\",\n        value: etablissement,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: errors.etablissement\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_label\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Adresse de l\\xE9tablissement\",\n        id: \"outlined-basic\",\n        variant: \"outlined\",\n        className: \"societe_input\",\n        name: \"adresse_etablissement\",\n        value: adresse_etablissement,\n        onChange: handleInputChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"errors\",\n        children: errors.adresse_etablissement\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_adresse\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"societe_label\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Code postal\",\n          id: \"outlined-basic\",\n          variant: \"outlined\",\n          className: \"code_input\",\n          name: \"code_postal_etablissement\",\n          value: code_postal_etablissement,\n          onChange: handleInputChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: errors.code_postal_etablissement\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"societe_label\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Ville\",\n          id: \"outlined-basic\",\n          variant: \"outlined\",\n          className: \"ville_input\",\n          name: \"ville_etablissement\",\n          value: ville_etablissement,\n          onChange: handleInputChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"errors\",\n          children: errors.code_postal_etablissement\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"societe_button\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"registre_button\",\n        type: \"submit\",\n        children: \"Enregistrer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalBootsrap, {\n      handleClose: handleClose,\n      show: show,\n      title: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [success ? \"Envoyé\" : \"Oups\", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: `${success ? \" fas fa-thumbs-up\" : \" fas fa-thumbs-down\"}`,\n          style: {\n            color: \"#4caf50\",\n            marginLeft: \"1rem\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true),\n      children: success ? \"Enregistrement avec succès.\" : \"Une erreur s'est produite, veuillez réessayer.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditFormSociete, \"XNW1M5UNmfkIaALR59y3Zr9H6TA=\", false, function () {\n  return [useHistory, useForm];\n});\n\n_c = EditFormSociete;\nexport default EditFormSociete;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditFormSociete\");","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/societe/EditFormSociete.js"],"names":["React","useHistory","useState","useEffect","useForm","sendrequest","ModalBootsrap","TextField","initial","nom","prenom","adresse_mail","num_tel","code_postal","ville","adresse","poste_occupe","EditFormSociete","restaurantOwner","history","show","setShow","success","setSuccess","initState","setInitState","handleClose","handleShow","estValide","fieldValues","state","validator","denomination","adresse_siege","code_postal_siege","test","ville_siege","SIRET_number","etablissement","adresse_etablissement","code_postal_etablissement","ville_etablissement","setErrors","Object","values","every","el","handleInputChange","errors","reinitialiserState","handleSubmit","e","preventDefault","then","response","RedirectionInfo","url","push","color","marginLeft"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,kBAAlC;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,SAAT,QAA0B,mBAA1B;AAEA,OAAO,eAAP;;;AAEA,MAAMC,OAAO,GAAG;AACdC,EAAAA,GAAG,EAAE,EADS;AAEdC,EAAAA,MAAM,EAAE,EAFM;AAGdC,EAAAA,YAAY,EAAE,EAHA;AAIdC,EAAAA,OAAO,EAAE,EAJK;AAKdC,EAAAA,WAAW,EAAE,EALC;AAMdC,EAAAA,KAAK,EAAE,EANO;AAOdC,EAAAA,OAAO,EAAE,EAPK;AAQdC,EAAAA,YAAY,EAAE;AARA,CAAhB;;AAWA,MAAMC,eAAe,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAyB;AAAA;;AAC/C,QAAMC,OAAO,GAAGlB,UAAU,EAA1B;AAEA,QAAM,CAACmB,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACoB,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACsB,SAAD,EAAYC,YAAZ,IAA4BvB,QAAQ,CAAC,EAAD,CAA1C;;AACA,QAAMwB,WAAW,GAAG,MAAML,OAAO,CAAC,KAAD,CAAjC;;AACA,QAAMM,UAAU,GAAG,MAAMN,OAAO,CAAC,IAAD,CAAhC;;AAEA,QAAMO,SAAS,GAAG,CAACC,WAAW,GAAGC,KAAf,KAAyB;AACzC,UAAMC,SAAS,GAAG,EAAlB;AAEA,QAAI,kBAAkBF,WAAtB,EACEE,SAAS,CAACC,YAAV,GAAyBF,KAAK,CAACE,YAAN,GACrB,IADqB,GAErB,6BAFJ;AAIF,QAAI,mBAAmBH,WAAvB,EACEE,SAAS,CAACE,aAAV,GAA0BH,KAAK,CAACG,aAAN,GACtB,IADsB,GAEtB,gCAFJ;AAIF,QAAI,uBAAuBJ,WAA3B,EACEE,SAAS,CAACG,iBAAV,GAA8B,oCAAoCC,IAApC,CAC5BD,iBAD4B,IAG1B,IAH0B,GAI1B,iCAJJ;AAMF,QAAI,iBAAiBL,WAArB,EACEE,SAAS,CAACK,WAAV,GAAwBN,KAAK,CAACM,WAAN,GACpB,IADoB,GAEpB,+BAFJ;AAIF,QAAI,kBAAkBP,WAAtB,EACEE,SAAS,CAACM,YAAV,GAAyB,cAAcF,IAAd,CAAmBE,YAAnB,IACrB,IADqB,GAErB,qCAFJ;AAIF,QAAI,mBAAmBR,WAAvB,EACEE,SAAS,CAACO,aAAV,GAA0BR,KAAK,CAACQ,aAAN,GACtB,IADsB,GAEtB,uCAFJ;AAIF,QAAI,2BAA2BT,WAA/B,EACEE,SAAS,CAACQ,qBAAV,GAAkCT,KAAK,CAACS,qBAAN,GAC9B,IAD8B,GAE9B,+CAFJ;AAIF,QAAI,+BAA+BV,WAAnC,EACEE,SAAS,CAACS,yBAAV,GACE,oCAAoCL,IAApC,CAAyCK,yBAAzC,IACI,IADJ,GAEI,iCAHN;AAKF,QAAI,yBAAyBX,WAA7B,EACEE,SAAS,CAACU,mBAAV,GAAgCX,KAAK,CAACW,mBAAN,GAC5B,IAD4B,GAE5B,6CAFJ;AAIFC,IAAAA,SAAS,CAAC,EAAE,GAAGX;AAAL,KAAD,CAAT,CAnDyC,CAqDzC;;AACA,QAAIF,WAAW,KAAKC,KAApB,EAA2B;AACzB,aAAOa,MAAM,CAACC,MAAP,CAAcb,SAAd,EAAyBc,KAAzB,CAAgCC,EAAD,IAAQ,CAACA,EAAxC,CAAP;AACD;AACF,GAzDD;;AA2DA,QAAM;AAAEhB,IAAAA,KAAF;AAASiB,IAAAA,iBAAT;AAA4BC,IAAAA,MAA5B;AAAoCN,IAAAA,SAApC;AAA+CO,IAAAA;AAA/C,MACJ7C,OAAO,CAACI,OAAD,EAAUoB,SAAV,CADT;AAGA,QAAM;AACJI,IAAAA,YADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,iBAHI;AAIJE,IAAAA,WAJI;AAKJC,IAAAA,YALI;AAMJC,IAAAA,aANI;AAOJC,IAAAA,qBAPI;AAQJE,IAAAA,mBARI;AASJD,IAAAA;AATI,MAUFV,KAVJ;;AAYA,QAAMoB,YAAY,GAAIC,CAAD,IAAO;AAC1BA,IAAAA,CAAC,CAACC,cAAF;AAEA/C,IAAAA,WAAW,CAAC,MAAD,EAAS,eAAT,EAA0B,IAA1B,EAAgC,IAAhC,EAAsCyB,KAAtC,CAAX,CAAwDuB,IAAxD,CAA8DC,QAAD,IAAc;AACzE,UAAIA,QAAQ,KAAK,KAAb,IAAsB1B,SAAS,EAAnC,EAAuC;AACrCL,QAAAA,UAAU,CAAC,IAAD,CAAV;AACAI,QAAAA,UAAU;AACX,OAHD,MAGO;AACLJ,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAI,QAAAA,UAAU;AACX;AACF,KARD;AAUAsB,IAAAA,kBAAkB;;AAClB,QAAIrB,SAAS,EAAb,EAAiB,CAEhB;AACF,GAjBD;;AAmBA,QAAM2B,eAAe,GAAG,MAAM;AAC5B,QAAIC,GAAG,GAAG,sCAAV;AACArC,IAAAA,OAAO,CAACsC,IAAR,CAAaD,GAAb;AACD,GAHD;;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAmC,IAAA,QAAQ,EAAEN,YAA7C;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,KAAK,EAAC,wBAFR;AAGE,QAAA,EAAE,EAAC,gBAHL;AAIE,QAAA,OAAO,EAAC,UAJV;AAKE,QAAA,SAAS,EAAC,eALZ;AAME,QAAA,IAAI,EAAC,cANP;AAOE,QAAA,KAAK,EAAElB,YAPT;AAQE,QAAA,QAAQ,EAAEe,iBARZ;AASE,QAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,cADF,eAYE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBC,MAAM,CAAChB;AAAhC;AAAA;AAAA;AAAA;AAAA,cAZF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAgBE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,KAAK,EAAC,4BAFR;AAGE,QAAA,EAAE,EAAC,gBAHL;AAIE,QAAA,OAAO,EAAC,UAJV;AAKE,QAAA,SAAS,EAAC,eALZ;AAME,QAAA,IAAI,EAAC,eANP;AAOE,QAAA,KAAK,EAAEC,aAPT;AAQE,QAAA,QAAQ,EAAEc,iBARZ;AASE,QAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,cADF,eAYE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBC,MAAM,CAACf;AAAhC;AAAA;AAAA;AAAA;AAAA,cAZF;AAAA;AAAA;AAAA;AAAA;AAAA,YAhBF,eA+BE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE,QAAC,SAAD;AACE,UAAA,SAAS,MADX;AAEE,UAAA,KAAK,EAAC,aAFR;AAGE,UAAA,EAAE,EAAC,gBAHL;AAIE,UAAA,OAAO,EAAC,UAJV;AAKE,UAAA,SAAS,EAAC,YALZ;AAME,UAAA,IAAI,EAAC,mBANP;AAOE,UAAA,KAAK,EAAEC,iBAPT;AAQE,UAAA,QAAQ,EAAEa,iBARZ;AASE,UAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,gBADF,eAYE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,oBAAyBC,MAAM,CAACd;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAgBE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE,QAAC,SAAD;AACE,UAAA,SAAS,MADX;AAEE,UAAA,KAAK,EAAC,OAFR;AAGE,UAAA,EAAE,EAAC,gBAHL;AAIE,UAAA,OAAO,EAAC,UAJV;AAKE,UAAA,SAAS,EAAC,aALZ;AAME,UAAA,IAAI,EAAC,aANP;AAOE,UAAA,KAAK,EAAEE,WAPT;AAQE,UAAA,QAAQ,EAAEW,iBARZ;AASE,UAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,gBADF,eAYE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,oBAAyBC,MAAM,CAACZ;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,YA/BF,eA+DE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,KAAK,EAAC,OAFR;AAGE,QAAA,EAAE,EAAC,gBAHL;AAIE,QAAA,OAAO,EAAC,UAJV;AAKE,QAAA,IAAI,EAAC,QALP;AAME,QAAA,SAAS,EAAC,eANZ;AAOE,QAAA,IAAI,EAAC,cAPP;AAQE,QAAA,KAAK,EAAEC,YART;AASE,QAAA,QAAQ,EAAEU,iBATZ;AAUE,QAAA,QAAQ;AAVV;AAAA;AAAA;AAAA;AAAA,cADF,eAaE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBC,MAAM,CAACX;AAAhC;AAAA;AAAA;AAAA;AAAA,cAbF;AAAA;AAAA;AAAA;AAAA;AAAA,YA/DF,eA+EE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,KAAK,EAAC,iDAFR;AAGE,QAAA,EAAE,EAAC,gBAHL;AAIE,QAAA,OAAO,EAAC,UAJV;AAKE,QAAA,SAAS,EAAC,eALZ;AAME,QAAA,IAAI,EAAC,eANP;AAOE,QAAA,KAAK,EAAEC,aAPT;AAQE,QAAA,QAAQ,EAAES,iBARZ;AASE,QAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,cADF,eAYE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBC,MAAM,CAACV;AAAhC;AAAA;AAAA;AAAA;AAAA,cAZF;AAAA;AAAA;AAAA;AAAA;AAAA,YA/EF,eA8FE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE,QAAC,SAAD;AACE,QAAA,SAAS,MADX;AAEE,QAAA,KAAK,EAAC,8BAFR;AAGE,QAAA,EAAE,EAAC,gBAHL;AAIE,QAAA,OAAO,EAAC,UAJV;AAKE,QAAA,SAAS,EAAC,eALZ;AAME,QAAA,IAAI,EAAC,uBANP;AAOE,QAAA,KAAK,EAAEC,qBAPT;AAQE,QAAA,QAAQ,EAAEQ,iBARZ;AASE,QAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,cADF,eAYE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBC,MAAM,CAACT;AAAhC;AAAA;AAAA;AAAA;AAAA,cAZF;AAAA;AAAA;AAAA;AAAA;AAAA,YA9FF,eA6GE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE,QAAC,SAAD;AACE,UAAA,SAAS,MADX;AAEE,UAAA,KAAK,EAAC,aAFR;AAGE,UAAA,EAAE,EAAC,gBAHL;AAIE,UAAA,OAAO,EAAC,UAJV;AAKE,UAAA,SAAS,EAAC,YALZ;AAME,UAAA,IAAI,EAAC,2BANP;AAOE,UAAA,KAAK,EAAEC,yBAPT;AAQE,UAAA,QAAQ,EAAEO,iBARZ;AASE,UAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,gBADF,eAYE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,oBAAyBC,MAAM,CAACR;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAgBE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE,QAAC,SAAD;AACE,UAAA,SAAS,MADX;AAEE,UAAA,KAAK,EAAC,OAFR;AAGE,UAAA,EAAE,EAAC,gBAHL;AAIE,UAAA,OAAO,EAAC,UAJV;AAKE,UAAA,SAAS,EAAC,aALZ;AAME,UAAA,IAAI,EAAC,qBANP;AAOE,UAAA,KAAK,EAAEC,mBAPT;AAQE,UAAA,QAAQ,EAAEM,iBARZ;AASE,UAAA,QAAQ;AATV;AAAA;AAAA;AAAA;AAAA,gBADF,eAYE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,oBAAyBC,MAAM,CAACR;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,YA7GF,eA6IE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,6BACE;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AAAoC,QAAA,IAAI,EAAC,QAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA7IF,eAkJE,QAAC,aAAD;AACE,MAAA,WAAW,EAAEd,WADf;AAEE,MAAA,IAAI,EAAEN,IAFR;AAGE,MAAA,KAAK,eACH;AAAA,mBACGE,OAAO,GAAG,QAAH,GAAc,MADxB,eAEE;AACE,UAAA,SAAS,EAAG,GACVA,OAAO,GAAG,mBAAH,GAAyB,qBACjC,EAHH;AAIE,UAAA,KAAK,EAAE;AAAEoC,YAAAA,KAAK,EAAE,SAAT;AAAoBC,YAAAA,UAAU,EAAE;AAAhC;AAJT;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA,sBAJJ;AAAA,gBAeGrC,OAAO,GACJ,6BADI,GAEJ;AAjBN;AAAA;AAAA;AAAA;AAAA,YAlJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwKD,CAlRD;;GAAML,e;UACYhB,U,EAoEdG,O;;;KArEEa,e;AAmRN,eAAeA,eAAf","sourcesContent":["import React, { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\n\nimport \"./societe.css\";\n\nconst initial = {\n  nom: \"\",\n  prenom: \"\",\n  adresse_mail: \"\",\n  num_tel: \"\",\n  code_postal: \"\",\n  ville: \"\",\n  adresse: \"\",\n  poste_occupe: \"\",\n};\n\nconst EditFormSociete = ({ restaurantOwner }) => {\n  const history = useHistory();\n\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [initState, setInitState] = useState([]);\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n\n    if (\"denomination\" in fieldValues)\n      validator.denomination = state.denomination\n        ? null\n        : \"Le champ nom est obligatore\";\n\n    if (\"adresse_siege\" in fieldValues)\n      validator.adresse_siege = state.adresse_siege\n        ? null\n        : \"Le champ prénom est obligatore\";\n\n    if (\"code_postal_siege\" in fieldValues)\n      validator.code_postal_siege = /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(\n        code_postal_siege\n      )\n        ? null\n        : \"Le code postal n'est pas valide\";\n\n    if (\"ville_siege\" in fieldValues)\n      validator.ville_siege = state.ville_siege\n        ? null\n        : \"Le champ ville est obligatore\";\n\n    if (\"SIRET_number\" in fieldValues)\n      validator.SIRET_number = /^[0-9]{14}$/.test(SIRET_number)\n        ? null\n        : \"Le numéro de SIRET n'est pas valide\";\n\n    if (\"etablissement\" in fieldValues)\n      validator.etablissement = state.etablissement\n        ? null\n        : \"Le champ etablissement est obligatore\";\n\n    if (\"adresse_etablissement\" in fieldValues)\n      validator.adresse_etablissement = state.adresse_etablissement\n        ? null\n        : \"Le champ adresse etablissement est obligatore\";\n\n    if (\"code_postal_etablissement\" in fieldValues)\n      validator.code_postal_etablissement =\n        /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal_etablissement)\n          ? null\n          : \"Le code postal n'est pas valide\";\n\n    if (\"ville_etablissement\" in fieldValues)\n      validator.ville_etablissement = state.ville_etablissement\n        ? null\n        : \"Le champ ville etablissement est obligatore\";\n\n    setErrors({ ...validator });\n\n    // retourne boolean si et seulement si on passe un parametre pour la fonction\n    if (fieldValues === state) {\n      return Object.values(validator).every((el) => !el);\n    }\n  };\n\n  const { state, handleInputChange, errors, setErrors, reinitialiserState } =\n    useForm(initial, estValide);\n\n  const {\n    denomination,\n    adresse_siege,\n    code_postal_siege,\n    ville_siege,\n    SIRET_number,\n    etablissement,\n    adresse_etablissement,\n    ville_etablissement,\n    code_postal_etablissement,\n  } = state;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    sendrequest(\"post\", \"main/societe/\", null, null, state).then((response) => {\n      if (response !== false && estValide()) {\n        setSuccess(true);\n        handleShow();\n      } else {\n        setSuccess(false);\n        handleShow();\n      }\n    });\n\n    reinitialiserState();\n    if (estValide()) {\n      \n    }\n  };\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n  return (\n    <div className=\"societe_container\" onSubmit={handleSubmit}>\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Dénomination social\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"denomination\"\n          value={denomination}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.denomination}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Adresse du siège social\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"adresse_siege\"\n          value={adresse_siege}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.adresse_siege}</div>\n      </div>\n\n      <div className=\"societe_adresse\">\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Code postal\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"code_input\"\n            name=\"code_postal_siege\"\n            value={code_postal_siege}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_siege}</div>\n        </div>\n\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Ville\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"ville_input\"\n            name=\"ville_siege\"\n            value={ville_siege}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.ville_siege}</div>\n        </div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"SIRET\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          type=\"number\"\n          className=\"societe_input\"\n          name=\"SIRET_number\"\n          value={SIRET_number}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.SIRET_number}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Etablissement (lieu de travail des salariés)\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"etablissement\"\n          value={etablissement}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.etablissement}</div>\n      </div>\n\n      <div className=\"societe_label\">\n        <TextField\n          fullWidth\n          label=\"Adresse de létablissement\"\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          className=\"societe_input\"\n          name=\"adresse_etablissement\"\n          value={adresse_etablissement}\n          onChange={handleInputChange}\n          required\n        />\n        <div className=\"errors\">{errors.adresse_etablissement}</div>\n      </div>\n\n      <div className=\"societe_adresse\">\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Code postal\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"code_input\"\n            name=\"code_postal_etablissement\"\n            value={code_postal_etablissement}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_etablissement}</div>\n        </div>\n\n        <div className=\"societe_label\">\n          <TextField\n            fullWidth\n            label=\"Ville\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            className=\"ville_input\"\n            name=\"ville_etablissement\"\n            value={ville_etablissement}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.code_postal_etablissement}</div>\n        </div>\n      </div>\n\n      <div className=\"societe_button\">\n        <button className=\"registre_button\" type=\"submit\">\n          Enregistrer\n        </button>\n      </div>\n      <ModalBootsrap\n        handleClose={handleClose}\n        show={show}\n        title={\n          <>\n            {success ? \"Envoyé\" : \"Oups\"}\n            <i\n              className={`${\n                success ? \" fas fa-thumbs-up\" : \" fas fa-thumbs-down\"\n              }`}\n              style={{ color: \"#4caf50\", marginLeft: \"1rem\" }}\n            ></i>\n          </>\n        }\n      >\n        {success\n          ? \"Enregistrement avec succès.\"\n          : \"Une erreur s'est produite, veuillez réessayer.\"}\n      </ModalBootsrap>\n    </div>\n  );\n};\nexport default EditFormSociete;\n"]},"metadata":{},"sourceType":"module"}