{"ast":null,"code":"import _defineProperty from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useState,useEffect}from\"react\";import{URL}from\"../../../../middlewares/request\";import{Button,IconButton,TextField}from\"@material-ui/core\";import{FormControlLabel,FormControl,RadioGroup,Radio,Checkbox,OutlinedInput}from\"@material-ui/core\";import FormGroup from\"@material-ui/core/FormGroup\";/*import \"./modal.css\";*/import Modal from\"../MyModal/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function(_ref){var categorieId=_ref.categorieId,show=_ref.show,setShow=_ref.setShow,_ref$productToUpdate=_ref.productToUpdate,productToUpdate=_ref$productToUpdate===void 0?null:_ref$productToUpdate,id=_ref.id,nom=_ref.nom,description=_ref.description,prix=_ref.prix,prix_gourmande=_ref.prix_gourmande,prix_intense=_ref.prix_intense,pieces_x5=_ref.pieces_x5,pieces_x10=_ref.pieces_x10,sans_accompagnement=_ref.sans_accompagnement,accompagnements_x2=_ref.accompagnements_x2,moyen=_ref.moyen,grand=_ref.grand,image=_ref.image,categorie=_ref.categorie,disponibilite=_ref.disponibilite;var initialProduct=function initialProduct(){return{nom:nom?nom:\"\",prix:prix?prix:0,prix_gourmande:prix_gourmande?prix_gourmande:0,prix_intense:prix_intense?prix_intense:0,pieces_x5:pieces_x5?pieces_x5:0,pieces_x10:pieces_x10?pieces_x10:0,sans_accompagnement:sans_accompagnement?sans_accompagnement:0,accompagnements_x2:accompagnements_x2?sans_accompagnement:0,moyen:moyen?moyen:0,grand:grand?grand:0,image:image?image:null,description:description?description:\"\",categorie:categorieId//disponibilite: disponibilte ? disponibilte : \"\"\n};};var _useState=useState(initialProduct()),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),imageImported=_useState4[0],setImageImported=_useState4[1];console.log(\"TEST2\");console.log(product);useEffect(function(){setProduct(initialProduct());},[productToUpdate]);var handleClose=function handleClose(e){if(e.target.classList.contains(\"myModal__backdrop\")||e.target.classList.contains(\"myModal__modal__close-btn\")||e.target.parentNode.classList.contains(\"myModal__modal__close-btn\")||e.target.parentNode.parentNode.classList.contains(\"myModal__modal__close-btn\")){setShow(false);}};var addProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var form_data,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(\"form_data\",product);form_data=new FormData();form_data.append(\"nom\",product.nom);form_data.append(\"description\",product.description);/*if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);*/form_data.append(\"prix\",product.prix);form_data.append(\"categorie\",categorieId);form_data.append(\"dsponibilite\",product.disponibilite);console.log(\"from_data\",form_data);url=URL+\"gonak/produit/\";axios.post(url,form_data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){console.log(\"added susscessfully\");}).catch(function(error){console.error(error);});window.location.reload(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function addProduct(_x){return _ref2.apply(this,arguments);};}();var deleteProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(URL+\"gonak/produit/\"+id+\"/\").then(function(){return console.log(\"deleted\");}).catch(function(error){return console.error(error);});case 2:window.location.reload(false);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function deleteProduct(){return _ref3.apply(this,arguments);};}();var updateProduct=function updateProduct(e){e.preventDefault();console.log(\"form_data\",product);var form_data=new FormData();form_data.append(\"nom\",product.nom);form_data.append(\"description\",product.description);if(product.image!==null)form_data.append(\"image\",product.image,product.image.name);form_data.append(\"prix\",product.prix);form_data.append(\"categorie\",product.categorie);form_data.append(\"dsponibilite\",product.disponibilite);var url=URL+\"gonak/produit/\"+id+\"/\";axios.put(url,form_data,{headers:{\"content-type\":\"multipart/form-data\"}}).then(function(res){console.log(\"updated susscessfully\");}).catch(function(error){console.error(error);});window.location.reload(false);};var inputChange=function inputChange(e){setProduct(_objectSpread(_objectSpread({},product),{},_defineProperty({},e.target.name,e.target.value)));};var handleChange=function handleChange(e){setProduct(_objectSpread(_objectSpread({},product),{},_defineProperty({},e.target.name,e.target.checked)));};console.log(\"TEST3\");console.log(product);return/*#__PURE__*/_jsxs(Modal,{showModal:show,setShowModal:setShow,handleClose:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{children:productToUpdate?/*#__PURE__*/_jsx(\"h1\",{children:\"Modifier un Produit\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"Ajouter un Produit\"})}),/*#__PURE__*/_jsx(Modal.Body.Heading,{style:{marginBottom:\"1.5rem\",marginTop:\"1.3rem\"},children:\"Informations du produit\"}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-nom\",label:\"nom\",variant:\"outlined\",name:\"nom\",size:\"small\",value:product===null||product===void 0?void 0:product.nom,onChange:inputChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-description\",label:\"description\",variant:\"outlined\",multiline:true,name:\"description\",size:\"small\",value:product===null||product===void 0?void 0:product.description,onChange:inputChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"image\",type:\"file\",variant:\"outlined\",size:\"small\",name:\"image\",onChange:function onChange(event){var fileUploaded=event.target.files[0];setProduct(_objectSpread(_objectSpread({},product),{},{image:fileUploaded}));setImageImported(true);}})})]}),/*#__PURE__*/_jsx(Modal.Body.Heading,{style:{marginBottom:\"1.5rem\",marginTop:\"1.3rem\"},children:\"Prix du produit\"}),/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(\"div\",{className:\"basic-input\",children:/*#__PURE__*/_jsx(TextField,{id:\"input-prix\",label:\"prix\",variant:\"outlined\",size:\"small\",name:\"prix\",value:product===null||product===void 0?void 0:product.prix,onChange:inputChange})})})]}),/*#__PURE__*/_jsx(Modal.Footer,{children:productToUpdate?/*#__PURE__*/_jsxs(\"div\",{style:{marginRight:\"15px\",width:\"100%\",display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Button,{id:\"modifier_btn\",onClick:updateProduct,children:\"Modifier\"}),/*#__PURE__*/_jsx(Button,{id:\"supprimer_btn\",onClick:deleteProduct,children:\"Supprimer\"})]}):/*#__PURE__*/_jsx(Button,{id:\"ajouter_btn\",onClick:addProduct,children:\" Ajouter \"})})]});};","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/MyModal/AddProductModal.js"],"names":["axios","useState","useEffect","URL","Button","IconButton","TextField","FormControlLabel","FormControl","RadioGroup","Radio","Checkbox","OutlinedInput","FormGroup","Modal","categorieId","show","setShow","productToUpdate","id","nom","description","prix","prix_gourmande","prix_intense","pieces_x5","pieces_x10","sans_accompagnement","accompagnements_x2","moyen","grand","image","categorie","disponibilite","initialProduct","product","setProduct","imageImported","setImageImported","console","log","handleClose","e","target","classList","contains","parentNode","addProduct","preventDefault","form_data","FormData","append","url","post","headers","then","res","catch","error","window","location","reload","deleteProduct","delete","updateProduct","name","put","inputChange","value","handleChange","checked","marginBottom","marginTop","event","fileUploaded","files","marginRight","width","display","justifyContent"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { URL } from \"../../../../middlewares/request\"\nimport { Button, IconButton, TextField } from \"@material-ui/core\";\nimport {\n  FormControlLabel,\n  FormControl,\n  RadioGroup,\n  Radio,\n  Checkbox,\n  OutlinedInput,\n} from \"@material-ui/core\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\n/*import \"./modal.css\";*/\nimport Modal from \"../MyModal/Modal\";\n\nexport default function ({\n    categorieId,\n    show,\n    setShow,\n    productToUpdate = null,\n\n    id,\n    nom,\n    description,\n    prix,\n    prix_gourmande,\n    prix_intense,\n    pieces_x5,\n    pieces_x10,\n    sans_accompagnement,\n    accompagnements_x2,\n    moyen,\n    grand,\n    image,\n    categorie,\n    disponibilite,\n}) {\n\n    const initialProduct = () => {\n        \n        return({\n            nom: nom ? nom : \"\",\n            prix: prix ? prix : 0,\n            prix_gourmande: prix_gourmande ? prix_gourmande : 0,\n            prix_intense: prix_intense ? prix_intense : 0,\n            pieces_x5: pieces_x5 ? pieces_x5 : 0,\n            pieces_x10: pieces_x10 ? pieces_x10 : 0,\n            sans_accompagnement: sans_accompagnement ? sans_accompagnement : 0,\n            accompagnements_x2: accompagnements_x2 ? sans_accompagnement : 0,\n            moyen: moyen ? moyen : 0,\n            grand: grand ? grand : 0,\n            image: image ? image : null,\n            description: description ? description : \"\",\n            categorie: categorieId,\n            //disponibilite: disponibilte ? disponibilte : \"\"\n        });\n\n\n    }\n    const [product, setProduct] = useState(initialProduct());\n\n    const [imageImported, setImageImported] = useState(false);\n\n    console.log(\"TEST2\");\n    console.log(product);\n\n    useEffect(() => {\n      setProduct(initialProduct())\n      \n    }, [productToUpdate]);\n\n    const handleClose = (e) => {\n        if (\n            e.target.classList.contains(\"myModal__backdrop\") ||\n            e.target.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.parentNode.classList.contains(\n                \"myModal__modal__close-btn\"\n            )\n        ) {\n            setShow(false);\n        }\n    };\n\n    const addProduct = async (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        /*if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);*/\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", categorieId);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        console.log(`from_data`, form_data)\n        let url = URL + \"gonak/produit/\";\n        axios\n            .post(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`added susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        window.location.reload(false);\n    }\n\n    const deleteProduct = async () => {\n        await axios.delete(URL + \"gonak/produit/\" + id + \"/\")\n          .then(() => console.log(`deleted`))\n          .catch(error => console.error(error));\n\n          window.location.reload(false);\n      }\n\n    const updateProduct = (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", product.categorie);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        let url = URL + \"gonak/produit/\" + id + \"/\";\n        axios\n            .put(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`updated susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        \n        window.location.reload(false); \n    }\n    const inputChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.value })\n    }\n\n    const handleChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.checked })\n    }\n\n    console.log(\"TEST3\");\n    console.log(product);\n\n    return (\n\n        <Modal showModal={show} setShowModal={setShow} handleClose={handleClose}>\n            <Modal.Header>\n                {productToUpdate ?\n                    <h1>Modifier un Produit</h1>\n                    :\n                    <h1>Ajouter un Produit</h1>\n                }\n            </Modal.Header>\n            \n            <Modal.Body.Heading\n                style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                Informations du produit\n            </Modal.Body.Heading>\n            \n            <Modal.Body>\n            <FormControl >\n                <div className=\"basic-input\">\n                    <TextField\n                        id=\"input-nom\"\n                        label=\"nom\"\n                        variant=\"outlined\"\n                        name=\"nom\"\n                        size=\"small\"\n                        value={product?.nom}\n                        onChange={inputChange}\n                    />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-description\"\n                    label=\"description\"\n                    variant=\"outlined\"\n                    multiline\n                    name=\"description\"\n                    size=\"small\"\n                    value={product?.description}\n                    onChange={inputChange}\n\n                />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"image\"\n                    type=\"file\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"image\"\n                    onChange={(event) => {\n                        const fileUploaded = event.target.files[0]\n                        setProduct({ ...product, image: fileUploaded });\n                        setImageImported(true);\n                    }\n                    }\n                />\n                </div>\n                </FormControl >\n                <Modal.Body.Heading\n                    style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                    Prix du produit\n                </Modal.Body.Heading>\n                <FormControl >\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-prix\"\n                    label=\"prix\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"prix\"\n                    value={product?.prix}\n                    onChange={inputChange}\n\n                />\n                </div>\n                </FormControl >\n                \n                \n                \n\n            </Modal.Body>\n         \n            <Modal.Footer>\n                {productToUpdate ?\n                    <div\n                      style={{\n                        marginRight: \"15px\",\n                        width: \"100%\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n\n                      }}>\n                        <Button id=\"modifier_btn\" onClick={updateProduct}>Modifier</Button>\n                        <Button id=\"supprimer_btn\" onClick={deleteProduct}>Supprimer</Button>\n                    </div>\n                    :\n                    <Button id=\"ajouter_btn\" onClick={addProduct}> Ajouter </Button>\n                }\n            </Modal.Footer>\n        </Modal>\n    );\n};\n\n\n\n"]},"metadata":{},"sourceType":"module"}