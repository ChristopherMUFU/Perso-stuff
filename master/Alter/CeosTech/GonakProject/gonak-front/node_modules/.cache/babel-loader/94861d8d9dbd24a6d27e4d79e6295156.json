{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/site/Panier/RadioPanier/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Button } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { sendrequest, URL } from \"../../../../middlewares/request\";\nimport { useSelector } from \"react-redux\";\nimport { calculTotal, getNombresArticles } from \"../../../../utilities\";\nimport { selectBaskets } from \"../../../../app/Redux-slices/basketsSlice\";\nimport { Grid } from \"@material-ui/core\";\nimport \"./styles.css\";\nimport CGV from \"../../../../Documents/CGV.pdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst RadioButtonsGroup = () => {\n  _s();\n\n  const history = useHistory();\n  const baskets = useSelector(selectBaskets);\n  const [value, setValue] = React.useState(\"\");\n  const [zoneValue, setZoneValue] = React.useState(\"\");\n  const [livraison, setLivraison] = React.useState(false);\n  const [comment, setComment] = useState(\"\");\n  const [error, setError] = React.useState(false);\n  const [isOpened, setOpening] = useState([]); // undefined\n\n  const [errorCGV, setErrorCGV] = useState(false);\n  const [checked, setChecked] = useState(false);\n\n  const handleChange = event => {\n    if (event.target.value === \"livraison\") {\n      setLivraison(true);\n    } else {\n      setLivraison(false);\n    }\n\n    setValue(event.target.value);\n    setError(false);\n  };\n\n  const handleChangeZone = event => {\n    setZoneValue(event.target.value);\n    setError(false);\n  };\n\n  const handleCommentChange = event => {\n    setComment(event.target.value);\n  };\n\n  const get_restaurant = async () => {\n    axios.get(URL + \"restaurant/info_restaurant/\").then(res => setOpening(res.data));\n    ;\n  };\n\n  const affichageZone1 = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"radio__text-zone\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Zone 1 (20\\u20AC minimum de commande) : \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), \"Le Blanc-Mesnil, Aulnay-sous-Bois, Le Bourget\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  };\n\n  const valZone1 = 20;\n\n  const affichageZone2 = () => {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"radio__text-zone\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Zone 2 (25\\u20AC minimum de commande) : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), \"Bondy, Bobigny, Dugny, Drancy\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  };\n\n  const valZone2 = 25;\n\n  const affichageZone3 = () => {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"radio__text-zone\",\n      id: \"last-text-radio\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Zone 3 (30\\u20AC minimum de commande) : \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), \"Stains, Pierrefitte-sur-Seine, Saint-Denis, Villetaneuse, Sarcelles\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  };\n\n  const valZone3 = 30;\n  useState(() => get_restaurant()); // Will redirect to the payment and add in the props the kind of delivery chosen\n\n  const handleSubmit = () => {\n    var _isOpened;\n\n    const d = new Date();\n    const hour = d.getHours();\n    const day = d.getDay(); //const isMenu = baskets.filter((menu) => \"type\" in menu);\n\n    console.log(\"go\"); //If the restaurant is closed\n\n    if (!((_isOpened = isOpened[isOpened.length - 1]) === null || _isOpened === void 0 ? void 0 : _isOpened.disponibilite_restaurant)) {\n      alert(\"Nous sommes désolés, le restaurant est actuellement fermé, revenez bientôt !\");\n    } else if (day > 5) {\n      //If the user is trying to order a menu at the wrong time : order possible monday to friday\n      alert(\"Nous sommes désolés, il n'est pas possible de commander un menu le week-end.\");\n    } else if (hour < 10 || hour > 18) {\n      //If the user is trying to order a menu at the wrong time : order possible 11h to 14h\n      alert(\"Nous sommes désolés, il n'est possible de commander un menu qu'entre 11h et 14h.\");\n    } else {\n      //Validate the cart\n      if (value !== \"\" && checked) {\n        history.push({\n          pathname: \"/home/paiement\",\n          delivery: {\n            value,\n            comment\n          }\n        });\n        setError(false);\n        setErrorCGV(false);\n      } else {\n        if (value == \"\") {\n          setError(true);\n        }\n\n        if (!checked) {\n          setErrorCGV(true);\n        }\n      }\n    }\n  };\n\n  const total = calculTotal(baskets);\n\n  const zoneVerify = event => {\n    if (Number(zoneValue) === valZone1 && total < valZone1) {\n      alert(\"Le minimum de commande pour cette zone est de\" + valZone1 + \"€. Veuillez compléter votre panier, merci :)\");\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone2 && total < valZone2) {\n      alert(\"Le minimum de commande pour cette zone est de \" + valZone2 + \"€. Veuillez compléter votre panier, merci :)\");\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone3 && total < valZone3) {\n      alert(\"Le minimum de commande pour cette zone est de \" + valZone3 + \"€. Veuillez compléter votre panier, merci :)\");\n      setZoneValue(-1);\n    } else {\n      handleSubmit();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"panier__fieldset\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"product--info-title\",\n      children: \"Commentaire\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      id: \"outlined-full-width\",\n      style: {\n        marginBottom: \"2rem\"\n      },\n      placeholder: \"Commentaire\",\n      helperText: \"Indiquez ici toute information compl\\xE9mentaire sur votre commande\",\n      fullWidth: true,\n      margin: \"normal\",\n      rows: 2,\n      variant: \"outlined\",\n      onChange: handleCommentChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"product--info-title\",\n      children: \"Mode de Livraison\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RadioGroup, {\n      \"aria-label\": \"panier__choice-delivery\",\n      name: \"panier__choice-delivery\",\n      value: value,\n      onChange: handleChange,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        justifyContent: \"center\",\n        xs: 12,\n        children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n          className: \"radio__panier-choice\",\n          value: \"\\xE0 emporter\",\n          id: \"radio_emporter\",\n          control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 26\n          }, this),\n          label: \"\\xC0 emporter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), isOpened[0] !== undefined && isOpened[0].disponibilite_livraison ? /*#__PURE__*/_jsxDEV(FormControlLabel, {\n          value: \"livraison\",\n          className: \"radio__panier-choice\",\n          control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 28\n          }, this),\n          label: \"Livraison\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 17\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error error_cart\",\n      children: \"Veuillez choisir un mode de livraison\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }, this), livraison ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"livraison__container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Minimum de commande selon la zone\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), \"D\\xE9lai livraison : 45min/1heure\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Veuillez choisir votre zone de livraison\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"zones__container\",\n        children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n          \"aria-label\": \"panier__choice-delivery\",\n          name: \"panier__choice-delivery\",\n          value: zoneValue,\n          onChange: handleChangeZone,\n          children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"20\",\n            className: \"radio__panier-zone\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 26\n            }, this),\n            label: affichageZone1()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"25\",\n            className: \"radio__panier-zone\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 26\n            }, this),\n            label: affichageZone2()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"30\",\n            className: \"radio__panier-zone\",\n            id: \"last-panier-radio\",\n            control: /*#__PURE__*/_jsxDEV(Radio, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 26\n            }, this),\n            label: affichageZone3()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CGV__container\",\n      children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n        checked: checked,\n        onClick: () => {\n          setChecked(!checked);\n          setErrorCGV(false);\n        },\n        color: \"primary\",\n        inputProps: {\n          \"aria-label\": \"secondary checkbox\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"J'ai lu et j'accepte les\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: CGV,\n          target: \"_blank\",\n          children: \"Conditions G\\xE9n\\xE9rales de Vente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), errorCGV && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error error_cart\",\n      children: \"Veuillez accepter les conditions g\\xE9n\\xE9rales de vente\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: zoneVerify,\n      type: \"submit\",\n      variant: \"contained\",\n      color: \"secondary\",\n      className: \"panier__container--btn-valider\",\n      children: \"Commander\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RadioButtonsGroup, \"0aYBsBpnYTlnQWLXmV7Y6P3jVvM=\", false, function () {\n  return [useHistory, useSelector];\n});\n\n_c = RadioButtonsGroup;\nexport default RadioButtonsGroup;\n\nvar _c;\n\n$RefreshReg$(_c, \"RadioButtonsGroup\");","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/site/Panier/RadioPanier/index.js"],"names":["React","Radio","RadioGroup","FormControlLabel","Checkbox","TextField","Button","useHistory","useState","useEffect","axios","sendrequest","URL","useSelector","calculTotal","getNombresArticles","selectBaskets","Grid","CGV","RadioButtonsGroup","history","baskets","value","setValue","zoneValue","setZoneValue","livraison","setLivraison","comment","setComment","error","setError","isOpened","setOpening","errorCGV","setErrorCGV","checked","setChecked","handleChange","event","target","handleChangeZone","handleCommentChange","get_restaurant","get","then","res","data","affichageZone1","valZone1","affichageZone2","valZone2","affichageZone3","valZone3","handleSubmit","d","Date","hour","getHours","day","getDay","console","log","length","disponibilite_restaurant","alert","push","pathname","delivery","total","zoneVerify","Number","marginBottom","undefined","disponibilite_livraison"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Button } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { sendrequest, URL } from \"../../../../middlewares/request\";\nimport { useSelector } from \"react-redux\";\nimport { calculTotal, getNombresArticles } from \"../../../../utilities\";\nimport { selectBaskets } from \"../../../../app/Redux-slices/basketsSlice\";\nimport { Grid } from \"@material-ui/core\";\n\n\nimport \"./styles.css\";\n\nimport CGV from \"../../../../Documents/CGV.pdf\";\n\nconst RadioButtonsGroup = () => {\n  const history = useHistory();\n  const baskets = useSelector(selectBaskets);\n\n  const [value, setValue] = React.useState(\"\");\n  const [zoneValue, setZoneValue] = React.useState(\"\");\n  const [livraison, setLivraison] = React.useState(false);\n  const [comment, setComment] = useState(\"\");\n\n  const [error, setError] = React.useState(false);\n  const [isOpened, setOpening] = useState([]); // undefined\n  const [errorCGV, setErrorCGV] = useState(false);\n\n  const [checked, setChecked] = useState(false);\n\n  const handleChange = (event) => {\n    if (event.target.value === \"livraison\") {\n      setLivraison(true);\n    } else {\n      setLivraison(false);\n    }\n    setValue(event.target.value);\n    setError(false);\n  };\n\n  const handleChangeZone = (event) => {\n    setZoneValue(event.target.value);\n    setError(false);\n  };\n\n  const handleCommentChange = (event) => {\n    setComment(event.target.value);\n  };\n\n  const get_restaurant = async () => {\n    axios.get(URL + \"restaurant/info_restaurant/\").then((res) => setOpening(res.data));;\n  };\n\n  const affichageZone1 = () => {\n    return (\n      <>\n        <p className=\"radio__text-zone\">\n          <strong>Zone 1 (20€ minimum de commande) : </strong>\n            Le Blanc-Mesnil, Aulnay-sous-Bois, Le Bourget\n        </p>\n      </>\n    );\n  };\n\n  const valZone1 = 20;\n\n  const affichageZone2 = () => {\n    return (\n      <p className=\"radio__text-zone\">\n        <strong>Zone 2 (25€ minimum de commande) : </strong>\n        Bondy, Bobigny, Dugny, Drancy\n      </p>\n    );\n  };\n\n  const valZone2 = 25;\n\n  const affichageZone3 = () => {\n    return (\n      <p className=\"radio__text-zone\" id=\"last-text-radio\">\n        <strong>Zone 3 (30€ minimum de commande) : </strong>\n        Stains, Pierrefitte-sur-Seine, Saint-Denis, Villetaneuse, Sarcelles\n      </p>\n    );\n  };\n\n  const valZone3 = 30;\n\n  useState(() => get_restaurant());\n\n  // Will redirect to the payment and add in the props the kind of delivery chosen\n  const handleSubmit = () => {\n    const d = new Date();\n    const hour = d.getHours();\n    const day = d.getDay();\n    //const isMenu = baskets.filter((menu) => \"type\" in menu);\n    console.log(\"go\");\n    //If the restaurant is closed\n    if (!isOpened[isOpened.length - 1]?.disponibilite_restaurant) {\n      alert(\n        \"Nous sommes désolés, le restaurant est actuellement fermé, revenez bientôt !\"\n      );\n    } else if (day > 5) {\n      //If the user is trying to order a menu at the wrong time : order possible monday to friday\n      alert(\n        \"Nous sommes désolés, il n'est pas possible de commander un menu le week-end.\"\n      );\n    } else if (hour < 10 || hour > 18) {\n      //If the user is trying to order a menu at the wrong time : order possible 11h to 14h\n      alert(\n        \"Nous sommes désolés, il n'est possible de commander un menu qu'entre 11h et 14h.\"\n      );\n    } else {\n      //Validate the cart\n      if (value !== \"\" && checked) {\n        history.push({\n          pathname: \"/home/paiement\",\n          delivery: { value, comment },\n        });\n        setError(false);\n        setErrorCGV(false);\n      } else {\n        if (value == \"\") {\n          setError(true);\n        }\n        if (!checked) {\n          setErrorCGV(true);\n        }\n      }\n    }\n  };\n\n  const total = calculTotal(baskets);\n\n  const zoneVerify = (event) => {\n    if (Number(zoneValue) === valZone1 && total < valZone1) {\n      alert(\n        \"Le minimum de commande pour cette zone est de\" +\n          valZone1 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone2 && total < valZone2) {\n      alert(\n        \"Le minimum de commande pour cette zone est de \" +\n          valZone2 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else if (Number(zoneValue) === valZone3 && total < valZone3) {\n      alert(\n        \"Le minimum de commande pour cette zone est de \" +\n          valZone3 +\n          \"€. Veuillez compléter votre panier, merci :)\"\n      );\n      setZoneValue(-1);\n    } else {\n        handleSubmit();\n    }\n  };\n\n  return (\n    <div className=\"panier__fieldset\">\n      <p className=\"product--info-title\">\n        Commentaire\n      </p>\n      <TextField\n        id=\"outlined-full-width\"\n        style={{ marginBottom: \"2rem\" }}\n        placeholder=\"Commentaire\"\n        helperText=\"Indiquez ici toute information complémentaire sur votre commande\"\n        fullWidth\n        margin=\"normal\"\n        rows={2}\n        variant=\"outlined\"\n        onChange={handleCommentChange}\n      />\n      <p className=\"product--info-title\">Mode de Livraison</p>\n\n      <RadioGroup\n        aria-label=\"panier__choice-delivery\"\n        name=\"panier__choice-delivery\"\n        value={value}\n        onChange={handleChange}\n      >\n        <Grid container justifyContent=\"center\" xs={12}>\n      \n            \n              <FormControlLabel\n                className=\"radio__panier-choice\"\n                value=\"à emporter\"\n                id=\"radio_emporter\"\n                control={<Radio />}\n                label=\"À emporter\"\n              />\n         \n            \n            \n              {isOpened[0] !== undefined && isOpened[0].disponibilite_livraison ? (\n                <FormControlLabel\n                  value=\"livraison\"\n                  className=\"radio__panier-choice\"\n                  control={<Radio />}\n                  label=\"Livraison\"\n                />\n                ) : null}\n          \n            \n        </Grid>\n\n      </RadioGroup>\n\n      {error && (\n        <p className=\"error error_cart\">\n          Veuillez choisir un mode de livraison\n        </p>\n      )}\n\n      {livraison ? (\n        <>\n          <div className=\"livraison__container\">\n            <h2>\n              Minimum de commande selon la zone\n              <br />\n              Délai livraison : 45min/1heure\n            </h2>\n            <p>Veuillez choisir votre zone de livraison</p>\n          </div>\n\n          <div className=\"zones__container\">\n            <RadioGroup\n              aria-label=\"panier__choice-delivery\"\n              name=\"panier__choice-delivery\"\n              value={zoneValue}\n              onChange={handleChangeZone}\n            >\n              <FormControlLabel\n                value=\"20\"\n                className=\"radio__panier-zone\"\n                control={<Radio />}\n                label={affichageZone1()}\n              />\n              <FormControlLabel\n                value=\"25\"\n                className=\"radio__panier-zone\"\n                control={<Radio />}\n                label={affichageZone2()}\n              />\n              <FormControlLabel\n                value=\"30\"\n                className=\"radio__panier-zone\"\n                id=\"last-panier-radio\"\n                control={<Radio />}\n                label={affichageZone3()}\n              />\n            </RadioGroup>\n          </div>\n        </>\n      ) : (\n        \"\"\n      )}\n\n      <div className=\"CGV__container\">\n        <Checkbox\n          checked={checked}\n          onClick={() => {\n            setChecked(!checked);\n            setErrorCGV(false);\n          }}\n          color=\"primary\"\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\n        />\n        <p>\n          J'ai lu et j'accepte les{\" \"}\n          <a href={CGV} target=\"_blank\">\n            Conditions Générales de Vente\n          </a>\n        </p>\n      </div>\n\n      {errorCGV && (\n        <p className=\"error error_cart\">\n          Veuillez accepter les conditions générales de vente\n        </p>\n      )}\n\n      <Button\n        onClick={zoneVerify}\n        type=\"submit\"\n        variant=\"contained\"\n        color=\"secondary\"\n        className=\"panier__container--btn-valider\"\n      >\n        Commander\n      </Button>\n    </div>\n  );\n};\n\nexport default RadioButtonsGroup;\n"]},"metadata":{},"sourceType":"module"}