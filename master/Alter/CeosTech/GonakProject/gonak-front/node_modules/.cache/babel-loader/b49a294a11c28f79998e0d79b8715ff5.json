{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/MyModal/AddProductModal.js\";\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { URL } from \"../../../../middlewares/request\";\nimport { Button, IconButton, TextField } from \"@material-ui/core\";\nimport { FormControlLabel, FormControl, RadioGroup, Radio, Checkbox, OutlinedInput } from \"@material-ui/core\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\n/*import \"./modal.css\";*/\n\nimport Modal from \"../MyModal/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ({\n  categorieId,\n  show,\n  setShow,\n  productToUpdate = null\n}) {\n  const initialProduct = () => {\n    console.log(\"TEST2\");\n    console.log(productToUpdate);\n    console.log(productToUpdate === null || productToUpdate === void 0 ? void 0 : productToUpdate.nom);\n\n    if (productToUpdate === null || productToUpdate === [] || productToUpdate === undefined) {\n      console.log(\"rien\");\n      return {\n        nom: (productToUpdate === null || productToUpdate === void 0 ? void 0 : productToUpdate.nom) ? productToUpdate.nom : \"\",\n        prix: productToUpdate ? productToUpdate.prix : \"\",\n        image: productToUpdate ? productToUpdate.image : null,\n        description: productToUpdate ? productToUpdate.description : \"\",\n        categorie: categorieId,\n        disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n      };\n    } else {\n      console.log(productToUpdate);\n\n      while ((productToUpdate === null || productToUpdate === void 0 ? void 0 : productToUpdate.nom) === undefined) {\n        console.log(\"TEST2.5\");\n        console.log(productToUpdate);\n        console.log(productToUpdate === null || productToUpdate === void 0 ? void 0 : productToUpdate.nom);\n      }\n\n      return {\n        nom: (productToUpdate === null || productToUpdate === void 0 ? void 0 : productToUpdate.nom) ? productToUpdate.nom : \"\",\n        prix: productToUpdate ? productToUpdate.prix : \"\",\n        image: productToUpdate ? productToUpdate.image : null,\n        description: productToUpdate ? productToUpdate.description : \"\",\n        categorie: categorieId,\n        disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n      };\n    }\n  };\n\n  const [product, setProduct] = useState(initialProduct());\n  const [imageImported, setImageImported] = useState(false); //console.log(productToUpdate);\n\n  /*const test = () =>{\n      if(productToUpdate?.nom)\n      {\n          console.log(\"TEST3\");\n          console.log(productToUpdate.nom);\n          const initialProduct = {\n              nom: productToUpdate ? productToUpdate.nom : \"\",\n              prix: productToUpdate ? productToUpdate.prix : \"\",\n              image: productToUpdate ? productToUpdate.image : null,\n              description: productToUpdate ? productToUpdate.description : \"\",\n              categorie: categorieId,\n              disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n          }\n           setProduct(initialProduct);\n          console.log(\"reussite\");\n          console.log(product);\n      }\n      else{\n          const initialProduct = {\n              nom: productToUpdate?.nom ? productToUpdate.nom : \"\",\n              prix: productToUpdate?.prix ? productToUpdate.prix : \"\",\n              image: productToUpdate?.image ? productToUpdate.image : null,\n              description: productToUpdate?.description ? productToUpdate.description : \"\",\n              categorie: categorieId,\n              disponibilite: productToUpdate?.disponibilite ? productToUpdate.disponibilte : \"\"\n          }\n           setProduct(initialProduct);\n          console.log(\"Ã©chec\");\n          console.log(product);\n      }\n  }\n   useEffect(() => {\n    test();\n    \n  }, []);*/\n\n  const handleClose = e => {\n    if (e.target.classList.contains(\"myModal__backdrop\") || e.target.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.parentNode.classList.contains(\"myModal__modal__close-btn\")) {\n      setShow(false);\n    }\n  };\n\n  const addProduct = async e => {\n    e.preventDefault();\n    console.log(`form_data`, product);\n    let form_data = new FormData();\n    form_data.append(\"nom\", product.nom);\n    form_data.append(\"description\", product.description);\n    /*if (product.image !== null)\n        form_data.append(\"image\", product.image, product.image.name);*/\n\n    form_data.append(\"prix\", product.prix);\n    form_data.append(\"categorie\", categorieId);\n    form_data.append(\"dsponibilite\", product.disponibilite);\n    console.log(`from_data`, form_data);\n    let url = URL + \"gonak/produit/\";\n    axios.post(url, form_data, {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      console.log(`added susscessfully`);\n    }).catch(error => {\n      console.error(error);\n    }); //window.location.reload(false);\n  };\n\n  const deleteProduct = async () => {\n    await axios.delete(URL + \"gonak/produit/\" + productToUpdate.id + \"/\").then(() => console.log(`deleted`)).catch(error => console.error(error));\n    window.location.reload(false);\n  };\n\n  const updateProduct = e => {\n    e.preventDefault();\n    console.log(`form_data`, product);\n    let form_data = new FormData();\n    form_data.append(\"nom\", product.nom);\n    form_data.append(\"description\", product.description);\n    if (product.image !== null) form_data.append(\"image\", product.image, product.image.name);\n    form_data.append(\"prix\", product.prix);\n    form_data.append(\"categorie\", product.categorie);\n    form_data.append(\"dsponibilite\", product.disponibilite);\n    let url = URL + \"gonak/produit/\" + productToUpdate.id + \"/\";\n    axios.put(url, form_data, {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      console.log(`updated susscessfully`);\n    }).catch(error => {\n      console.error(error);\n    });\n    window.location.reload(false);\n  };\n\n  const inputChange = e => {\n    setProduct({ ...product,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleChange = e => {\n    setProduct({ ...product,\n      [e.target.name]: e.target.checked\n    });\n  };\n\n  console.log(\"TEST3\");\n  console.log(product);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    showModal: show,\n    setShowModal: setShow,\n    handleClose: handleClose,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      children: productToUpdate ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Modifier un Produit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Ajouter un Produit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal.Body.Heading, {\n      style: {\n        marginBottom: \"1.5rem\",\n        marginTop: \"1.3rem\"\n      },\n      children: \"Informations du produit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), product !== [] && product !== undefined ? /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"basic-input\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"input-nom\",\n            label: \"nom\",\n            variant: \"outlined\",\n            name: \"nom\",\n            size: \"small\",\n            value: product === null || product === void 0 ? void 0 : product.nom,\n            onChange: inputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"basic-input\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"input-description\",\n            label: \"description\",\n            variant: \"outlined\",\n            multiline: true,\n            name: \"description\",\n            size: \"small\",\n            value: product === null || product === void 0 ? void 0 : product.description,\n            onChange: inputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"basic-input\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"image\",\n            type: \"file\",\n            variant: \"outlined\",\n            size: \"small\",\n            name: \"image\",\n            onChange: event => {\n              const fileUploaded = event.target.files[0];\n              setProduct({ ...product,\n                image: fileUploaded\n              });\n              setImageImported(true);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body.Heading, {\n        style: {\n          marginBottom: \"1.5rem\",\n          marginTop: \"1.3rem\"\n        },\n        children: \"Prix du produit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"basic-input\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"input-prix\",\n            label: \"prix\",\n            variant: \"outlined\",\n            size: \"small\",\n            name: \"prix\",\n            value: product === null || product === void 0 ? void 0 : product.prix,\n            onChange: inputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body.Heading, {\n        style: {\n          marginBottom: \"1.5rem\",\n          marginTop: \"1.3rem\"\n        },\n        children: \"Disponibilit\\xE9 du produit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        component: \"fieldset\",\n        children: /*#__PURE__*/_jsxDEV(FormGroup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sides-radioGroup\",\n            children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n              value: product === null || product === void 0 ? void 0 : product.nom,\n              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 38\n              }, this),\n              id: product === null || product === void 0 ? void 0 : product.id,\n              className: \"radio-choice__menu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 27\n            }, this)\n          }, product === null || product === void 0 ? void 0 : product.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this) : console.log(product), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: productToUpdate ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: \"15px\",\n          width: \"100%\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          border: \"0.7px solid black\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: updateProduct,\n          children: \"Modifier\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: deleteProduct,\n          children: \"supprimer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: addProduct,\n        children: \" Ajouter \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n}\n;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/MyModal/AddProductModal.js"],"names":["axios","useState","useEffect","URL","Button","IconButton","TextField","FormControlLabel","FormControl","RadioGroup","Radio","Checkbox","OutlinedInput","FormGroup","Modal","categorieId","show","setShow","productToUpdate","initialProduct","console","log","nom","undefined","prix","image","description","categorie","disponibilite","disponibilte","product","setProduct","imageImported","setImageImported","handleClose","e","target","classList","contains","parentNode","addProduct","preventDefault","form_data","FormData","append","url","post","headers","then","res","catch","error","deleteProduct","delete","id","window","location","reload","updateProduct","name","put","inputChange","value","handleChange","checked","marginBottom","marginTop","event","fileUploaded","files","marginRight","width","display","justifyContent","border"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { URL } from \"../../../../middlewares/request\"\nimport { Button, IconButton, TextField } from \"@material-ui/core\";\nimport {\n  FormControlLabel,\n  FormControl,\n  RadioGroup,\n  Radio,\n  Checkbox,\n  OutlinedInput,\n} from \"@material-ui/core\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\n/*import \"./modal.css\";*/\nimport Modal from \"../MyModal/Modal\";\n\nexport default function ({\n    categorieId,\n    show,\n    setShow,\n    productToUpdate = null\n}) {\n    const initialProduct = () =>{\n        \n        console.log(\"TEST2\")\n        console.log(productToUpdate)\n        console.log(productToUpdate?.nom)\n\n        if(productToUpdate === null || productToUpdate === [] || productToUpdate === undefined)\n        {\n            console.log(\"rien\")\n\n            return({\n                nom: productToUpdate?.nom ? productToUpdate.nom : \"\",\n                prix: productToUpdate ? productToUpdate.prix : \"\",\n                image: productToUpdate ? productToUpdate.image : null,\n                description: productToUpdate ? productToUpdate.description : \"\",\n                categorie: categorieId,\n                disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n            });\n        }\n        else\n        {\n            console.log(productToUpdate)\n            while(productToUpdate?.nom === undefined)\n            {\n                console.log(\"TEST2.5\")\n                console.log(productToUpdate)\n                console.log(productToUpdate?.nom)\n            }\n\n            return({\n                nom: productToUpdate?.nom ? productToUpdate.nom : \"\",\n                prix: productToUpdate ? productToUpdate.prix : \"\",\n                image: productToUpdate ? productToUpdate.image : null,\n                description: productToUpdate ? productToUpdate.description : \"\",\n                categorie: categorieId,\n                disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n            });\n        }\n        \n    }\n    const [product, setProduct] = useState(initialProduct());\n    const [imageImported, setImageImported] = useState(false);\n\n        //console.log(productToUpdate);\n\n\n    /*const test = () =>{\n        if(productToUpdate?.nom)\n        {\n            console.log(\"TEST3\");\n            console.log(productToUpdate.nom);\n            const initialProduct = {\n                nom: productToUpdate ? productToUpdate.nom : \"\",\n                prix: productToUpdate ? productToUpdate.prix : \"\",\n                image: productToUpdate ? productToUpdate.image : null,\n                description: productToUpdate ? productToUpdate.description : \"\",\n                categorie: categorieId,\n                disponibilite: productToUpdate ? productToUpdate.disponibilte : \"\"\n            }\n\n            setProduct(initialProduct);\n            console.log(\"reussite\");\n            console.log(product);\n        }\n        else{\n            const initialProduct = {\n                nom: productToUpdate?.nom ? productToUpdate.nom : \"\",\n                prix: productToUpdate?.prix ? productToUpdate.prix : \"\",\n                image: productToUpdate?.image ? productToUpdate.image : null,\n                description: productToUpdate?.description ? productToUpdate.description : \"\",\n                categorie: categorieId,\n                disponibilite: productToUpdate?.disponibilite ? productToUpdate.disponibilte : \"\"\n            }\n\n            setProduct(initialProduct);\n            console.log(\"Ã©chec\");\n            console.log(product);\n        }\n    }\n\n    useEffect(() => {\n      test();\n      \n    }, []);*/\n\n    const handleClose = (e) => {\n        if (\n            e.target.classList.contains(\"myModal__backdrop\") ||\n            e.target.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") ||\n            e.target.parentNode.parentNode.classList.contains(\n                \"myModal__modal__close-btn\"\n            )\n        ) {\n            \n            setShow(false);\n        }\n    };\n\n    const addProduct = async (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        /*if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);*/\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", categorieId);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        console.log(`from_data`, form_data)\n        let url = URL + \"gonak/produit/\";\n        axios\n            .post(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`added susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        //window.location.reload(false);\n    }\n\n    const deleteProduct = async () => {\n        await axios.delete(URL + \"gonak/produit/\" + productToUpdate.id + \"/\")\n          .then(() => console.log(`deleted`))\n          .catch(error => console.error(error));\n\n          window.location.reload(false);\n      }\n\n    const updateProduct = (e) => {\n        e.preventDefault();\n        console.log(`form_data`, product)\n\n        let form_data = new FormData();\n        form_data.append(\"nom\", product.nom);\n        form_data.append(\"description\", product.description);\n        if (product.image !== null)\n            form_data.append(\"image\", product.image, product.image.name);\n        form_data.append(\"prix\", product.prix);\n        form_data.append(\"categorie\", product.categorie);\n        form_data.append(\"dsponibilite\", product.disponibilite);\n        let url = URL + \"gonak/produit/\" + productToUpdate.id + \"/\";\n        axios\n            .put(url, form_data, {\n                headers: {\n                    \"content-type\": \"multipart/form-data\",\n                },\n            })\n            .then((res) => {\n                console.log(`updated susscessfully`)\n            })\n            .catch((error) => {\n                console.error(error)\n            });\n\n        \n        window.location.reload(false); \n    }\n    const inputChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.value })\n    }\n\n    const handleChange = (e) => {\n        setProduct({ ...product, [e.target.name]: e.target.checked })\n    }\n\n    console.log(\"TEST3\");\n    console.log(product);\n\n    return (\n\n        <Modal showModal={show} setShowModal={setShow} handleClose={handleClose}>\n            <Modal.Header>\n                {productToUpdate ?\n                    <h1>Modifier un Produit</h1>\n                    :\n                    <h1>Ajouter un Produit</h1>\n                }\n            </Modal.Header>\n            \n            <Modal.Body.Heading\n                style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                Informations du produit\n            </Modal.Body.Heading>\n            {product !== [] && product !== undefined ?\n            <Modal.Body>\n            <FormControl >\n                <div className=\"basic-input\">\n                    <TextField\n                        id=\"input-nom\"\n                        label=\"nom\"\n                        variant=\"outlined\"\n                        name=\"nom\"\n                        size=\"small\"\n                        value={product?.nom}\n                        onChange={inputChange}\n                    />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-description\"\n                    label=\"description\"\n                    variant=\"outlined\"\n                    multiline\n                    name=\"description\"\n                    size=\"small\"\n                    value={product?.description}\n                    onChange={inputChange}\n\n                />\n                </div>\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"image\"\n                    type=\"file\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"image\"\n                    onChange={(event) => {\n                        const fileUploaded = event.target.files[0]\n                        setProduct({ ...product, image: fileUploaded });\n                        setImageImported(true);\n                    }\n                    }\n                />\n                </div>\n                </FormControl >\n                <Modal.Body.Heading\n                    style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                    Prix du produit\n                </Modal.Body.Heading>\n                <FormControl >\n                <div className=\"basic-input\">\n                <TextField\n                    id=\"input-prix\"\n                    label=\"prix\"\n                    variant=\"outlined\"\n                    size=\"small\"\n                    name=\"prix\"\n                    value={product?.prix}\n                    onChange={inputChange}\n\n                />\n                </div>\n                </FormControl >\n                \n                <Modal.Body.Heading\n                    style={{ marginBottom: \"1.5rem\", marginTop: \"1.3rem\" }}>\n                    DisponibilitÃ© du produit\n                </Modal.Body.Heading>\n                <FormControl component=\"fieldset\">\n                    <FormGroup>\n           \n                        <div className=\"sides-radioGroup\" key={product?.id}>\n                          <FormControlLabel\n                            value={product?.nom}\n                            control={<Checkbox onChange={handleChange} />}\n                            id={product?.id}\n                            className=\"radio-choice__menu\"\n                            \n                          />\n                          {/*<span>{product.nom}</span>*/}\n                        </div>\n                      \n        \n                    </FormGroup>\n                </FormControl>\n                \n\n            </Modal.Body>\n            :(console.log(product))}\n            <Modal.Footer>\n                {productToUpdate ?\n                    <div\n                      style={{\n                        marginRight: \"15px\",\n                        width: \"100%\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        border: \"0.7px solid black\",\n\n                      }}>\n                        <Button onClick={updateProduct}>Modifier</Button>\n                        <Button onClick={deleteProduct}>supprimer</Button>\n                    </div>\n                    :\n                    <Button onClick={addProduct}> Ajouter </Button>\n                }\n            </Modal.Footer>\n        </Modal>\n    );\n};\n\n\n\n"]},"metadata":{},"sourceType":"module"}