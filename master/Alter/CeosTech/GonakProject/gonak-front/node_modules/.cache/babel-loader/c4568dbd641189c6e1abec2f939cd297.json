{"ast":null,"code":"import _objectSpread from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useHistory}from\"react-router-dom\";import{useState}from\"react\";import useForm from\"../../../hooks/useForm\";import{sendrequest,URL}from\"../../../middlewares/request\";import ModalBootsrap from\"../modal/Modal\";import{TextField}from\"@material-ui/core\";import{Button}from\"@material-ui/core\";import\"./caisse.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initial={denomination:\"\",adresse:\"\",code_postal:\"\",ville:\"\"};var EditFormCaisse=function EditFormCaisse(_ref){var restaurantOwner=_ref.restaurantOwner;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setSuccess=_useState4[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var token=window.$token_access;var email=window.$email_dirigeant;var updateData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.put(URL+\"accounts/restaurantowner/\"+restaurantOwner.id+\"/\",{nom:state.nom,prenom:state.prenom,email:state.adresse_mail,phone_number:state.num_tel,company_position:state.poste_occupe,restaurant:{name:restaurantOwner.restaurant.name,address:state.adresse,postal_code:state.code_postal,city:state.ville,phone_number:restaurantOwner.restaurant.phone_number},company:{name:restaurantOwner.company.name,address:restaurantOwner.company.address,postal_code:restaurantOwner.company.postal_code,city:restaurantOwner.company.city,capital:restaurantOwner.company.capital,SIRET_number:restaurantOwner.company.SIRET_number,retirement_fund_name:restaurantOwner.company.retirement_fund_name,retirement_fund_address:restaurantOwner.company.retirement_fund_address,retirement_fund_city:restaurantOwner.company.retirement_fund_city,retirement_fund_postal_code:restaurantOwner.company.retirement_fund_postal_code},user:{//username: state.adresse_mail,\nemail:state.adresse_mail,password:restaurantOwner.user.password}},{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(result){console.log(result.data);});case 2:res=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function updateData(){return _ref2.apply(this,arguments);};}();var estValide=function estValide(){var fieldValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:state;var validator={};if(\"denomination\"in fieldValues)validator.denomination=state.denomination?null:\"Le champ dénomination est obligatore\";if(\"adresse\"in fieldValues)validator.denomination=state.denomination?null:\"Le champ adresse est obligatore\";if(\"ville\"in fieldValues)validator.ville=state.ville?null:\"Le champ ville est obligatore\";if(\"code_postal\"in fieldValues)validator.code_postal=/^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(code_postal)?null:\"Le code postal n'est pas valide\";setErrors(_objectSpread({},validator));// retourne boolean si et seulement si on passe un parametre pour la fonction\nif(fieldValues===state){return Object.values(validator).every(function(el){return!el;});}};var _useForm=useForm(initial,estValide),state=_useForm.state,handleInputChange=_useForm.handleInputChange,errors=_useForm.errors,setErrors=_useForm.setErrors,reinitialiserState=_useForm.reinitialiserState;var denomination=state.denomination,code_postal=state.code_postal,ville=state.ville,adresse=state.adresse;var handleSubmit=function handleSubmit(e){e.preventDefault();/* sendrequest(\"post\", \"main/caisse/\", null, null, state)\n            .then((response) => {\n                if (response !== false && estValide()) {\n                    setSuccess(true);\n                    handleShow();\n                } else {\n                    setSuccess(false);\n                    handleShow();\n                }\n            })*/reinitialiserState();if(estValide()){}if(restaurantOwner===[]){//reinitialiserState();\nif(estValide()){sendrequest(\"post\",\"main/caisse/\",null,null,state).then(function(response){if(response!==false&&estValide()){setSuccess(true);handleShow();}else{setSuccess(false);handleShow();}});}}else{updateData();RedirectionInfo();}};var history=useHistory();var RedirectionInfo=function RedirectionInfo(){var url=\"/admin/mon-compte/infos-personnelles\";history.push(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"caisse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"caisse_title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Caisse de retraite compl\\xE9mentaire\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\" caisse_container\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"caisse_div\",children:[/*#__PURE__*/_jsx(TextField,{className:\"caisse_input\",fullWidth:true,label:\"D\\xE9nomination social\",id:\"outlined-basic\",variant:\"outlined\",name:\"denomination\",value:denomination,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.denomination})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"caisse_div\",children:[/*#__PURE__*/_jsx(TextField,{className:\"caisse_input\",fullWidth:true,label:\"Adresse\",id:\"outlined-basic\",variant:\"outlined\",name:\"adresse\",value:adresse,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.adresse})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"adresse_caisse\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"caisse_div\",children:[/*#__PURE__*/_jsx(TextField,{className:\"caisse_input\",fullWidth:true,label:\"Code Postal\",id:\"outlined-basic\",variant:\"outlined\",name:\"code_postal\",value:code_postal,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.code_postal})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"caisse_div\",children:[/*#__PURE__*/_jsx(TextField,{className:\"caisse_input\",fullWidth:true,label:\"Ville\",id:\"outlined-basic\",variant:\"outlined\",name:\"ville\",value:ville,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors.ville})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"caisse_button\",children:/*#__PURE__*/_jsx(\"button\",{className:\"registre_caisse_button\",type:\"submit\",children:\"Enregistrer\"})}),/*#__PURE__*/_jsx(ModalBootsrap,{handleClose:handleClose,show:show,title:/*#__PURE__*/_jsxs(_Fragment,{children:[success?\"Envoyé\":\"Oups\",/*#__PURE__*/_jsx(\"i\",{className:\"\".concat(success?\" fas fa-thumbs-up\":\" fas fa-thumbs-down\"),style:{color:\"#4caf50\",marginLeft:\"1rem\"}})]}),children:success?\"Enregistrement avec succès.\":\"Une erreur s'est produite, veuillez réessayer.\"})]})]});};export default EditFormCaisse;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/caisse/EditFormCaisse.js"],"names":["useHistory","useState","useForm","sendrequest","URL","ModalBootsrap","TextField","Button","axios","initial","denomination","adresse","code_postal","ville","EditFormCaisse","restaurantOwner","show","setShow","success","setSuccess","handleClose","handleShow","token","window","$token_access","email","$email_dirigeant","updateData","put","id","nom","state","prenom","adresse_mail","phone_number","num_tel","company_position","poste_occupe","restaurant","name","address","postal_code","city","company","capital","SIRET_number","retirement_fund_name","retirement_fund_address","retirement_fund_city","retirement_fund_postal_code","user","password","headers","Authorization","then","result","console","log","data","res","estValide","fieldValues","validator","test","setErrors","Object","values","every","el","handleInputChange","errors","reinitialiserState","handleSubmit","e","preventDefault","response","RedirectionInfo","history","url","push","color","marginLeft"],"mappings":"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","sourcesContent":["import { useHistory } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport useForm from \"../../../hooks/useForm\";\nimport { sendrequest, URL } from \"../../../middlewares/request\";\nimport ModalBootsrap from \"../modal/Modal\";\nimport { TextField } from \"@material-ui/core\";\nimport { Button } from \"@material-ui/core\";\n\nimport \"./caisse.css\";\nimport axios from \"axios\";\n\nconst initial = {\n  denomination: \"\",\n  adresse: \"\",\n  code_postal: \"\",\n  ville: \"\",\n};\n\nconst EditFormCaisse = ({ restaurantOwner }) => {\n  const [show, setShow] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const token = window.$token_access;\n  const email = window.$email_dirigeant;\n\n  const updateData = async () => {\n    const res = await axios\n      .put(\n        URL + \"accounts/restaurantowner/\" + restaurantOwner.id + \"/\",\n        {\n          nom: state.nom,\n          prenom: state.prenom,\n          email: state.adresse_mail,\n          phone_number: state.num_tel,\n          company_position: state.poste_occupe,\n          restaurant: {\n            name: restaurantOwner.restaurant.name,\n            address: state.adresse,\n            postal_code: state.code_postal,\n            city: state.ville,\n            phone_number: restaurantOwner.restaurant.phone_number,\n          },\n          company: {\n            name: restaurantOwner.company.name,\n            address: restaurantOwner.company.address,\n            postal_code: restaurantOwner.company.postal_code,\n            city: restaurantOwner.company.city,\n            capital: restaurantOwner.company.capital,\n            SIRET_number: restaurantOwner.company.SIRET_number,\n            retirement_fund_name: restaurantOwner.company.retirement_fund_name,\n            retirement_fund_address:\n              restaurantOwner.company.retirement_fund_address,\n            retirement_fund_city: restaurantOwner.company.retirement_fund_city,\n            retirement_fund_postal_code:\n              restaurantOwner.company.retirement_fund_postal_code,\n          },\n          user: {\n            //username: state.adresse_mail,\n            email: state.adresse_mail,\n            password: restaurantOwner.user.password,\n          },\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((result) => {\n        console.log(result.data);\n      });\n\n    //console.log(res.data);\n  };\n\n  const estValide = (fieldValues = state) => {\n    const validator = {};\n\n    if (\"denomination\" in fieldValues)\n      validator.denomination = state.denomination\n        ? null\n        : \"Le champ dénomination est obligatore\";\n\n    if (\"adresse\" in fieldValues)\n      validator.denomination = state.denomination\n        ? null\n        : \"Le champ adresse est obligatore\";\n\n    if (\"ville\" in fieldValues)\n      validator.ville = state.ville ? null : \"Le champ ville est obligatore\";\n\n    if (\"code_postal\" in fieldValues)\n      validator.code_postal = /^(([0-8][0-9])|(9[0-5]))[0-9]{3}$/.test(\n        code_postal\n      )\n        ? null\n        : \"Le code postal n'est pas valide\";\n\n    setErrors({ ...validator });\n\n    // retourne boolean si et seulement si on passe un parametre pour la fonction\n    if (fieldValues === state) {\n      return Object.values(validator).every((el) => !el);\n    }\n  };\n\n  const { state, handleInputChange, errors, setErrors, reinitialiserState } =\n    useForm(initial, estValide);\n\n  const { denomination, code_postal, ville, adresse } = state;\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    /* sendrequest(\"post\", \"main/caisse/\", null, null, state)\n            .then((response) => {\n                if (response !== false && estValide()) {\n                    setSuccess(true);\n                    handleShow();\n                } else {\n                    setSuccess(false);\n                    handleShow();\n                }\n            })*/\n\n    reinitialiserState();\n    if (estValide()) {\n    }\n\n    if (restaurantOwner === []) {\n      //reinitialiserState();\n      if (estValide()) {\n        sendrequest(\"post\", \"main/caisse/\", null, null, state).then(\n          (response) => {\n            if (response !== false && estValide()) {\n              setSuccess(true);\n              handleShow();\n            } else {\n              setSuccess(false);\n              handleShow();\n            }\n          }\n        );\n      }\n    } else {\n      updateData();\n      RedirectionInfo();\n    }\n  };\n\n  const history = useHistory();\n\n  const RedirectionInfo = () => {\n    let url = \"/admin/mon-compte/infos-personnelles\";\n    history.push(url);\n  };\n  return (\n    <div className=\"caisse\">\n      <div className=\"caisse_title\">\n        <h2>Caisse de retraite complémentaire</h2>\n      </div>\n\n      <div className=\" caisse_container\" onSubmit={handleSubmit}>\n        <div className=\"caisse_div\">\n          <TextField\n            className=\"caisse_input\"\n            fullWidth\n            label=\"Dénomination social\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            name=\"denomination\"\n            value={denomination}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.denomination}</div>\n        </div>\n        <div className=\"caisse_div\">\n          <TextField\n            className=\"caisse_input\"\n            fullWidth\n            label=\"Adresse\"\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            name=\"adresse\"\n            value={adresse}\n            onChange={handleInputChange}\n            required\n          />\n          <div className=\"errors\">{errors.adresse}</div>\n        </div>\n        <div className=\"adresse_caisse\">\n          <div className=\"caisse_div\">\n            <TextField\n              className=\"caisse_input\"\n              fullWidth\n              label=\"Code Postal\"\n              id=\"outlined-basic\"\n              variant=\"outlined\"\n              name=\"code_postal\"\n              value={code_postal}\n              onChange={handleInputChange}\n              required\n            />\n            <div className=\"errors\">{errors.code_postal}</div>\n          </div>\n          <div className=\"caisse_div\">\n            <TextField\n              className=\"caisse_input\"\n              fullWidth\n              label=\"Ville\"\n              id=\"outlined-basic\"\n              variant=\"outlined\"\n              name=\"ville\"\n              value={ville}\n              onChange={handleInputChange}\n              required\n            />\n            <div className=\"errors\">{errors.ville}</div>\n          </div>\n        </div>\n        <div className=\"caisse_button\">\n          <button className=\"registre_caisse_button\" type=\"submit\">\n            Enregistrer\n          </button>\n        </div>\n\n        <ModalBootsrap\n          handleClose={handleClose}\n          show={show}\n          title={\n            <>\n              {success ? \"Envoyé\" : \"Oups\"}\n              <i\n                className={`${\n                  success ? \" fas fa-thumbs-up\" : \" fas fa-thumbs-down\"\n                }`}\n                style={{ color: \"#4caf50\", marginLeft: \"1rem\" }}\n              ></i>\n            </>\n          }\n        >\n          {success\n            ? \"Enregistrement avec succès.\"\n            : \"Une erreur s'est produite, veuillez réessayer.\"}\n        </ModalBootsrap>\n      </div>\n    </div>\n  );\n};\nexport default EditFormCaisse;\n"]},"metadata":{},"sourceType":"module"}