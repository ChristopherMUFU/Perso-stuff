{"ast":null,"code":"import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Switch,Redirect}from\"react-router-dom\";import SecuredRoute from\"./middlewares/SecuredRout\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./App.css\";// Store\n// import store from \"./store\";\nimport{loadStripe}from\"@stripe/stripe-js\";import{Elements}from\"@stripe/react-stripe-js\";import{sendrequest}from\"./middlewares/request.js\";import Admin from\"./components/admin\";import Login from\"./components/admin/security/Login\";import Site from\"./components/site\";import Paiement from\"./components/site/Panier/Paiement\";// Router\n// We have two nested routers :\n// /home for the website\n// /admin for the admin part\n// In order for the routing to work, we redirect / to /home so that the user falls on the website.\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),apiKey=_useState2[0],setApiKey=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isKeyLoaded=_useState4[0],setIsKeyLoaded=_useState4[1];var getAPIKeys=function getAPIKeys(){sendrequest(\"get\",\"gonak/api/keys/\",setApiKey,setIsKeyLoaded);};useEffect(function(){getAPIKeys();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",component:Login}),/*#__PURE__*/_jsx(SecuredRoute,{path:\"/admin\",component:Admin}),/*#__PURE__*/_jsx(Redirect,{exact:true,from:\"/\",to:\"/home\"}),/*#__PURE__*/_jsx(Route,{path:\"/home\",component:Site}),isKeyLoaded&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/home/paiement\",children:/*#__PURE__*/_jsx(Elements,{stripe:loadStripe(apiKey[0].stripe_public_key),children:/*#__PURE__*/_jsx(Paiement,{})})})]})})});}export default App;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/App.js"],"names":["React","useState","useEffect","BrowserRouter","Router","Route","Switch","Redirect","SecuredRoute","loadStripe","Elements","sendrequest","Admin","Login","Site","Paiement","App","apiKey","setApiKey","isKeyLoaded","setIsKeyLoaded","getAPIKeys","stripe_public_key"],"mappings":"iLAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,KAFF,CAGEC,MAHF,CAIEC,QAJF,KAKO,kBALP,CAMA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAO,sCAAP,CACA,MAAO,WAAP,CAEA;AACA;AACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,OAASC,WAAT,KAA4B,0BAA5B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mCAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,mCAArB,CAEA;AACA;AACA;AACA;AACA;wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAA4Bf,QAAQ,CAAC,IAAD,CAApC,wCAAOgB,MAAP,eAAeC,SAAf,eACA,eAAsCjB,QAAQ,CAAC,KAAD,CAA9C,yCAAOkB,WAAP,eAAoBC,cAApB,eAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBV,WAAW,CAAC,KAAD,CAAQ,iBAAR,CAA2BO,SAA3B,CAAsCE,cAAtC,CAAX,CACD,CAFD,CAIAlB,SAAS,CAAC,UAAM,CACdmB,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAGA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,wBACE,MAAC,MAAD,yBAEE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,CAA2B,SAAS,CAAER,KAAtC,EAFF,cAGE,KAAC,YAAD,EAAc,IAAI,CAAC,QAAnB,CAA4B,SAAS,CAAED,KAAvC,EAHF,cAIE,KAAC,QAAD,EAAU,KAAK,KAAf,CAAgB,IAAI,CAAC,GAArB,CAAyB,EAAE,CAAC,OAA5B,EAJF,cAKE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEE,IAA/B,EALF,CAOGK,WAAW,eACR,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,gBAAlB,uBACE,KAAC,QAAD,EAAU,MAAM,CAAEV,UAAU,CAACQ,MAAM,CAAC,CAAD,CAAN,CAAUK,iBAAX,CAA5B,uBAGE,KAAC,QAAD,IAHF,EADF,EARN,GADF,EADF,EADF,CAwBD,CACD,cAAeN,CAAAA,GAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\nimport SecuredRoute from \"./middlewares/SecuredRout\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\n// Store\n// import store from \"./store\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { sendrequest } from \"./middlewares/request.js\";\n\nimport Admin from \"./components/admin\";\nimport Login from \"./components/admin/security/Login\";\nimport Site from \"./components/site\";\nimport Paiement from \"./components/site/Panier/Paiement\";\n\n// Router\n// We have two nested routers :\n// /home for the website\n// /admin for the admin part\n// In order for the routing to work, we redirect / to /home so that the user falls on the website.\n\nfunction App() {\n  const [apiKey, setApiKey] = useState(null);\n  const [isKeyLoaded, setIsKeyLoaded] = useState(false);\n\n  const getAPIKeys = () => {\n    sendrequest(\"get\", \"gonak/api/keys/\", setApiKey, setIsKeyLoaded);\n  };\n\n  useEffect(() => {\n    getAPIKeys();\n  }, []);\n  return (\n    <div className=\"App\">\n      <Router>\n        <Switch>\n\n          <Route exact path=\"/login\" component={Login} />\n          <SecuredRoute path=\"/admin\" component={Admin} />\n          <Redirect exact from=\"/\" to=\"/home\" />\n          <Route path=\"/home\" component={Site} /> \n\n          {isKeyLoaded && (\n              <Route exact path=\"/home/paiement\">\n                <Elements stripe={loadStripe(apiKey[0].stripe_public_key)}>\n                  {/*Pour les tests en prod */}\n                  {/*<Elements stripe={\"pk_test_51IZE0cLbB6RgpOO7iZUCX9Ur3vHxEbgRHRndYTjkEuzei0jpqiDjlccIlVHQMbCZEb6zAHpd4R5tktQR3IIy5u5i00kZDxLJsh\"}>*/}\n                  <Paiement />\n                </Elements>\n              </Route>\n            )}   \n          \n        </Switch>\n      </Router>\n    </div>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}