{"ast":null,"code":"import _regeneratorRuntime from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/christopher/Documents/Alter/GonakProject/gonak-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Logo from\"../../../images/logo_petit_m.png\";import{useDispatch,useSelector}from\"react-redux\";import{selectAdmin,changePage}from\"../../../app/Redux-slices/adminSlice\";import{useEffect,useState}from\"react\";import\"./menu.css\";import{IconButton}from\"@material-ui/core\";import{Switch,useHistory,useRouteMatch}from\"react-router-dom\";import SwitchBtn from\"../switch/SwitchBtn\";import axios from\"axios\";import{URL}from\"../../../middlewares/request\";//import Admin from \"../../../pages/Admin\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminNav=function AdminNav(){var admin=useSelector(selectAdmin);var dispatch=useDispatch();var history=useHistory();var _useRouteMatch=useRouteMatch(),path=_useRouteMatch.path;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),items=_useState4[0],setItems=_useState4[1];console.log(active);// active\n//   ? (window.document.body.style.overflow = \"hidden\")\n//   : (window.document.body.style.overflow = \"auto\");\nvar get_restaurant=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(URL+\"restaurant/info_restaurant/\");case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setItems(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function get_restaurant(){return _ref.apply(this,arguments);};}();var deconnexion=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Êtes-vous sûr de vouloir vous déconnecter ? Cela aura pour conséquence de fermer le restaurant.\")){_context2.next=7;break;}_context2.next=3;return axios.put(URL+\"restaurant/info_restaurant/1/\",{disponibilite_restaurant:false});case 3:localStorage.removeItem('jwtToken');history.push(\"/\");// à voir si il y a mieux\n_context2.next=7;break;case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function deconnexion(){return _ref2.apply(this,arguments);};}();var updateDisponibiliteRestaurant=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item,disponibilite){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(disponibilite);_context3.next=3;return axios.put(URL+\"restaurant/info_restaurant/1/\",{disponibilite_restaurant:disponibilite});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function updateDisponibiliteRestaurant(_x,_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){get_restaurant();console.log(items);return function(){setItems([]);};},[]);console.log(items[0]);return/*#__PURE__*/_jsxs(\"div\",{className:\"adminNav \"+(active?\"active\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"adminNav__header\",children:/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Logo Markus\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"adminNav__title\",children:\"Gonak\"}),items[0]!=undefined?/*#__PURE__*/_jsx(SwitchBtn,{val:items[0].disponibilite_restaurant,action:updateDisponibiliteRestaurant,item:items[0]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"adminNav__links\",children:[admin.pages.map(function(page){return/*#__PURE__*/_jsxs(\"button\",{className:\"adminNav__link \"+(admin.currentPage===page.name?\"active\":\"\"),onClick:function onClick(){dispatch(changePage(page.name));history.push(path+page.path);setActive(false);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas adminNav__link__icone \"+page.icone}),\" \",/*#__PURE__*/_jsx(\"p\",{children:page.libelle}),page.name===\"nouvelles_commandes\"&&admin.nouvelleCommandeLength>0&&/*#__PURE__*/_jsx(\"div\",{className:\"adminNav__nouvelles_commandes__indicator\",children:admin.nouvelleCommandeLength}),page.name===\"commandes_encours\"&&admin.commandeCoursLength>0&&/*#__PURE__*/_jsx(\"div\",{className:\"adminNav__nouvelles_commandes__indicator\",children:admin.commandeCoursLength})]},page.name);}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",onClick:function onClick(){return deconnexion();},className:\"adminNav__link-deconnexion\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas adminNav__link__icone \"+\"fa-sign-out-alt\"}),\" \",/*#__PURE__*/_jsx(\"p\",{children:\"D\\xE9connexion\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"adminNav__close\",children:/*#__PURE__*/_jsx(IconButton,{className:\"adminNav__close-btn\",onClick:function onClick(){setActive(!active);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-\"+(active?\"chevron-right\":\"chevron-left\")})})}),/*#__PURE__*/_jsx(\"div\",{className:\"adminNav__humburger\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setActive(!active);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars\"})})})]});};export default AdminNav;","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/menu/Menu.js"],"names":["Logo","useDispatch","useSelector","selectAdmin","changePage","useEffect","useState","IconButton","Switch","useHistory","useRouteMatch","SwitchBtn","axios","URL","AdminNav","admin","dispatch","history","path","active","setActive","items","setItems","console","log","get_restaurant","get","data","deconnexion","window","confirm","put","disponibilite_restaurant","localStorage","removeItem","push","updateDisponibiliteRestaurant","item","disponibilite","undefined","pages","map","page","currentPage","name","icone","libelle","nouvelleCommandeLength","commandeCoursLength"],"mappings":"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","sourcesContent":["import Logo from \"../../../images/logo_petit_m.png\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectAdmin, changePage } from \"../../../app/Redux-slices/adminSlice\";\nimport { useEffect, useState } from \"react\";\nimport \"./menu.css\";\nimport { IconButton } from \"@material-ui/core\";\nimport { Switch, useHistory, useRouteMatch } from \"react-router-dom\";\nimport SwitchBtn from \"../switch/SwitchBtn\";\nimport axios from \"axios\";\nimport { URL } from \"../../../middlewares/request\";\n//import Admin from \"../../../pages/Admin\";\n\nconst AdminNav = () => {\n  const admin = useSelector(selectAdmin);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { path } = useRouteMatch();\n\n  const [active, setActive] = useState(false);\n  const [items, setItems] = useState([]);\n\n  console.log(active);\n\n  // active\n  //   ? (window.document.body.style.overflow = \"hidden\")\n  //   : (window.document.body.style.overflow = \"auto\");\n\n  const get_restaurant = async () => {\n    const { data } = await axios.get(URL + \"restaurant/info_restaurant/\");\n\n    setItems(data);\n  };\n\n  const deconnexion = async () => {\n    if (\n      window.confirm(\n        \"Êtes-vous sûr de vouloir vous déconnecter ? Cela aura pour conséquence de fermer le restaurant.\"\n      )\n    ) {\n      await axios.put(URL + \"restaurant/info_restaurant/1/\", {\n        disponibilite_restaurant: false,\n      });\n      localStorage.removeItem('jwtToken');\n      history.push(\"/\") // à voir si il y a mieux\n    } else {\n      // Code à éxécuter si l'utilisateur clique sur \"Annuler\"\n    }\n  };\n\n  const updateDisponibiliteRestaurant = async (item, disponibilite) => {\n    console.log(disponibilite);\n    await axios.put(URL + \"restaurant/info_restaurant/1/\", {\n      disponibilite_restaurant: disponibilite,\n    });\n  };\n\n  useEffect(() => {\n    get_restaurant();\n    console.log(items);\n\n    return () => {\n      setItems([]);\n    };\n  }, []);\n\n  console.log(items[0]);\n\n  return (\n    <div className={\"adminNav \" + (active ? \"active\" : \"\")}>\n      <div className=\"adminNav__header\">\n        <img src={Logo} alt=\"Logo Markus\" />\n      \n      </div>\n\n      <h2 className=\"adminNav__title\">Gonak</h2>\n      {/*Switch pour ouvrir et fermer (close and open restaurant)*/}\n      \n      {items[0] != undefined ? (\n        <SwitchBtn\n          val={items[0].disponibilite_restaurant}\n          action={updateDisponibiliteRestaurant}\n          item={items[0]}\n        />\n      ) : null}\n    \n      <div className=\"adminNav__links\">\n        {admin.pages.map((page) => (\n          <button\n            key={page.name}\n            className={\n              \"adminNav__link \" +\n              (admin.currentPage === page.name ? \"active\" : \"\")\n            }\n            onClick={() => {\n              dispatch(changePage(page.name));\n              history.push(path + page.path);\n              setActive(false);\n            }}\n          >\n            <i className={\"fas adminNav__link__icone \" + page.icone}></i>{\" \"}\n            <p>{page.libelle}</p>\n            {page.name === \"nouvelles_commandes\" &&\n              admin.nouvelleCommandeLength > 0 && (\n                <div className=\"adminNav__nouvelles_commandes__indicator\">\n                  {admin.nouvelleCommandeLength}\n                </div>\n              )}\n            {page.name === \"commandes_encours\" &&\n              admin.commandeCoursLength > 0 && (\n                <div className=\"adminNav__nouvelles_commandes__indicator\">\n                  {admin.commandeCoursLength}\n                </div>\n              )}\n          </button>\n        ))}\n        <button\n          type=\"submit\"\n          onClick={() => deconnexion()}\n          className=\"adminNav__link-deconnexion\"\n        >\n          <i className={\"fas adminNav__link__icone \" + \"fa-sign-out-alt\"}></i>{\" \"}\n          <p>Déconnexion</p>\n        </button>\n      </div>\n      <div className=\"adminNav__close\">\n        <IconButton\n          className=\"adminNav__close-btn\"\n          onClick={() => {setActive(!active)}}\n        >\n          <i\n            className={\"fas fa-\" + (active ? \"chevron-right\" : \"chevron-left\")}\n          ></i>\n        </IconButton>\n      </div>\n\n      <div className=\"adminNav__humburger\">\n        <IconButton onClick={() => setActive(!active)}>\n          <i className=\"fas fa-bars\"></i>\n        </IconButton>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminNav;\n"]},"metadata":{},"sourceType":"module"}