{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/index.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Carte from \"./Carte\"; //import MenuType from \"../../Menu/MenuType\";\n\nimport { splitPrix } from \"../../../utilities\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from \"./Carte/card\";\nimport CartePage from '../../site/Carte/CartePage';\nimport AddProductModal from \"./MyModal/AddProductModal\";\nimport Modal from \"./MyModal/Modal\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { IconButton, Button } from \"@material-ui/core\";\nimport { DeleteIcon, AddIcon } from '@material-ui/icons';\nimport { URL, sendrequest } from \"../../../middlewares/request\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1),\n    padding: \"200%\"\n  }\n}));\nexport default function GestionProduits() {\n  _s();\n\n  const [active, setActive] = useState(1);\n  const [activeCarte, setActiveCarte] = useState(true);\n  const [datas, setDatas] = useState([]);\n  const [sideDishes, setSideDishes] = useState([]);\n  const [menuCategories, setMenuCategories] = useState([]);\n  const [dishesDisplayed, setDishesDisplay] = useState(false); // Booleans that will only allow the component to render when the requests have returned the datas\n\n  const [isDataLoading, setDataLoading] = useState(true);\n  const [isCategoryLoading, setCategoryLoading] = useState(true);\n  const [sideDishesLoading, setSideDishesLoading] = useState(false);\n  const [show, setShow] = useState(false);\n  const [showProductModal, setShowProductModal] = useState(false); // activeCarte && (window.document.body.style.overflow = \"hidden\")\n\n  activeCarte ? window.document.body.style.overflow = \"hidden\" : window.document.body.style.overflow = \"auto\";\n\n  const fetchData = async () => {\n    /*sendrequest(\"get\", \"gonak/produit/\", setDatas, setDataLoading);\n    sendrequest(\n        \"get\",\n        \"gonak/categorie/\",\n        setMenuCategories,\n        setCategoryLoading\n    );*/\n    //sendrequest(\"get\", \"letexan/produit/?accompagnement=true\", setSideDishes, setSideDishesLoading);\n    axios.get(URL + \"gonak/produit/\").then(res => {\n      setDatas(res.data);\n      console.log(res.data);\n    });\n    axios.get(URL + \"gonak/categorie/\").then(res => {\n      setMenuCategories(res.data);\n      console.log(res.data);\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []); //Function that will check through if id of the selected menu item matches the one of 'Menu'. If so then we will want to display all of the datas, not just a selection.\n\n  const isMenu = () => {\n    for (var i = 0; i < menuCategories.length; i++) {\n      if (menuCategories[i].id === active && menuCategories[i].nom === \"Menus du Midi\") {\n        return datas;\n      }\n    }\n  };\n\n  const classes = useStyles();\n\n  const handleClose = e => {\n    if (e.target.classList.contains(\"myModal__backdrop\") || e.target.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") || e.target.parentNode.parentNode.classList.contains(\"myModal__modal__close-btn\")) {\n      setShow(false); //setShowButton(false);\n    }\n  };\n\n  const deleteProduct = id => {\n    axios.delete(URL + \"gonak/produit/\" + id + \"/\").then(() => console.log(`deleted`)).catch(error => console.error(error));\n  };\n\n  const updateProduct = () => {};\n\n  const selectDishesPerCategory = () => {\n    var menuDishes = isMenu(); // !!!!!!!! A VOIR !!!!!!!!!!\n\n    if (menuDishes !== undefined) {} else {\n      const selectedDishes = datas // We filter the data :\n      .filter(data => {\n        // By only selecting the data that belongs to a category (categories is an array in which are the different categories to which a dish belongs) that matches the one selected by the user (var active)\n        return data.categorie === active;\n        /*for (var i = 0; i < data.categories.length; i++) {\n          if (data.categories[i] === active) return true;\n          return false;\n        }*/\n      }) //Once filtered, we can go through the selection to display them\n      .map(data => {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"100%\",\n              marginRight: \"-30%\"\n            },\n            onClick: () => setShow(true),\n            children: /*#__PURE__*/_jsxDEV(CartePage, {\n              idMenuPage: data.categorie\n            }, data.categorie, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            showModal: show,\n            setShowModal: setShow,\n            handleClose: handleClose,\n            children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                children: data.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: data.image,\n                alt: data.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: splitPrix(data.prix)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 31\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Modal.Body.Heading, {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: data.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 31\n            }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginRight: \"15px\",\n                  width: \"100%\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  border: \"0.7px solid black\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  onClick: deleteProduct,\n                  children: \"supprimer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  onClick: setShowProductModal,\n                  children: \"Modifier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(AddProductModal, {\n                  productToUpdate: data,\n                  categorieId: data.id,\n                  show: showProductModal,\n                  s: true,\n                  etShow: setShowProductModal\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true);\n      });\n      return selectedDishes;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"commander__\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        width: \"100%\",\n        marginBottom: \"5%\"\n      },\n      children: [isCategoryLoading && /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          id: \"demo-simple-select-label\",\n          children: \"Categorie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          labelId: \"demo-simple-select-label\",\n          id: \"demo-simple-select\",\n          value: active,\n          onChange: e => {\n            setActive(e.target.value);\n            setActiveCarte(false);\n            setDishesDisplay(false);\n          },\n          children: menuCategories.map(categorie => {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: categorie.id,\n              children: categorie.nom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 36\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: classes.button,\n        startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 32\n        }, this),\n        onClick: () => setShowProductModal(true),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(AddProductModal, {\n        categorieId: active,\n        show: showProductModal,\n        setShow: setShowProductModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        justifyContent: \"center\",\n        width: \"100%\"\n      },\n      className: \"commander__container__cards\",\n      children: selectDishesPerCategory()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 9\n  }, this);\n}\n\n_s(GestionProduits, \"W2PU1fcbNu3s7GrpWNnBCPbMH14=\", false, function () {\n  return [useStyles];\n});\n\n_c = GestionProduits;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"GestionProduits\");","map":{"version":3,"sources":["/home/christopher/Documents/Alter/GonakProject/gonak-front/src/components/admin/gestionProduits/index.js"],"names":["useEffect","useState","InputLabel","MenuItem","FormHelperText","FormControl","Select","Carte","splitPrix","makeStyles","Card","CartePage","AddProductModal","Modal","axios","IconButton","Button","DeleteIcon","AddIcon","URL","sendrequest","useStyles","theme","button","margin","spacing","padding","GestionProduits","active","setActive","activeCarte","setActiveCarte","datas","setDatas","sideDishes","setSideDishes","menuCategories","setMenuCategories","dishesDisplayed","setDishesDisplay","isDataLoading","setDataLoading","isCategoryLoading","setCategoryLoading","sideDishesLoading","setSideDishesLoading","show","setShow","showProductModal","setShowProductModal","window","document","body","style","overflow","fetchData","get","then","res","data","console","log","isMenu","i","length","id","nom","classes","handleClose","e","target","classList","contains","parentNode","deleteProduct","delete","catch","error","updateProduct","selectDishesPerCategory","menuDishes","undefined","selectedDishes","filter","categorie","map","width","marginRight","image","prix","description","display","justifyContent","border","textAlign","marginBottom","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Carte from \"./Carte\";\n//import MenuType from \"../../Menu/MenuType\";\nimport { splitPrix } from \"../../../utilities\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from \"./Carte/card\";\nimport CartePage from '../../site/Carte/CartePage';\nimport AddProductModal from \"./MyModal/AddProductModal\";\nimport Modal from \"./MyModal/Modal\";\nimport \"./index.css\";\nimport axios from \"axios\";\nimport { IconButton, Button } from \"@material-ui/core\";\nimport {DeleteIcon, AddIcon} from '@material-ui/icons';\nimport { URL, sendrequest } from \"../../../middlewares/request\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  button: {\n    margin: theme.spacing(1),\n    padding: \"200%\",\n  },\n}));\n\n\nexport default function GestionProduits () {\n    const [active, setActive] = useState(1);\n    const [activeCarte, setActiveCarte] = useState(true);\n    const [datas, setDatas] = useState([]);\n    const [sideDishes, setSideDishes] = useState([]);\n    const [menuCategories, setMenuCategories] = useState([]);\n    const [dishesDisplayed, setDishesDisplay] = useState(false);\n    // Booleans that will only allow the component to render when the requests have returned the datas\n    const [isDataLoading, setDataLoading] = useState(true);\n    const [isCategoryLoading, setCategoryLoading] = useState(true);\n    const [sideDishesLoading, setSideDishesLoading] = useState(false);\n    const [show, setShow] = useState(false);\n    const [showProductModal, setShowProductModal] = useState(false);\n    // activeCarte && (window.document.body.style.overflow = \"hidden\")\n    activeCarte\n        ? (window.document.body.style.overflow = \"hidden\")\n        : (window.document.body.style.overflow = \"auto\");\n    const fetchData = async () => {\n        /*sendrequest(\"get\", \"gonak/produit/\", setDatas, setDataLoading);\n        sendrequest(\n            \"get\",\n            \"gonak/categorie/\",\n            setMenuCategories,\n            setCategoryLoading\n        );*/\n        //sendrequest(\"get\", \"letexan/produit/?accompagnement=true\", setSideDishes, setSideDishesLoading);\n        axios.get(URL + \"gonak/produit/\").then((res) => {\n          setDatas(res.data);\n          console.log(res.data);\n        });\n\n        axios.get(URL + \"gonak/categorie/\").then((res) => {\n          setMenuCategories(res.data);\n          console.log(res.data);\n        });\n    };\n\n    useEffect(() => {\n        fetchData();\n    }, []);\n\n    //Function that will check through if id of the selected menu item matches the one of 'Menu'. If so then we will want to display all of the datas, not just a selection.\n    const isMenu = () => {\n        for (var i = 0; i < menuCategories.length; i++) {\n            if (menuCategories[i].id === active && menuCategories[i].nom === \"Menus du Midi\") {\n                return datas;\n            }\n        }\n    };\n\n    const classes = useStyles();\n\n  const handleClose = (e) => {\n\n    if (\n      e.target.classList.contains(\"myModal__backdrop\") ||\n      e.target.classList.contains(\"myModal__modal__close-btn\") ||\n      e.target.parentNode.classList.contains(\"myModal__modal__close-btn\") ||\n      e.target.parentNode.parentNode.classList.contains(\n        \"myModal__modal__close-btn\"\n      )\n    ) {\n      setShow(false);\n      //setShowButton(false);\n    }\n  };\n\n  const deleteProduct = (id) => {\n    axios.delete(URL + \"gonak/produit/\" + id + \"/\")\n      .then(() => console.log(`deleted`))\n      .catch(error => console.error(error));\n  }\n  const updateProduct = () => {\n\n  }\n\n    const selectDishesPerCategory = () => {\n        var menuDishes = isMenu();\n        // !!!!!!!! A VOIR !!!!!!!!!!\n        if (menuDishes !== undefined) {\n         \n        } else {\n            const selectedDishes = datas\n                // We filter the data :\n                .filter((data) => {\n                    // By only selecting the data that belongs to a category (categories is an array in which are the different categories to which a dish belongs) that matches the one selected by the user (var active)\n                    return (\n                        data.categorie === active\n                    )\n\n\n                    /*for (var i = 0; i < data.categories.length; i++) {\n                      if (data.categories[i] === active) return true;\n                      return false;\n                    }*/\n                })\n                //Once filtered, we can go through the selection to display them\n                .map((data) => {\n                    return (\n                        <>\n                            <div style={{width: \"100%\", marginRight: \"-30%\"}} onClick={() => setShow(true)}>\n                                <CartePage \n                                    key={data.categorie} \n                                    idMenuPage={data.categorie} \n                                />\n                            </div>\n\n                            <Modal showModal={show} setShowModal={setShow} handleClose={handleClose}>\n                              <Modal.Header>\n                                <h1>{data.nom}</h1>\n                                <img src={data.image} alt={data.nom} />\n                                <p>{splitPrix(data.prix)}</p>\n                              </Modal.Header>\n                              <Modal.Body>\n                                <Modal.Body.Heading>Description</Modal.Body.Heading>\n                                <p>{data.description}</p>\n                              </Modal.Body>\n                              <Modal.Footer>\n                                <div\n                                  style={{\n                                    marginRight: \"15px\",\n                                    width: \"100%\",\n                                    display: \"flex\",\n                                    justifyContent: \"space-between\",\n                                    border: \"0.7px solid black\",\n\n                                  }}>\n                                  <Button onClick={deleteProduct}>supprimer</Button>\n                                  <Button onClick={setShowProductModal}>Modifier</Button>\n                                  <AddProductModal \n                                    productToUpdate={data} \n                                    categorieId={data.id} \n                                    show={showProductModal} s\n                                    etShow={setShowProductModal} ></AddProductModal>\n                                </div>\n                              </Modal.Footer>\n                            </Modal>\n                        </>\n                    );\n                });\n            return selectedDishes;\n        }\n    };\n\n    return (\n        <div className='commander__'>\n\n            <div style={{ textAlign: 'center', width: \"100%\", marginBottom: \"5%\" }}>\n            {isCategoryLoading &&\n                <FormControl >\n                    <InputLabel id=\"demo-simple-select-label\">Categorie</InputLabel>\n                    <Select\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    value={active}\n                    onChange={(e)=>{\n                        setActive(e.target.value);\n                        setActiveCarte(false);\n                        setDishesDisplay(false);\n                    }}\n                    >\n                        {menuCategories.map(categorie=>{\n                            return <MenuItem value={categorie.id}>{categorie.nom}</MenuItem>\n                        })}\n                    </Select>\n                </FormControl>\n            }\n                 <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    className={classes.button}\n                    startIcon={<AddIcon />}\n                    onClick={() => setShowProductModal(true)}\n                  >\n                    Delete\n                  </Button>\n                {/*<Button onClick={() => setShowProductModal(true)} > Ajouter Produit</Button>*/}\n                <AddProductModal categorieId={active} show={showProductModal} setShow={setShowProductModal} ></AddProductModal>\n            </div>\n\n            <div style={{ justifyContent: \"center\", width: \"100%\",}} className='commander__container__cards'>\n                {selectDishesPerCategory()}\n            </div>\n\n        </div>\n    );\n};\n\n"]},"metadata":{},"sourceType":"module"}