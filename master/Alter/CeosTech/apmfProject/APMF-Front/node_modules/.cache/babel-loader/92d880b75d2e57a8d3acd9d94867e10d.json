{"ast":null,"code":"var _jsxFileName = \"/home/christopher/Documents/Alter/apmfProject/APMF-Front/src/components/admin/fichierContact/Contact.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect\n/*, useRef */\n} from \"react\";\nimport \"./contact.css\"; //import fileDownload from \"js-file-download\";\n\nimport { Accordion, AccordionDetails, AccordionSummary, // Button,\nmakeStyles } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport ExpandedIcon from \"../product/ExpandedIcon\";\nimport axios from \"axios\";\nimport { URL } from \"../../../middlewares/request\"; // import { useHistory } from \"react-router\";\n\nimport MessageContainer from \"./MessageContainer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(16),\n    fontWeight: theme.typography.fontWeightMedium,\n    color: \"black\",\n    width: \"20%\"\n  },\n  table: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\"\n  },\n  accordion: {\n    marginTop: \"30px\",\n    position: \"relative\",\n    border: \"1px solid gray\"\n  },\n  p: {\n    fontWeight: \"bold\",\n    margin: 0,\n    width: \"20%\"\n  }\n}));\nexport default function Contact({\n  contact: {\n    id\n  }\n}) {\n  _s();\n\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState(false);\n  const [message, setMessage] = useState({});\n  const [seen, setSeen] = useState(null); // const history = useHistory();\n\n  const fechContactById = async () => {\n    axios.get(URL + \"contacts/\" + id + \"/\").then(res => {\n      setMessage(res.data);\n    });\n  };\n\n  const deleteData = async () => {\n    axios.delete(URL + \"contacts/\" + id).then(res => {\n      window.location.reload(); // history.push(\"/admin/fichier-contact\");\n    });\n  };\n\n  const updateVu = async () => {\n    if (!message.vu) {\n      const newContact = { ...message,\n        vu: true\n      };\n      axios.put(URL + \"contacts/\" + message.id + \"/\", newContact).then(res => {\n        setSeen(res.data.vu);\n      });\n    }\n  };\n\n  useEffect(() => {\n    fechContactById();\n  }, [seen]);\n  return /*#__PURE__*/_jsxDEV(Accordion, {\n    className: classes.accordion,\n    onChange: (e, expand) => {\n      setExpanded(expand);\n      updateVu();\n    },\n    children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n      \"aria-controls\": \"panel1a-content\",\n      id: \"panel1a-header\",\n      children: [!expanded ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.table,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: message.vu ? \"far fa-envelope-open icon  \" : \"far fa-envelope icon unseen-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.p,\n          children: message.prenom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.p,\n          children: message.nom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.p,\n          children: message.objet\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: classes.p,\n          children: new Date(message.date_envoie).toLocaleDateString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ExpandedIcon, {\n        expanded: expanded,\n        setExpanded: setExpanded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"contact__container\",\n        children: [/*#__PURE__*/_jsxDEV(MessageContainer, {\n          contact: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"contact__button\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: `mailto:${message.email}`,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"registre__button\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-reply \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"supp_button\",\n            onClick: () => {\n              deleteData();\n            },\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"far fa-trash-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, message.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Contact, \"UtIAnPqNTuxpdbDc/JKLezDNXig=\", false, function () {\n  return [useStyles];\n});\n\n_c = Contact;\n\nvar _c;\n\n$RefreshReg$(_c, \"Contact\");","map":{"version":3,"sources":["/home/christopher/Documents/Alter/apmfProject/APMF-Front/src/components/admin/fichierContact/Contact.js"],"names":["React","useEffect","Accordion","AccordionDetails","AccordionSummary","makeStyles","useState","ExpandedIcon","axios","URL","MessageContainer","useStyles","theme","heading","fontSize","typography","pxToRem","fontWeight","fontWeightMedium","color","width","table","display","justifyContent","alignItems","accordion","marginTop","position","border","p","margin","Contact","contact","id","classes","expanded","setExpanded","message","setMessage","seen","setSeen","fechContactById","get","then","res","data","deleteData","delete","window","location","reload","updateVu","vu","newContact","put","e","expand","prenom","nom","objet","Date","date_envoie","toLocaleDateString","email"],"mappings":"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","sourcesContent":["import React, { useEffect /*, useRef */ } from \"react\";\n\nimport \"./contact.css\";\n//import fileDownload from \"js-file-download\";\n\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  // Button,\n  makeStyles,\n} from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport ExpandedIcon from \"../product/ExpandedIcon\";\nimport axios from \"axios\";\nimport { URL } from \"../../../middlewares/request\";\n// import { useHistory } from \"react-router\";\nimport MessageContainer from \"./MessageContainer\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(16),\n    fontWeight: theme.typography.fontWeightMedium,\n    color: \"black\",\n    width: \"20%\",\n  },\n  table: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n  },\n\n  accordion: {\n    marginTop: \"30px\",\n    position: \"relative\",\n    border: \"1px solid gray\",\n  },\n  p: {\n    fontWeight: \"bold\",\n    margin: 0,\n    width: \"20%\",\n  },\n}));\n\nexport default function Contact({ contact: { id } }) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState(false);\n  const [message, setMessage] = useState({});\n  const [seen, setSeen] = useState(null);\n  // const history = useHistory();\n\n  const fechContactById = async () => {\n    axios.get(URL + \"contacts/\" + id + \"/\").then((res) => {\n      setMessage(res.data);\n    });\n  };\n\n  const deleteData = async () => {\n    axios.delete(URL + \"contacts/\" + id).then((res) => {\n      window.location.reload();\n      // history.push(\"/admin/fichier-contact\");\n    });\n  };\n\n  const updateVu = async () => {\n    if (!message.vu) {\n      const newContact = { ...message, vu: true };\n      axios\n        .put(URL + \"contacts/\" + message.id + \"/\", newContact)\n        .then((res) => {\n          setSeen(res.data.vu);\n        });\n    }\n  };\n\n  useEffect(() => {\n    fechContactById();\n  }, [seen]);\n\n  return (\n    <Accordion\n      className={classes.accordion}\n      key={message.id}\n      onChange={(e, expand) => {\n        setExpanded(expand);\n        updateVu();\n      }}\n    >\n      <AccordionSummary aria-controls=\"panel1a-content\" id=\"panel1a-header\">\n        {!expanded ? (\n          <div className={classes.table}>\n            <i\n              className={\n                message.vu\n                  ? \"far fa-envelope-open icon  \"\n                  : \"far fa-envelope icon unseen-icon\"\n              }\n            ></i>\n            <p className={classes.p}>{message.prenom}</p>\n            <p className={classes.p}>{message.nom}</p>\n            {/* <p className={classes.p}>{message.email}</p> */}\n            <p className={classes.p}>{message.objet}</p>\n            <p className={classes.p}>\n              {new Date(message.date_envoie).toLocaleDateString()}\n            </p>\n          </div>\n        ) : (\n          <div></div>\n        )}\n        <ExpandedIcon expanded={expanded} setExpanded={setExpanded} />\n      </AccordionSummary>\n      <AccordionDetails>\n        <div className=\"contact__container\">\n          <MessageContainer contact={message} />\n          <div className=\"contact__button\">\n            <a href={`mailto:${message.email}`}>\n              <button className=\"registre__button\">\n                <i className=\"fas fa-reply \"></i>\n              </button>\n            </a>\n            <button\n              className=\"supp_button\"\n              onClick={() => {\n                deleteData();\n              }}\n            >\n              <i className=\"far fa-trash-alt\"></i>\n            </button>\n          </div>\n        </div>\n      </AccordionDetails>\n    </Accordion>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}